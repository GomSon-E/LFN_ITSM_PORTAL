<style>[pgmid='adjSO'].framepage .flex163 { 
    background-color: beige;
    padding-left: 1em;
    padding-right: 1em;
}

[pgmid='adjSO'].framepage .flex163 > *:first-child { 
    flex: 1 1 10%; 
} 
[pgmid='adjSO'].framepage .flex163 > *:nth-child(2) { 
    flex: 1 1 50%; 
}
[pgmid='adjSO'].framepage .flex163 > *:last-child { 
    flex: 1 1 40%; 
}</style>

<!-- HTML autogen start ---------------------------------------------- -->            
<div class="pageNav"></div>
<div class="pageTop"></div>
<div class="pageCond"></div>
<div class="pageGuide"></div>
<div class="pageContent flexColumn">
    <div id="mst"></div>        
    <div class="flexRow">
        <div style="flex:1 1 50%" id="itemlist" class="flexColumn"></div> 
        <div style="flex:1 1 calc(50% - 3em)" class="flexColumn">
            <div id="paylist"></div>        
            <div id='list' class="flexColumn"></div>
        </div>
    </div>
</div>
<div id="posinfo"></div>
<script>
function lpad(str, padLen, padStr) {
    if (padStr.length > padLen) {
        return str;
    }
    str += ""; // 문자로
    padStr += ""; // 문자로
    while (str.length < padLen)
        str = padStr + str;
    str = str.length >= padLen ? str.substring(0, padLen) : str;
    return str;
}
    
function rpad(str, padLen, padStr) {
    if (padStr.length > padLen) {
        return str + "";
    }
    str += ""; // 문자로
    padStr += ""; // 문자로
    while (str.length < padLen)
        str += padStr;
    str = str.length >= padLen ? str.substring(0, padLen) : str;
    return str;
}    
</script>
<!-- HTML autogen end ---------------------------------------------- -->
<script>
/*-- SCRIPT autogen start ---------------------------------------------- */        
$(function() {
    var appid = "fo_pos";
    var pgmid = "adjSONew"; 
    var page = $("*[pgmid='"+pgmid+"'].framepage").last();
    var pageid = page.attr("id"); 
    var me = {}
    var dataSet = {};
    var dataDef = {};
    var pageObj = {};
    var bEdit = false;
    me.fnInit = function() {
        gfn[pageid] = me; 
        me.appid    = appid;
        me.pgmid    = pgmid;
        me.pageid   = pageid;
        me.page     = page; 
        me.dataSet = dataSet;
        me.dataDef = dataDef;
        me.pageObj = pageObj;
        me.bEdit = bEdit;
me.dataDef["_pgm"]={"pgmid":"adjSONew","pgm_nm":"임의등록 판매조정(New)","pgm_tp":"UX","proc_mst_id":"","proc_mst_nm":"","remark":"통신오류로 대기상태이거나 구POS데이터를 가져와서 반품처리함","ver":1.2,"pgm_stat":"Y","reg_usid":"bjh","reg_dt":"2021-11-19 10:09:50","upd_usid":"bjh","upd_dt":"2021-11-19 10:09:50","app_pgmid":"fo_pos","pgm_grp_nm":"판매","sort_seq":23,"shortcut":"","crud":"C","app_pgm_nm":"매장"};
me.dataDef["_pgm_func"]=[{"func_icon":"fas fa-save","reg_dt":"2021-11-19 10:09:50","reg_usid":"","func_nm":"저장","upd_usid":"","upd_dt":"2021-11-19 10:09:50","func_tp":"DB_W","remark":null,"pgmid":"adjSO","sort_seq":"1","funcid":"save","content":"입력내역 저장","crud":"R","id":"0"},{"func_icon":"fas fa-file","reg_dt":"2021-11-19 10:09:50","reg_usid":"","func_nm":"신규","upd_usid":"","upd_dt":"2021-11-19 10:09:50","func_tp":"EH","remark":null,"pgmid":"adjSO","sort_seq":"2","funcid":"new","content":"신규등록","crud":"R","id":"1"},{"func_icon":"fas fa-search","reg_dt":"2021-11-19 10:09:50","reg_usid":"","func_nm":"조회","upd_usid":"","upd_dt":"2021-11-19 10:09:50","func_tp":"DB_R","remark":null,"pgmid":"adjSO","sort_seq":"3","funcid":"search","content":"대상자료 조회","crud":"R","id":"2"},{"func_icon":"fas fa-check","reg_dt":"2021-11-19 10:09:50","reg_usid":"","func_nm":"확정","upd_usid":"","upd_dt":"2021-11-19 10:09:50","func_tp":"DB_W","remark":null,"pgmid":"adjSO","sort_seq":"4","funcid":"cfm","content":"본사담당자 확정 후 매출 및 수불반영","crud":"R","id":"3"},{"func_icon":"extra","reg_dt":"2021-11-19 10:09:50","reg_usid":"","func_nm":"POS선택/변경","upd_usid":"","upd_dt":"2021-11-19 10:09:50","func_tp":"EH","remark":null,"pgmid":"adjSO","sort_seq":"5","funcid":"changePos","content":"판매등록 POS를 설정하거나 변경합니다.","crud":"R","id":"4"}];
me.dataDef["_pgm_data"] = {};
me.dataDef["_pgm_data"]["pageCond"]={"sort_seq":"1","data_id":"pageCond","data_nm":"조회조건","data_icon":null,"component_pgmid":"aweForm","component_option":null,"inout_tp":"IN","content":[{"sort_seq":1,"section":null,"section_icon":null,"colgrp":"매출일","colid":"sale_dt_from","colnm":"매출일","dtype":"ymd","etype":"txt","attr":"ymd keycol","defval":"date(\"1st\")","w":"8","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"0"},{"sort_seq":2,"section":null,"section_icon":null,"colgrp":"매출일","colid":"sale_dt_to","colnm":"매출일","dtype":"ymd","etype":"txt","attr":"ymd keycol","defval":"date(\"today\")","w":"8","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"1"},{"sort_seq":3,"section":null,"section_icon":null,"colgrp":null,"colid":"shopcd","colnm":"매장코드","dtype":"text","etype":"sel","attr":"disabled","defval":"gUserinfo.deptcd","w":"15","h":null,"refcd":"SHOPCD","option":"sel:shopcd::cdnm","len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"2"},{"sort_seq":4,"section":null,"section_icon":null,"colgrp":"등록일","colid":"rcv_dt_from","colnm":"등록일","dtype":"ymd","etype":"txt","attr":"ymd ","defval":null,"w":"8","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"3"},{"sort_seq":5,"section":null,"section_icon":null,"colgrp":"등록일","colid":"rcv_dt_to","colnm":"등록일","dtype":"ymd","etype":"txt","attr":"ymd ","defval":null,"w":"8","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"4"},{"sort_seq":6,"section":null,"section_icon":null,"colgrp":null,"colid":"cfm_yn","colnm":"확정","dtype":"text","etype":"sel","attr":null,"defval":null,"w":"5","h":null,"refcd":"[{\"cd\":\"Y\",\"nm\":\"확정\"},{\"cd\":\"N\",\"nm\":\"미확정\"}]","option":"all:cfm_yn::cdnm","len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"5"}]};
me.dataDef["_pgm_data"]["list"]={"sort_seq":"2","data_id":"list","data_nm":"등록된 수기전표 목록","data_icon":null,"component_pgmid":"agGrid","component_option":null,"inout_tp":"OUT","content":[{"sort_seq":1,"section":null,"section_icon":null,"colgrp":null,"colid":"sale_dt","colnm":"매출일","dtype":"ymd","etype":"raw","attr":"keycol","defval":null,"w":"7","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"0"},{"sort_seq":2,"section":null,"section_icon":null,"colgrp":null,"colid":"pos_no","colnm":"POS","dtype":"text","etype":"raw","attr":null,"defval":null,"w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"1"},{"sort_seq":3,"section":null,"section_icon":null,"colgrp":null,"colid":"sale_seq","colnm":"순번","dtype":"text","etype":"raw","attr":null,"defval":null,"w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"2"},{"sort_seq":4,"section":null,"section_icon":null,"colgrp":null,"colid":"pay_amt_tot","colnm":"총액","dtype":"num","etype":"raw","attr":null,"defval":null,"w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"3"},{"sort_seq":5,"section":null,"section_icon":null,"colgrp":null,"colid":"pay_amt_card","colnm":"카드액","dtype":"num","etype":"raw","attr":null,"defval":null,"w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"4"},{"sort_seq":6,"section":null,"section_icon":null,"colgrp":null,"colid":"pay_amt_cash","colnm":"현금액","dtype":"num","etype":"raw","attr":null,"defval":null,"w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"5"},{"sort_seq":7,"section":null,"section_icon":null,"colgrp":null,"colid":"cfm_yn","colnm":"확정여부","dtype":"text","etype":"raw","attr":null,"defval":null,"w":"3","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"6"},{"sort_seq":8,"section":null,"section_icon":null,"colgrp":null,"colid":"delBtn","colnm":"삭제","dtype":"text","etype":"btn","attr":null,"defval":null,"w":"5","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"7"},{"sort_seq":9,"section":null,"section_icon":null,"colgrp":null,"colid":"remark","colnm":"비고","dtype":"text","etype":"raw","attr":null,"defval":null,"w":"20","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"8"},{"sort_seq":10,"section":null,"section_icon":null,"colgrp":null,"colid":"rcv_dt","colnm":"등록일","dtype":"ymd","etype":"raw","attr":null,"defval":null,"w":"7","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"9"},{"sort_seq":11,"section":null,"section_icon":null,"colgrp":null,"colid":"so_nm","colnm":"영수번호","dtype":"text","etype":"raw","attr":"keycol","defval":null,"w":"20","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"10"},{"sort_seq":12,"section":null,"section_icon":null,"colgrp":null,"colid":"item_cnt","colnm":"건수","dtype":"num","etype":"raw","attr":null,"defval":null,"w":"3","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"11"},{"sort_seq":13,"section":null,"section_icon":null,"colgrp":null,"colid":"so_amt","colnm":"상품금액","dtype":"num","etype":"raw","attr":null,"defval":null,"w":"8","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"12"},{"sort_seq":14,"section":null,"section_icon":null,"colgrp":null,"colid":"pay_tp","colnm":"결제유형","dtype":"text","etype":"sel","attr":"readonly","defval":null,"w":null,"h":null,"refcd":"PAY_TP","option":"sel:pay_tp::cdnm","len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"13"},{"sort_seq":15,"section":null,"section_icon":null,"colgrp":null,"colid":"card_nm","colnm":"카드사","dtype":"text","etype":"raw","attr":null,"defval":null,"w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"14"},{"sort_seq":16,"section":null,"section_icon":null,"colgrp":null,"colid":"cfm_chk","colnm":"확정","dtype":"text","etype":"cbx","attr":null,"defval":null,"w":"5","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"15"},{"sort_seq":17,"section":null,"section_icon":null,"colgrp":null,"colid":"so_no","colnm":"판매전표번호","dtype":"text","etype":"none","attr":"hidden","defval":null,"w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"16"}]};
me.dataDef["_pgm_data"]["mst"]={"sort_seq":"3","data_id":"mst","data_nm":"수기매출 (조정)등록","data_icon":null,"component_pgmid":"aweForm","component_option":null,"inout_tp":"IN","content":[{"sort_seq":1,"section":null,"section_icon":null,"colgrp":null,"colid":"so_nm","colnm":"영수증번호","dtype":"text","etype":"raw","attr":"pk hidden","defval":null,"w":"25","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"0"},{"sort_seq":2,"section":null,"section_icon":null,"colgrp":null,"colid":"so_no","colnm":"판매번호","dtype":"text","etype":"raw","attr":"hidden","defval":null,"w":"1","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"1"},{"sort_seq":3,"section":null,"section_icon":null,"colgrp":null,"colid":"sale_dt","colnm":"판매일자","dtype":"ymd","etype":"txt","attr":"pk ymd","defval":null,"w":"6","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"2"},{"sort_seq":4,"section":null,"section_icon":null,"colgrp":null,"colid":"pos_no","colnm":"POS번호","dtype":"text","etype":"raw","attr":"readonly keycol","defval":null,"w":"3","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"3"},{"sort_seq":5,"section":null,"section_icon":null,"colgrp":null,"colid":"sale_seq","colnm":"순번","dtype":"text","etype":"raw","attr":"readonly","defval":null,"w":"3","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"4"},{"sort_seq":6,"section":null,"section_icon":null,"colgrp":null,"colid":"sale_amt","colnm":"판매액","dtype":"num","etype":"raw","attr":null,"defval":null,"w":"8","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"5"},{"sort_seq":7,"section":null,"section_icon":null,"colgrp":null,"colid":"pay_amt","colnm":"결제액","dtype":"num","etype":"raw","attr":"keycol","defval":null,"w":"8","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"6"},{"sort_seq":8,"section":null,"section_icon":null,"colgrp":null,"colid":"balance","colnm":"잔액","dtype":"num","etype":"raw","attr":null,"defval":null,"w":"8","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"7"},{"sort_seq":9,"section":null,"section_icon":null,"colgrp":null,"colid":"remark","colnm":"비고","dtype":"text","etype":"txt","attr":"hidden","defval":null,"w":"20","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"8"},{"sort_seq":10,"section":null,"section_icon":null,"colgrp":null,"colid":"rcv_fileid","colnm":"확정여부","dtype":"text","etype":"raw","attr":"hidden","defval":null,"w":"3","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"9"}]};
me.dataDef["_pgm_data"]["itemlist"]={"sort_seq":"4","data_id":"itemlist","data_nm":"상품목록","data_icon":null,"component_pgmid":"agGrid","component_option":{"gridOpt":"rn chk","func":[{"funcid":"addRow","func_nm":"줄추가","func_icon":"fas fa-plus"},{"funcid":"delRow","func_nm":"줄삭제","func_icon":"fas fa-minus"}]},"inout_tp":"IN","content":[{"sort_seq":1,"section":null,"section_icon":null,"colgrp":null,"colid":"goods_cd","colnm":"상품코드","dtype":"text","etype":"txt","attr":"pk upper","defval":null,"w":"13","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":"count('goods_cd')+\" 건\"","remark":null,"crud":"C","id":"0"},{"sort_seq":2,"section":null,"section_icon":null,"colgrp":null,"colid":"sale_price","colnm":"판매가","dtype":"num","etype":"txt","attr":null,"defval":null,"w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":"\" \"","remark":null,"crud":"C","id":"1"},{"sort_seq":3,"section":null,"section_icon":null,"colgrp":null,"colid":"so_qty","colnm":"수량","dtype":"num","etype":"txt","attr":"keycol","defval":null,"w":"5","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"2"},{"sort_seq":4,"section":null,"section_icon":null,"colgrp":null,"colid":"so_amt","colnm":"금액","dtype":"num","etype":"raw","attr":null,"defval":null,"w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"3"},{"sort_seq":5,"section":null,"section_icon":null,"colgrp":null,"colid":"goods_nm","colnm":"상품명","dtype":"text","etype":"raw","attr":null,"defval":null,"w":"15","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"4"},{"sort_seq":6,"section":null,"section_icon":null,"colgrp":null,"colid":"sale_price_org","colnm":"현판가","dtype":"num","etype":"raw","attr":null,"defval":null,"w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"5"}]};
me.dataDef["_pgm_data"]["paylist"]={"sort_seq":"5","data_id":"paylist","data_nm":"결제정보","data_icon":null,"component_pgmid":"agGrid","component_option":{"gridOpt":"rn chk","func":[{"funcid":"addRow","func_nm":"줄추가","func_icon":"fas fa-plus"},{"funcid":"delRow","func_nm":"줄삭제","func_icon":"fas fa-minus"}]},"inout_tp":"IN","content":[{"sort_seq":1,"section":null,"section_icon":null,"colgrp":null,"colid":"cd_stat","colnm":"승인/취소","dtype":"text","etype":"sel","attr":"keycol pop upper","defval":"Y","w":"6","h":null,"refcd":"PAY_STAT","option":"sel:cd_stat::cdnm","len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"0"},{"sort_seq":2,"section":null,"section_icon":null,"colgrp":null,"colid":"pay_tp","colnm":"결제유형","dtype":"text","etype":"txt","attr":"hidden keycol","defval":null,"w":"5","h":null,"refcd":"PAY_TP","option":"sel:pay_tp:pay_tp_nm:cdnm","len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"1"},{"sort_seq":3,"section":null,"section_icon":null,"colgrp":null,"colid":"cost_comcd","colnm":"결제구분","dtype":"text","etype":"sel","attr":"pk","defval":null,"w":"8","h":null,"refcd":"CARD_CD","option":"sel:cost_comcd::cd:remark","len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"2"},{"sort_seq":4,"section":null,"section_icon":null,"colgrp":null,"colid":"pay_amt","colnm":"결제액","dtype":"num","etype":"txt","attr":"keycol","defval":null,"w":"10","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"3"},{"sort_seq":5,"section":null,"section_icon":null,"colgrp":null,"colid":"remark","colnm":"비고","dtype":"text","etype":"txt","attr":null,"defval":null,"w":"20","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"4"}]};
me.dataDef["_pgm_data"]["posinfo"]={"sort_seq":"6","data_id":"posinfo","data_nm":"POS정보(팝업)","data_icon":null,"component_pgmid":"agGrid","component_option":{"height":"26em","remark":"판매등록하려는 POS를 선택하세요...","func":[{"funcid":"select","func_nm":"선택","func_icon":"fas fa-check"}]},"inout_tp":"IN","content":[{"sort_seq":"1","section":null,"section_icon":null,"colgrp":null,"colid":"cd","colnm":"POS번호","dtype":"text","etype":"raw","attr":"keycol","defval":null,"w":"5","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"0"},{"sort_seq":"2","section":null,"section_icon":null,"colgrp":null,"colid":"nm","colnm":"POS명","dtype":"text","etype":"raw","attr":null,"defval":null,"w":"20","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"1"},{"sort_seq":"3","section":null,"section_icon":null,"colgrp":null,"colid":"so_tp","colnm":"판매구분","dtype":"text","etype":"sel","attr":"disabled","defval":null,"w":"15","h":null,"refcd":"SO_TP","option":"sel:so_tp::cdnm","len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"2"},{"sort_seq":"4","section":null,"section_icon":null,"colgrp":null,"colid":"cat_nm","colnm":"승인단말기번호","dtype":"text","etype":"raw","attr":null,"defval":null,"w":"10","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"3"}]};

        me.pageObj["_page"] = new gfnFramepage( me ); 
        for(var component_id in me.dataDef["_pgm_data"]) { 
            me.pageObj[component_id] = new gfnComponent( me.pageid, component_id, me.dataDef["_pgm_data"][component_id], me.fnEH, me); 
        }  
        setTimeout(function(){
            $("#frameset").scrollTo(0); //스크롤 
        },10);
        if(typeof(me.fnInitExtra)=='function') me.fnInitExtra(); 
    } 
/*-- SCRIPT autogen end ---------------------------------------------- */

    /* 사용자초기화 */
    me.fnInitExtra=function() {
        //권한제어
        function _auth(auth) {
            console.log(auth);
            if(isNull(auth)) { 
                gfnAlert("시스템 사용권한 점검","화면에 대한 권한이 없습니다!");
                $("*[pageidx='"+me.pageid+"']").remove();
                delete gfn[me.pageid]; 
                me.page.remove(); 
            } else { 
                if(isNull(auth.cfm_yn) || auth.cfm_yn != "Y") { //확정권한이 없으면 숨겨주고 잠궈줌
                    me.pageObj.pageCond
                    me.pageObj._pageFunc.setDisp("cfm",false); 
                    me.pageObj.pageCond.col["shopcd"].setDisable(true);
	                me.dataDef._pgm_data.list.content[14].attr='hidden';
	                me.pageObj.list.reset();
                    me.auth = "N";
                } else {
                    me.pageObj._pageFunc.setDisp("cfm",true); 
                    me.pageObj.pageCond.col["shopcd"].setDisable(false);
	                me.dataDef._pgm_data.list.content[14].attr='';
	                me.pageObj.list.reset();
                    me.auth = "Y";
                }
            } 
        }
        if(subset(gds.comcd,"grpcd","pgm_auth").length==0) { //프로그램 권한조회하여
            gfnGetData("pgm_auth",function(rtn){
                _auth(subset(rtn,"pgmid",pgmid)[0]);  //해당 프로그램의 권한값 가져오기
            }); 
        } else {
            _auth(subset(subset(gds.comcd,"grpcd","pgm_auth"),"pgmid",pgmid)[0]) ;
        } 
        
        //사용자 매장정보가 없으면 화면을 닫는다. 
        if(isNull(gUserinfo.deptcd)) {
           gfnAlert("사용자 매장정보 확인","사용자의 매장정보가 존재하지 않습니다. 다시 로그인하거나 매장정보 등록 후 진행하십시오.");
        }
        
        //기본정보 세팅  
        //pos_no확인 후 입력받기 
        var posinfo = me.page.find("#posinfo");
        me.posinfo = gfnPopup("POS선택",posinfo,{  
            autoOpen: false,
			resizable: false, 
			modal: true, 
			minWidth: 600,
			minHeight: 400,  
			close:  function(){
			    function checkChoice(pop) {
			        if(me.auth=="N") {
    			        if(isNull(gUserinfo.pos_no)) {
        			        gfnStatus("먼저 POS번호를 선택해주세요...");
        			    } else { 
        			        pop.dialog("close"); 
        			    }    
			        }
			    }
			    setTimeout(checkChoice, 100, $(this)); 
			}
		});     
		
		if( me.auth=="N" && isNull(gUserinfo.pos_no) ) {
		    me.fnChangePos();
		} else {
		    me.fnNew();
		}
        
    } 
    
    /* 이벤트핸들러 */
    me.currow = -1;
    me.fnEH=function(component, evt, row, col, val) { 
        console.log(evt+","+row+","+col+","+val);
        //화면기능버튼이 눌리면 
        if (component==me.pageObj["_pageFunc"]){ 
            if(typeof(me[col])=='function') me[col](); //col=기능명 me["fnSearch"]()=me.fnSearch(); 
        }
        //POS번호선택
        if (component==me.pageObj["posinfo"]){ 
            if(evt=="dblclick") {
                if(row < 0) {
                    gfnAlert("POS선택","정확한 POS를 선택하세요");
                } else {
                    me.fnSetPosinfo( row );     
                } 
            }
            if (evt=="componentFunc" && row=="select") {
                var currow = component.selectedRow();
                if(currow < 0) {
                    gfnAlert("POS선택","POS번호를 선택 후 [선택]버튼을 클릭하세요");
                } else {  
                    me.fnSetPosinfo( currow );
                    //console.log(currow);
                } 
            }
        }        
        //pageCond:조회조건 이벤트처리     
        else if(component==me.pageObj["pageCond"]) { 
        } 
        
        //list: 목록을 클릭하면 마스터 조회하는 기능 없음 
        else if(component==me.pageObj["list"]) { 
            if(evt=="click" && col=="delBtn") {
                if(row >= 0) {
                    me.fnDelete(row);
                }
            } 
            if(evt=="focus") {
                if(row >=0 && row != me.currrow) {
                    me.currow = row;
                    var so_no = component.getVal(row,"so_no");
                    me.fnSearchMst(so_no);
                }
            }
        }

        //mst : 신규등록 판매전표 헤더 
        else if(component==me.pageObj["mst"]) {
            if(evt=="change") {
                me.bEdit = true;
            }
            if(evt=="componentFunc") {
                if(row=="new") {
                    me.fnNew();
                }
                if(row=="save") {
                    me.fnSave();
                }
            }
        }
        
        //itemlist:상품 목록조회 이벤트처리     
        else if(component==me.pageObj["itemlist"]) {
            if(evt=="componentFunc") {
                if(row=="addRow") {
                    component.addRow();
                    me.bEdit = true;
                } else if(row=="delRow") {
                    me.bEdit = true;
                    component.delRow();
                    me.fnCalcAmt();
                }
            }
            if( (evt=="change"||evt=="enter") && col=="goods_cd") {
                if(row >= 0) {
                    me.bEdit = true;
                    me.fnGoodsSearch(row);
                }
            } else if( evt=="change" && col=="sale_price") {
                if(row >= 0) {
                    if(component.getVal(row,"sale_price_org")!= val && component.getVal(row,"so_qty") >= 0) {
                        gfnStatus("교환 반품처리를 위한 가격변경만 가능합니다.!");  
                    }
                    me.fnCalcAmt();
                }
            } else if( evt=="change" && col=="so_qty") {
                if(row >= 0) {
                    me.bEdit = true;
                    me.fnCalcAmt();
                }
            }
        }
        
        //paylist:결제 목록조회 이벤트처리     
        if(component==me.pageObj["paylist"]) {
            if(evt=="componentFunc") {
                if(row=="addRow") {
                    var newrow = component.addRow();
                    component.setVal(newrow,"remark","수기 등록");
                    me.bEdit = true;
                } else if(row=="delRow") {
                    me.bEdit = true;
                    component.delRow();
                    me.fnCalcAmt();
                }
            }
            if(evt=="change") {
                if (col=="cost_comcd") {
                    me.bEdit = true; 
                    component.setVal(row,"pay_tp",gfnCdNm("CARD_CD",val,"val_1"));
                }
                if(col=="cd_stat"||col=="pay_amt") {
                    me.bEdit = true;
                    me.fnCalcAmt();
                }
            }
            if(evt=="enter") {
                me.fnCalcAmt();
            }
        } 
    }
    
    //POS선택 *************************************************************************************************/
    me.fnChangePos=function() { 
		gfnGetData("POS",function(rtn){
		    if(isNull(rtn) || rtn.length==0) {
		        if(me.auth=="N") {
		            gfnAlert("사용자 매장정보 확인","매장 POS정보가 존재하지 않습니다. 다시 로그인하거나 매장마스터에서 POS정보 등록 후 진행하십시오.");
		        }
		    } else {
    		    me.pageObj.posinfo.importData(rtn); //점에 등록된 POS목록
    		    me.poslist = rtn;
                me.posinfo.dialog("open");     		    
		    }
		},"",gUserinfo.deptcd); 
    }  
    
    //전달된 POS정보로 기초정보 세팅
    me.fnSetPosinfo=function(posdata) {
        var posinfo = me.pageObj.posinfo.getRowData(posdata);
        // 팝업으로 POS번호를 받는다
        gUserinfo.pos_no = lpad(posinfo.cd,3,"0");
        gUserinfo.so_tp  = posinfo.so_tp;
        gUserinfo.cat_nm = posinfo.cat_nm;
        gUserinfo.nm     = posinfo.nm; 
        gUserinfo.apv_yn = gfnCdNm("SO_TP",gUserinfo.so_tp,"val_3"); //POS의 판매형태에 등록된 승인
        me.posinfo.dialog("close");
        me.pageObj._pageFunc.setDisp("search",true);
        me.pageObj.mst.componentTitle.html("<i class='fas fa-square'></i> 수기 매출등록(POS번호:"+gUserinfo.pos_no+")");
        me.pageObj.mst.setVal("pos_no",gUserinfo.pos_no);
        me.fnNew();
    }  
    
    //POS선택 *************************************************************************************************/
    //search:조회 
    me.fnSearch=function() {
        if( !me.pageObj["pageCond"].chkValid() ) return;
        var args = me.pageObj["pageCond"].exportData()[0];
        args.pos_no = gUserinfo.pos_no;
        if(me.auth == "Y") args.pos_no=""; //확정권한자는 모든 POS를 조회할 수 있음.
        console.log(args);
        var invar = JSON.stringify(args);
        gfnTx(appid+"."+pgmid,"search",{INVAR:invar},function(OUTVAR){
            console.log(OUTVAR);
            if(OUTVAR.rtnCd=="OK") {
                me.pageObj["list"].importData(OUTVAR.list);
                me.bEdit = false;
            } else {
                gfnAlert("조회오류",OUTVAR.rtnMsg);
            }
        });
    }
    
    //등록내역 상세조회 ********************************************************/
    me.fnSearchMst=function(so_no) {
        if( isNull(so_no) ) return;
        var args = {so_no:so_no}; 
        var invar = JSON.stringify(args);
        gfnTx(appid+"."+pgmid,"searchMst",{INVAR:invar},function(OUTVAR){
            console.log(OUTVAR);
            if(OUTVAR.rtnCd=="OK") {
                me.pageObj.mst.importData(OUTVAR.mst);
                me.pageObj.itemlist.importData(OUTVAR.itemlist);
                me.pageObj.paylist.importData(OUTVAR.paylist); 
                me.fnCalcAmt();
                me.bEdit = false;
                if(me.pageObj.mst.getVal("rcv_fileid")=="Y") {
                    gfnStatus("이미 확정되어 반영된 건입니다. 수정할 수 없습니다.");
                }
            } else {
                gfnAlert("등록내역 조회오류",OUTVAR.rtnMsg);
            }
        });
    }
    
    //상품검색 *************************************************************************************************/
    me.fnGoodsSearch=function(row) {
        var barcd = upper(me.pageObj.itemlist.getVal(row,"goods_cd")).trim()+"*"; //별을 붙여주면 9자리여도 등록 가능함 
        if(isNull(barcd)) {
            gfnStatus("비어있는 바코드 입력");
            return; 
        }
        if(isNull(me.pageObj.mst.getVal("sale_dt"))) {
            gfnStatus("판매일 미입력");
            return;
        }
        if(isNull(me.pageObj.pageCond.getVal("shopcd"))) {
            gfnStatus("판매 매장 미입력");
            return;
        }
        var args = {barcd : barcd};
        args.shopcd  = me.pageObj.pageCond.getVal("shopcd");
        args.sale_dt = me.pageObj.mst.getVal("sale_dt");
        var invar = JSON.stringify(args); 
        gfnTx(appid+"."+pgmid,"goodsSearch",{INVAR:invar},function(OUTVAR){
        console.log(OUTVAR);
            if(OUTVAR.rtnCd=="OK") {
                if(isNull(OUTVAR.list)||OUTVAR.list.length==0) {
                    gfnAlert("상품검색오류","바코드 또는 상품코드에 해당하는 상품을 검색할 수 없습니다!");
                    return;
                }
                var item = OUTVAR.list[0]; 
                me.pageObj.itemlist.setVal(row,"sale_price",item.sale_price);
                me.pageObj.itemlist.setVal(row,"sale_price_org",item.sale_price);
                me.pageObj.itemlist.setVal(row,"goods_nm",item.goods_nm); 
                me.fnCalcAmt();  
            } else {
                gfnAlert("조회오류***"+OUTVAR.rtnCd, OUTVAR.rtnMsg);
            }
        });
    }
    
    //**************************************************************************************************************/    
    //품목추가, 수량, 가격 변경에 따른 상품금액, 결제잔액 계산 
    var bCalc = false;
    me.fnCalcAmt=function() {
        if(bCalc) return;
        bCalc = true;
        var itemlist = me.pageObj.itemlist;
        var total = 0;
        for(var i=0; i < itemlist.countRow(); i++) {
            var row        = itemlist.getNodeId(i);
            var so_qty     = itemlist.getVal(row,"so_qty");
            var sale_price = itemlist.getVal(row,"sale_price"); 
            var sale_amt   = toNum( so_qty*sale_price );
            itemlist.setVal(row, "so_amt", sale_amt);
            total += sale_amt;  
        } 
        var paylist = me.pageObj.paylist;
        var pay_total = 0;
        for(var i=0; i < paylist.countRow(); i++) {
            var row         = paylist.getNodeId(i);
            var cd_stat     = paylist.getVal(row,"cd_stat");
            var pay_amt     = paylist.getVal(row,"pay_amt");
            pay_amt   = toNum( pay_amt*((cd_stat=="Y")?1:-1));
            pay_total += pay_amt;  
        } 
        var balance = total - pay_total;
        me.pageObj.mst.setVal("sale_amt",total); 
        me.pageObj.mst.setVal("pay_amt",pay_total); 
        me.pageObj.mst.setVal("balance",balance);  
        
        me.pageObj.itemlist.total("bottom");
        //me.pageObj.paylist.total("top");   
        bCalc=false;
    }  

    //**************************************************************************/
    //sonoSave: 신규 저장시 판매전표번호를 채번하여 리턴함 
    me.fnSonoSave=function(fnCallback) {
        var args = me.pageObj["mst"].exportData()[0];
		args.grpid = gUserinfo.deptcd;  //매장정보 조회 - gUserinfo.deptcd = 매장코드
		var invar = JSON.stringify(args);
		gfnTx(appid+"."+pgmid,"sonoSave",{INVAR:invar},function(OUTVAR){
            console.log(OUTVAR);
            if(OUTVAR.rtnCd=="OK") {
                var mst = OUTVAR.mst[0];
                me.pageObj.mst.setVal("so_no",mst.so_no);
                me.pageObj.mst.setVal("sale_seq",mst.sale_seq);
                me.pageObj.mst.setVal("so_nm",mst.so_nm);
                console.log(me.pageObj.mst.exportData()[0]);
                if(!isNull(fnCallback)) fnCallback();
            } else {
                gfnAlert("판매번호 채번 오류",OUTVAR.rtnMsg);
            }
        }); 
    }

    //**************************************************************************/
    //save:저장 
    me.fnSave=function(bCfm) {
        var itemlist = me.pageObj.paylist.exportData();
        for(var i=0; i < itemlist.length; i++) { 
            if(itemlist[i].sale_price != itemlist[i].sale_price_org && itemlist[i].so_qty >= 0) {
                gfnAlert("저장 상품가격정보 확인", "교환을 위한 원판매 판매가 수정시에만 판매가를 수정할 수 있습니다.");
                return false;    
            }
        }        
        if( bCfm==undefined && !me.pageObj["mst"].chkValid() ) {
            if(me.pageObj.mst.getVal("pay_amt")==0) {
                gfnConfirm("저장확인","등가 교환의 건이 맞으면 [확인]버튼을 클릭해주세요..",function(rtn) {
                    if(rtn==true) {
                        me.pageObj.mst.setVal("remark","등가교환 "+(me.pageObj.mst.getVal("remark")).replace("등가교환 ","") );
                        me.fnSave(true);
                    } else { 
                        return false ; 
                    }
                });
            }  
            return;
        }
        if( !me.pageObj["itemlist"].chkValid() ) return;
        if( bCfm==undefined && !me.pageObj["paylist"].chkValid() ) return;  
        if( isNull(me.pageObj.mst.getVal("rcv_fileid")) || me.pageObj.mst.getVal("rcv_fileid")=="Y") {
            gfnAlert("저장 상태확인", "수기등록되지 않은 건이거나 이미 확정되어 반영된 건입니다. 수정할 수 없습니다!");
            return;
        }
        if( me.pageObj.mst.getVal("balance") != 0) {
            gfnAlert("저장 금액확인", "판매액과 결제액은 동일하여야 합니다.");
            return
        }
        if( me.pageObj.itemlist.length <= 0 ) {
            gfnAlert("저장 상품확인", "저장할 상품 판매/반품 정보가 없습니다.");
            return
        }
        if( me.pageObj.paylist.length <= 0 ) {
            gfnAlert("저장 결제정보확인", "저장할 결제 승인/취소 정보가 없습니다.");
            return
        }
        var paylist = me.pageObj.paylist.exportData();
        for(var i=0; i < paylist.length; i++) { 
            if(paylist[i].pay_tp=="1" && isNull(paylist[i].cost_comcd)) {
                gfnAlert("저장 결제정보확인", "카드결제시 반품처리 및 마감정산을 위해 카드사를 입력하여 주십시오.");
                return    
            }
        }
        function _fnSave() {
            var list = []; 
            var args = me.pageObj["mst"].exportData()[0];
            args.orgcd  = gUserinfo.orgcd;
            args.shopcd = gUserinfo.deptcd;
            args.pos_no = gUserinfo.pos_no;
            args.so_tp  = gUserinfo.so_tp; 
            args.cd_stat = "D";  //임시/삭제상태로 저장
            args.itemlist = me.pageObj["itemlist"].exportData();
            args.paylist = me.pageObj["paylist"].exportData();
            console.log("_fnSave");
            console.log(args);
            var invar = JSON.stringify(args);
            gfnTx(appid+"."+pgmid,"save",{INVAR:invar},function(OUTVAR){  
                if(OUTVAR.rtnCd=="OK") {
                    gfnAlert("저장성공","수기등록 판매/반품전표를 저장하였습니다."); 
                    me.fnSearch();
                    me.fnNew();
                } else {
                    gfnAlert("조회오류",OUTVAR.rtnMsg);
                }
            });
        } 
        if(isNull(me.pageObj.mst.getVal("so_no"))) {
            //첫 저장일 경우 판매번호 다시조회
            me.fnSonoSave(_fnSave); //채번후 저장
        } else {
            _fnSave();
        }
    }

    //**************************************************************************/
    //승인 후 전표완료저장
    me.fnSaveCfm=function() {
        var itemlists = me.pageObj["itemlist"].exportData();
        for(i=0;i<itemlists.length;i++){
           itemlists[i].so_no = me.pageObj.mst.getVal("so_no");
           itemlists[i].so_seq = isNull(itemlists[i].so_seq)?(i+1):itemlists[i].so_seq;
           itemlists[i].shopcd = gUserinfo.deptcd;
           itemlists[i].sale_dt = me.pageObj.mst.getVal("sale_dt"); 
        }
        var args = me.pageObj.mst.exportData()[0]; 
        args.shopcd = gUserinfo.deptcd;
        args.list = itemlists;
        console.log(args);
        var invar = JSON.stringify(args);
        gfnTx(appid+"."+pgmid,"saveCfm",{INVAR:invar},function(OUTVAR){
            console.log(OUTVAR);
            if(OUTVAR.rtnCd=="OK") {
                gfnStatus("저장완료 - 판매전표가 등록 되었습니다."); 
                me.fnNew(); //Research( me.pageObj.mst.getVal("so_no") );
            }else{
                gfnAlert("오류",OUTVAR.rtnMsg);
            } 
        });
    }  
    
    //**************************************************************************************************************/    
    //delete:대기전표삭제 
    me.fnDelete=function(row) {
        if(me.pageObj.list.getVal(row,"cfm_yn")=="Y") {
            gfnAlert("확정된 건 삭제 불가","이미 확정처리되어 변경할 수 있습니다.");
            return;
        }
        function _fnDelete() {
            var args = {so_no: me.pageObj.list.getVal(row,"so_no")};
            console.log("fnDelete");
            console.log(args);
            var invar = JSON.stringify(args);
            gfnTx(appid+"."+pgmid,"delete",{INVAR:invar},function(OUTVAR){
                console.log(OUTVAR);
                if(OUTVAR.rtnCd=="OK") {
                    gfnStatus("판매/반품 전표가 삭제되었습니다.");
                    me.fnSearch();
                    me.fnNew();
                } else {
                    gfnAlert("조회오류",OUTVAR.rtnMsg);
                }
            });
        }
        gfnConfirm("수기등록 판매/반품전표 삭제","선택하신 판매/반품 전표를 삭제하시겠습니까?",function(rtn){
           if(rtn) _fnDelete(); 
        });
    } 
    
    //**************************************************************************/
    //신규
    me.fnNew=function() {
        if(isNull(gUserinfo.pos_no)) {
            gfnStatus("POS선택 확인 - 판매를 등록하려는 POS정보를 먼저 선택하세요!");  
        	me.fnChangePos();
            return;
        }        
        function _fnNew() {
            //세션정보로 부터 판매기본정보 조회 
            me.pageObj.mst.reset();
            me.pageObj.mst.setVal("pos_no",gUserinfo.pos_no);
            me.pageObj.mst.setVal("so_tp",gUserinfo.so_tp);
            me.pageObj.mst.setVal("cat_nm",gUserinfo.cat_nm);
            me.pageObj.mst.setVal("nm", gUserinfo.nm);        
            me.pageObj.mst.setVal("so_usid", gUserinfo.userid+" "+gUserinfo.usernm);
            me.pageObj["itemlist"].reset();
            me.pageObj["paylist"].reset(); 
            me.fnCalcAmt(); 
    		var args = me.pageObj["mst"].exportData()[0]
    		args.grpid = gUserinfo.deptcd;  //매장정보 조회 - gUserinfo.deptcd = 매장코드
    		console.log(args);
    		var invar = JSON.stringify(args);
    		gfnTx(appid+".registerSO","sonoSearch",{INVAR:invar},function(OUTVAR){  //임시 판매번호 조회: 판매등록화면 기능 사용 
                console.log(OUTVAR);
                if(OUTVAR.rtnCd=="OK") {
                    bEdit = false;
                    me.pageObj["mst"].importData(OUTVAR.mst,"C"); 
                    me.pageObj.mst.setVal("rcv_fileid","N");
                    me.pageObj.mst.setVal("so_no",""); //SO_NO를 보여줄 필요 없으므로 임시조회값을 닦아 놓고 저장할때 채번/저장함 
                    var row = me.pageObj.paylist.addRow(); 
                    me.pageObj.paylist.setVal(row,"remark","수기 등록");
                    me.pageObj.itemlist.addRow();
                } else {
                    gfnAlert("조회오류",OUTVAR.rtnMsg);
                }
            });   
        }
        if(bEdit) {
            gfnConfirm("신규확인","작업중인 내용이 있습니다. 신규등록 작업을 진행하시겠습니까?",
                function(rtn) {
                    if(rtn) {
                        _fnNew();
                    }
            });
        } else {
            _fnNew();
        }
    }
 
    //**************************************************************************/
    //본사담당자 임의등록 건 확정
    me.fnCfm=function() {
        var list = me.pageObj.list.exportData();
        var cfmlist = [];
        for(var i=0; i < list.length; i++) {
            if(list[i].cfm_chk=="Y") {
                if(list[i].chk_yn=="Y") {
                    gfnStatus("확정하려는 건 중 이미 확정된 건이 있어 확정대상에서 제외되었습니다:"+(i+1)+"번째줄<br>"+list[i].so_nm);
                } else {
                    cfmlist.push(list[i]);
                }
            }
        } 
        if(cfmlist.length <= 0) {
            gfnAlert("임의등록 확정확인","확정처리할 임의등록 건이 없습니다.");
            return
        }
        function _fnCfm() { 
    		var args = {}; args.cfmlist = cfmlist;
    		console.log(args);
    		var invar = JSON.stringify(args);
    		gfnTx(appid+"."+pgmid,"cfm",{INVAR:invar},function(OUTVAR){   
                console.log(OUTVAR);
                if(OUTVAR.rtnCd=="OK") {
                    gfnAlert("임의등록 확정 성공","확정 저장하였습니다.!")
                    me.fnSearch(); 
                } else {
                    gfnAlert("확정오류",OUTVAR.rtnMsg);
                }
            });   
        } 
        gfnConfirm("임의등록 확정처리 확인","확정작업을 진행하시겠습니까?",
            function(rtn) {  if(rtn) _fnCfm(); }
        );
    }
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    


/*-- SCRIPT autogen ---------------------------------------------------- */        
if(typeof(me.fnInit)=='function') me.fnInit();
});

</script>