<style>[pgmid='plasDocReg'].framepage .componentFunc .gButton { 
    height: 2.5em;
    padding: 0.25em 0.5em;  
}

[pgmid='plasDocReg'].framepage .btnXls, [pgmid='plasDocReg'].framepage .btnPdf  { 
    display: none;  
}

[pgmid='plasDocReg'] .mobile  {
    max-width: 250px;
} 

[pgmid='plasDocReg'] .flexRow2 {
    display:flex;
    flex-direction:row;
    height:100%;
    column-gap: 1em;
}

[pgmid='plasDocReg'] #apv {
    display:flex;
    flex-direction:column;
    height:100%; 
}
[pgmid='plasDocReg'] #apv > * {
    flex: 1 1 50%;
}

@media (max-width: 480px)
{ 
    [pgmid='plasDocReg'] .mobile  {
        max-width: 100%;
    }   
    [pgmid='plasDocReg'] .flexRow2 {
        display:block; 
    }  
    [pgmid='plasDocReg'] .flexColumn {
        width: 100% !important;
        min-height: 25em;
        max-height: 50em;
    }
    [pgmid='plasDocReg'] .expand.gButton {
        display: none;
    } 
    [pgmid='plasDocReg'] #apv {
        height: 100em;
    } 
    [pgmid='plasDocReg'] #apv .flexRow2 > *{
        height: 25em;
    }
} 

[pgmid='plasDocReg'] .row  {
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;
    width: 100%;
} 
[pgmid='plasDocReg'] .row > *  {
    flex: 1 1 auto;
} 

[pgmid='plasDocReg'] .side > div:first-child {
    flex: 1 1 auto !important; 
}

[pgmid='plasDocReg'] .side > div:last-child {
    min-height: unset;
}

[pgmid='plasDocReg'] .componentBody .ag-root-wrapper-body { 
    min-height: 10em;
}
 
[pgmid='plasDocReg'] #doc_template .componentBody, [pgmid='plasDocReg'] #doc_template .componentBody .aweCol {
    font-size: 11px;
}

[pgmid='plasDocReg'] [colgrp='전결'] label {
    flex: 0 0 3em;
    min-width: 3em;
}
[pgmid='plasDocReg'] [colgrp='합의'] label {
    flex: 0 0 3em;
    min-width: 3em;
}
[pgmid='plasDocReg'] [colgrp='보고'] label {
    flex: 0 0 3em;
    min-width: 3em;
}

[pgmid='plasDocReg'] #tabs {
    z-index: 1;
}

[pgmid='plasDocReg'] #tabs2 {
    position: relative;
    background-color: slategrey;
    padding: 12px 5px 0 5px;
}

[pgmid='plasDocReg'] .expand {
    position: absolute;
    top: 5px;
    right: 5px; 
}

[pgmid='plasDocReg'] .float {
    position: absolute;
    min-width: 90vw;
    max-width: calc(100% - 5vh);
    min-height: 75vh;
    max-height: calc(100% - 5vw);
    height:25em !important;
    top: 5vh;
    left: 5vw;
    z-index: 1;
    background-color: slategray;
    padding: 1em;
    box-shadow: 0 0 1em 1em #3a3a3aa3;
}
</style>

<!-- HTML autogen start ---------------------------------------------- --> 
<div class="pageTop"></div>
<div class="pageContent">
    <ul id="tabs0">
        <li refid="doc_template">문서 템플릿</li>
        <li refid="entry">문서 작성</li> 
        <li refid="apv">결재선</li> 
        <li refid="doc_plas">회계분개</li> 
    </ul>
    <div id="doc_template" style="background-color: #efefef40; border: 1px solid #eaeaea;max-width:600px"></div>
    <div id="entry" class="flexRow2">
        <div id='mst' class="mobile"></div>
        <div class="doc_body flexColumn" style="flex: 0 0 auto; width: 190mm;">
            <ul id="tabs">
                <li refid="doc_body">본문</li>
                <li refid="doc_data">원천DATA</li> 
            </ul>
            <div id="doc_body" class="flexColumn">
                <textarea id="mytextarea" class="boardContent" name="mytextarea" placeholder="내용을 입력하세요"></textarea> 
            </div>    
            <div id="doc_data" class="flexColumn">
                <ul id="tabs2">
                    <li refid="doc_data_src">거래내역</li>
                    <li refid="doc_data_pay">지급조건</li> 
                    <li refid="doc_data_pjt">금액배부</li>  
                    <button class="expand gButton"><i class="fas fa-share-square"></i> 확장</button>
                </ul> 
                <div id="doc_data_src"></div>
                <div id="doc_data_pay"></div>
                <div id="doc_data_pjt"></div>
            </div>
        </div> 
        <div style="flex: 1 1;" class="flexColumn">
            <div id='attach' style="flex:1 1 50%"></div>   
            <div id='ref_doc' style="flex:1 1 50%"></div>    
        </div>
    </div>
    <div id="apv">
        <div class="flexRow2">
            <div id='rcv' style="max-width:400px"></div>            
            <div id='rcv_cc' style="max-width:400px"></div>    
        </div> 
        <div id="doc_budget"></div>
    </div>          
    <div id="doc_plas" class="flexColumn" >
        <div id="doc_plas_frm"></div>
        <div id="doc_plas_chit" class="flexColumn"></div> 
    </div> 
</div>
<!-- HTML autogen end ---------------------------------------------- -->
<script>
/*-- SCRIPT autogen start ---------------------------------------------- */        
$(function() {
    var appid = "plas";
    var pgmid = "plasDocReg"; 
    var page = $("*[pgmid='"+pgmid+"'].framepage").last();
    var pageid = page.attr("id"); 
    var me = {}
    var dataSet = {};
    var dataDef = {};
    var pageObj = {};
    var bEdit = false;
    me.fnInit = function() {
        gfn[pageid] = me; 
        me.appid    = appid;
        me.pgmid    = pgmid;
        me.pageid   = pageid;
        me.page     = page; 
        me.dataSet = dataSet;
        me.dataDef = dataDef;
        me.pageObj = pageObj;
        me.bEdit = bEdit;
me.dataDef["_pgm"]={"ver":3.3,"upd_dt":"2022-10-11 14:40:31","remark":"","pgmid":"plasDocReg","proc_mst_id":"","pgm_stat":"Y","sort_seq":201,"app_pgmid":"plas","shortcut":"","reg_dt":"2022-10-11 14:40:31","reg_usid":"jjr","pgm_nm":"전자결재문서(신규)","upd_usid":"jjr","pgm_tp":"TX","pgm_grp_nm":"전자결재","proc_mst_nm":"","app_pgm_nm":"경영관리","":"트랜젝션(화면)","crud":""};
me.dataDef["_pgm_func"]=[{"func_icon":"fas fa-file","reg_dt":"2022-10-11 14:40:31","reg_usid":"","func_nm":"초기화","upd_usid":"","upd_dt":"2022-10-11 14:40:31","func_tp":"EH","remark":null,"pgmid":"plasDocReg","sort_seq":"2","funcid":"popDocTemplate","content":"문서 초기화","crud":"R","id":"0"},{"func_icon":"fas fa-save","reg_dt":"2022-10-11 14:40:31","reg_usid":"","func_nm":"저장","upd_usid":"","upd_dt":"2022-10-11 14:40:31","func_tp":"DB_W","remark":null,"pgmid":"plasDocReg","sort_seq":"3","funcid":"save","content":"신규 작성문서 저장","crud":"R","id":"1"},{"func_icon":"fas fa-close","reg_dt":"2022-10-11 14:40:31","reg_usid":"","func_nm":"닫기","upd_usid":"","upd_dt":"2022-10-11 14:40:31","func_tp":"EH","remark":null,"pgmid":"plasDocReg","sort_seq":"4","funcid":"close","content":"문서닫기","crud":"R","id":"2"}];
me.dataDef["_pgm_data"] = {};
me.dataDef["_pgm_data"]["mst"]={"sort_seq":"1","data_id":"mst","data_nm":"신규 문서작성","data_icon":null,"component_pgmid":"aweForm","component_option":null,"inout_tp":null,"content":[{"sort_seq":1,"section":null,"section_icon":null,"colgrp":null,"colid":"doc_template_nm","colnm":"문서종류","dtype":"text","etype":"txt","attr":"pk pop","defval":null,"w":"10","h":null,"refcd":"mypop","option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"0"},{"sort_seq":2,"section":null,"section_icon":null,"colgrp":null,"colid":"doc_dt","colnm":"문서일자","dtype":"ymd","etype":"txt","attr":"pk ymd","defval":"date(\"today\")","w":"10","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"1"},{"sort_seq":3,"section":null,"section_icon":null,"colgrp":null,"colid":"doc_no","colnm":"문서번호","dtype":"text","etype":"raw","attr":"pk disabled","defval":"TBD","w":"15","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"2"},{"sort_seq":4,"section":null,"section_icon":null,"colgrp":null,"colid":"reg_co","colnm":"회사","dtype":"text","etype":"raw","attr":"disabled","defval":null,"w":"10","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"3"},{"sort_seq":5,"section":null,"section_icon":null,"colgrp":null,"colid":"reg_dept","colnm":"부서","dtype":"text","etype":"raw","attr":"disabled","defval":null,"w":"10","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"4"},{"sort_seq":6,"section":null,"section_icon":null,"colgrp":null,"colid":"reg_emp_info","colnm":"작성자","dtype":"text","etype":"txt","attr":"keycol pop ","defval":null,"w":"15","h":null,"refcd":"mypop","option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"5"},{"sort_seq":7,"section":null,"section_icon":null,"colgrp":null,"colid":"title","colnm":"문서명","dtype":"text","etype":"tarea","attr":"keycol","defval":null,"w":"35","h":"5","refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"6"},{"sort_seq":8,"section":null,"section_icon":null,"colgrp":null,"colid":"tag","colnm":"키워드","dtype":"text","etype":"txt","attr":null,"defval":null,"w":"35","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"7"},{"sort_seq":9,"section":null,"section_icon":null,"colgrp":null,"colid":"doc_stat","colnm":"문서상태","dtype":"text","etype":"sel","attr":"disabled","defval":null,"w":"10","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"8"},{"sort_seq":10,"section":null,"section_icon":null,"colgrp":null,"colid":"content","colnm":"문서내용","dtype":"text","etype":"none","attr":"hidden","defval":null,"w":"0","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"9"}]};
me.dataDef["_pgm_data"]["rcv"]={"sort_seq":"2","data_id":"rcv","data_nm":"결재/합의선","data_icon":null,"component_pgmid":"agGrid","component_option":{"gridOpt":"rn","gridOptions":{"defaultColDef":{"sortable":false,"filter":false,"stopEditingWhenCellsLoseFocus":true}},"func":[{"funcid":"addAuto","func_nm":"자동","func_icon":"fas fa-plus"},{"funcid":"addRow","func_nm":"추가","func_icon":"fas fa-plus"},{"funcid":"moveUp","func_nm":"순서","func_icon":"fas fa-sort-up"},{"funcid":"moveDown","func_nm":"순서","func_icon":"fas fa-sort-down"}]},"inout_tp":null,"content":[{"sort_seq":1,"section":null,"section_icon":null,"colgrp":null,"colid":"rcv_tp","colnm":"구분","dtype":"text","etype":"sel","attr":"keycol","defval":null,"w":"5","h":null,"refcd":"RCV_TP","option":"sel:rcv_tp::nm::전자결재:결재선","len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"0"},{"sort_seq":2,"section":null,"section_icon":null,"colgrp":null,"colid":"rcv_dept_nm","colnm":"부서","dtype":"text","etype":"raw","attr":"readonly","defval":null,"w":"11","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"1"},{"sort_seq":3,"section":null,"section_icon":null,"colgrp":null,"colid":"rcv_hrsp_nm","colnm":"직무","dtype":"text","etype":"raw","attr":"readonly","defval":null,"w":"6","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"2"},{"sort_seq":4,"section":null,"section_icon":null,"colgrp":null,"colid":"rcv_emp_nm","colnm":"성명","dtype":"text","etype":"txt","attr":"keycol pop center","defval":null,"w":"6","h":null,"refcd":"mypop","option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"3"},{"sort_seq":5,"section":null,"section_icon":null,"colgrp":null,"colid":"rcv_hcls_nm","colnm":"직급","dtype":"text","etype":"raw","attr":"readonly","defval":null,"w":"6","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"4"},{"sort_seq":6,"section":null,"section_icon":null,"colgrp":null,"colid":"btnDelete","colnm":"삭제","dtype":"text","etype":"btn","attr":"center fixR","defval":null,"w":"3","h":null,"refcd":null,"option":":fas fa-trash","len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"5"},{"sort_seq":7,"section":null,"section_icon":null,"colgrp":null,"colid":"rcv_usid","colnm":"사용자ID","dtype":"text","etype":"none","attr":"hidden","defval":null,"w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"6"},{"sort_seq":8,"section":null,"section_icon":null,"colgrp":null,"colid":"rcv_emp_cd","colnm":"사번","dtype":"text","etype":"none","attr":"hidden","defval":null,"w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"7"}]};
me.dataDef["_pgm_data"]["rcv_cc"]={"sort_seq":"3","data_id":"rcv_cc","data_nm":"참조선","data_icon":null,"component_pgmid":"agGrid","component_option":{"gridOpt":"rn","gridOptions":{"defaultColDef":{"sortable":false,"filter":false}},"func":[{"funcid":"addRow","func_nm":"추가","func_icon":"fas fa-plus"},{"funcid":"moveUp","func_nm":"순서","func_icon":"fas fa-sort-up"},{"funcid":"moveDown","func_nm":"순서","func_icon":"fas fa-sort-down"}]},"inout_tp":null,"content":[{"sort_seq":1,"section":null,"section_icon":null,"colgrp":null,"colid":"rcv_tp","colnm":"구분","dtype":"text","etype":"sel","attr":"keycol","defval":null,"w":"6","h":null,"refcd":"RCV_TP","option":"sel:rcv_tp::nm::전자결재:참조","len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"0"},{"sort_seq":2,"section":null,"section_icon":null,"colgrp":null,"colid":"rcv_dept_nm","colnm":"부서","dtype":"text","etype":"raw","attr":"readonly","defval":null,"w":"10","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"1"},{"sort_seq":3,"section":null,"section_icon":null,"colgrp":null,"colid":"rcv_hrsp_nm","colnm":"직무","dtype":"text","etype":"raw","attr":"readonly","defval":null,"w":"6","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"2"},{"sort_seq":4,"section":null,"section_icon":null,"colgrp":null,"colid":"rcv_emp_nm","colnm":"성명","dtype":"text","etype":"txt","attr":"keycol pop center","defval":null,"w":"6","h":null,"refcd":"mypop","option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"3"},{"sort_seq":5,"section":null,"section_icon":null,"colgrp":null,"colid":"rcv_hcls_nm","colnm":"직급","dtype":"text","etype":"raw","attr":"readonly","defval":null,"w":"6","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"4"},{"sort_seq":6,"section":null,"section_icon":null,"colgrp":null,"colid":"btnDelete","colnm":"삭제","dtype":"text","etype":"btn","attr":"center fixR","defval":null,"w":"3","h":null,"refcd":null,"option":":fas fa-trash","len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"5"},{"sort_seq":7,"section":null,"section_icon":null,"colgrp":null,"colid":"rcv_usid","colnm":"사용자ID","dtype":"text","etype":"none","attr":"hidden","defval":null,"w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"6"},{"sort_seq":8,"section":null,"section_icon":null,"colgrp":null,"colid":"rcv_emp_cd","colnm":"사번","dtype":"text","etype":"none","attr":"hidden","defval":null,"w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"7"}]};
me.dataDef["_pgm_data"]["attach"]={"sort_seq":"4","data_id":"attach","data_nm":"첨부파일","data_icon":null,"component_pgmid":"agGrid","component_option":{"gridOpt":"rn","gridOptions":{"defaultColDef":{"sortable":false,"filter":false}},"remark":"내용(파일명)을 수정할 수 있습니다.","func":[{"funcid":"attachFile","func_nm":"파일추가","func_icon":"fas fa-folder-open"}]},"inout_tp":null,"content":[{"sort_seq":1,"section":null,"section_icon":null,"colgrp":null,"colid":"content","colnm":"내용","dtype":"text","etype":"txt","attr":"keycol","defval":null,"w":"15","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"0"},{"sort_seq":2,"section":null,"section_icon":null,"colgrp":null,"colid":"content_info","colnm":"정보","dtype":"text","etype":"raw","attr":"disabled","defval":null,"w":"10","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"1"},{"sort_seq":3,"section":null,"section_icon":null,"colgrp":null,"colid":"ref_id","colnm":"첨부ID","dtype":"text","etype":"none","attr":"hidden","defval":null,"w":"0","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"2"},{"sort_seq":4,"section":null,"section_icon":null,"colgrp":null,"colid":"btn_show","colnm":"보기","dtype":"text","etype":"btn","attr":"center fixR","defval":null,"w":"4","h":null,"refcd":null,"option":":fas fa-search","len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"3"}]};
me.dataDef["_pgm_data"]["ref_doc"]={"sort_seq":"5","data_id":"ref_doc","data_nm":"참조문서","data_icon":null,"component_pgmid":"agGrid","component_option":{"gridOpt":"rn","gridOptions":{"defaultColDef":{"sortable":false,"filter":false}},"func":[{"funcid":"attachDoc","func_nm":"문서추가","func_icon":"fas fa-file-alt"}]},"inout_tp":null,"content":[{"sort_seq":1,"section":null,"section_icon":null,"colgrp":null,"colid":"doc_no","colnm":"문서번호","dtype":"text","etype":"raw","attr":null,"defval":null,"w":"10","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"0"},{"sort_seq":2,"section":null,"section_icon":null,"colgrp":null,"colid":"title","colnm":"문서명","dtype":"text","etype":"raw","attr":null,"defval":null,"w":"15","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"1"},{"sort_seq":3,"section":null,"section_icon":null,"colgrp":null,"colid":"content","colnm":"참조문서ID","dtype":"text","etype":"none","attr":"hidden","defval":null,"w":"0","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"2"},{"sort_seq":4,"section":null,"section_icon":null,"colgrp":null,"colid":"btnShow","colnm":"보기","dtype":"text","etype":"btn","attr":"center fixR","defval":null,"w":"4","h":null,"refcd":null,"option":":fas fa-search","len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"3"},{"sort_seq":5,"section":null,"section_icon":null,"colgrp":null,"colid":"btnDelete","colnm":"삭제","dtype":"text","etype":"btn","attr":"center fixR","defval":null,"w":"4","h":null,"refcd":null,"option":":fas fa-trash","len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"4"}]};
me.dataDef["_pgm_data"]["doc_template"]={"sort_seq":"6","data_id":"doc_template","data_nm":"문서 템플릿(전결규정)","data_icon":"fas fa-book-open","component_pgmid":"aweForm","component_option":null,"inout_tp":null,"content":[{"sort_seq":1,"section":null,"section_icon":null,"colgrp":null,"colid":"cat","colnm":"문서분류","dtype":"text","etype":"raw","attr":"readonly","defval":null,"w":"30","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"0"},{"sort_seq":2,"section":null,"section_icon":null,"colgrp":"템플릿","colid":"doc_template_id","colnm":"템플릿ID","dtype":"text","etype":"raw","attr":"readonly","defval":null,"w":"5","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"1"},{"sort_seq":3,"section":null,"section_icon":null,"colgrp":"템플릿","colid":"title","colnm":"템플릿명","dtype":"text","etype":"raw","attr":"readonly","defval":null,"w":"25","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"2"},{"sort_seq":4,"section":null,"section_icon":null,"colgrp":null,"colid":"remark","colnm":"적요","dtype":"text","etype":"raw","attr":"readonly","defval":null,"w":"50","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"3"},{"sort_seq":5,"section":"작성부서(최상위)","section_icon":null,"colgrp":"부서1~4","colid":"div_cd1","colnm":"부서1","dtype":"text","etype":"raw","attr":"readonly","defval":null,"w":"10","h":null,"refcd":"mypop","option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"4"},{"sort_seq":6,"section":"작성부서(최상위)","section_icon":null,"colgrp":"부서1~4","colid":"div_cd2","colnm":"부서2","dtype":"text","etype":"raw","attr":"readonly","defval":null,"w":"10","h":null,"refcd":"mypop","option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"5"},{"sort_seq":7,"section":"작성부서(최상위)","section_icon":null,"colgrp":"부서1~4","colid":"div_cd3","colnm":"부서3","dtype":"text","etype":"raw","attr":"readonly","defval":null,"w":"10","h":null,"refcd":"mypop","option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"6"},{"sort_seq":8,"section":"작성부서(최상위)","section_icon":null,"colgrp":"부서1~4","colid":"div_cd4","colnm":"부서4","dtype":"text","etype":"raw","attr":"readonly","defval":null,"w":"10","h":null,"refcd":"mypop","option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"7"},{"sort_seq":9,"section":"결재선Variant 및 금액점검 여부","section_icon":null,"colgrp":null,"colid":"amt_tp","colnm":"Variant","dtype":"text","etype":"sel","attr":"readonly","defval":null,"w":"15","h":null,"refcd":"AMT_TP","option":"sel:amt_tp::nm","len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"8"},{"sort_seq":10,"section":"결재선Variant 및 금액점검 여부","section_icon":null,"colgrp":null,"colid":"budget_tp","colnm":"금액점검","dtype":"text","etype":"sel","attr":"readonly","defval":null,"w":"10","h":null,"refcd":"BUDGET_TP","option":"sel:budget_tp::nm","len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"9"},{"sort_seq":11,"section":"결재선Variant 및 금액점검 여부","section_icon":null,"colgrp":null,"colid":"exec_yn","colnm":"집행집계","dtype":"text","etype":"raw","attr":"readonly","defval":null,"w":"10","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":"예산점검을 위해 이 품의에 등록된 금액은 승인후 집행금액으로 집계됩니다.","crud":"C","id":"10"},{"sort_seq":12,"section":"사업부결재선(전결권자, 필수합의부서)","section_icon":null,"colgrp":"구분1","colid":"budget_in","colnm":"예산범위내","dtype":"text","etype":"raw","attr":"readonly","defval":"예산범위내","w":"2","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"11"},{"sort_seq":13,"section":"사업부결재선(전결권자, 필수합의부서)","section_icon":null,"colgrp":"구분1","colid":"amt_from","colnm":"이상","dtype":"num","etype":"txt","attr":"readonly","defval":"1","w":"3","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"12"},{"sort_seq":14,"section":"사업부결재선(전결권자, 필수합의부서)","section_icon":null,"colgrp":"구분1","colid":"amt_to","colnm":"이하","dtype":"num","etype":"txt","attr":"readonly","defval":null,"w":"3","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"13"},{"sort_seq":15,"section":"사업부결재선(전결권자, 필수합의부서)","section_icon":null,"colgrp":null,"colid":"ap_line","colnm":"전결","dtype":"text","etype":"sel","attr":"readonly","defval":null,"w":"3","h":null,"refcd":"AP_LINE","option":"sel:ap_line::nm","len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"14"},{"sort_seq":16,"section":"사업부결재선(전결권자, 필수합의부서)","section_icon":null,"colgrp":null,"colid":"rpt_line","colnm":"보고","dtype":"text","etype":"sel","attr":"readonly","defval":null,"w":"3","h":null,"refcd":"AP_LINE","option":"sel:rpt_line::nm","len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"15"},{"sort_seq":17,"section":"사업부결재선(전결권자, 필수합의부서)","section_icon":null,"colgrp":"합의","colid":"co_lines","colnm":"부서","dtype":"text","etype":"txt","attr":"readonly","defval":null,"w":"15","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"16"},{"sort_seq":18,"section":"사업부결재선(전결권자, 필수합의부서)","section_icon":null,"colgrp":"구분2","colid":"budget_out","colnm":"예산범위초과","dtype":"text","etype":"raw","attr":"readonly","defval":"예산범위초과","w":"2","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"17"},{"sort_seq":19,"section":"사업부결재선(전결권자, 필수합의부서)","section_icon":null,"colgrp":"구분2","colid":"amt_from_1","colnm":"이상","dtype":"num","etype":"txt","attr":"readonly","defval":null,"w":"3","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"18"},{"sort_seq":20,"section":"사업부결재선(전결권자, 필수합의부서)","section_icon":null,"colgrp":"구분2","colid":"amt_to_1","colnm":"이하","dtype":"num","etype":"txt","attr":"readonly","defval":null,"w":"3","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"19"},{"sort_seq":21,"section":"사업부결재선(전결권자, 필수합의부서)","section_icon":null,"colgrp":null,"colid":"ap_line_1","colnm":"전결","dtype":"text","etype":"sel","attr":"readonly","defval":null,"w":"3","h":null,"refcd":"AP_LINE","option":"sel:ap_line_1::nm","len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"20"},{"sort_seq":22,"section":"사업부결재선(전결권자, 필수합의부서)","section_icon":null,"colgrp":null,"colid":"rpt_line_1","colnm":"보고","dtype":"text","etype":"sel","attr":"readonly","defval":null,"w":"3","h":null,"refcd":"AP_LINE","option":"sel:rpt_line_1::nm","len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"21"},{"sort_seq":23,"section":"사업부결재선(전결권자, 필수합의부서)","section_icon":null,"colgrp":"합의","colid":"co_lines_1","colnm":"부서","dtype":"text","etype":"txt","attr":"readonly","defval":null,"w":"15","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"22"},{"sort_seq":24,"section":"사업부결재선(전결권자, 필수합의부서)","section_icon":null,"colgrp":"구분3","colid":"amt_from_2","colnm":"이상","dtype":"num","etype":"txt","attr":"readonly","defval":null,"w":"4","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"23"},{"sort_seq":25,"section":"사업부결재선(전결권자, 필수합의부서)","section_icon":null,"colgrp":"구분3","colid":"amt_to_2","colnm":"이하","dtype":"num","etype":"txt","attr":"readonly","defval":null,"w":"4","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"24"},{"sort_seq":26,"section":"사업부결재선(전결권자, 필수합의부서)","section_icon":null,"colgrp":null,"colid":"ap_line_2","colnm":"전결","dtype":"text","etype":"sel","attr":"readonly","defval":null,"w":"3","h":null,"refcd":"AP_LINE","option":"sel:ap_line_2::nm","len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"25"},{"sort_seq":27,"section":"사업부결재선(전결권자, 필수합의부서)","section_icon":null,"colgrp":null,"colid":"rpt_line_2","colnm":"보고","dtype":"text","etype":"sel","attr":"readonly","defval":null,"w":"3","h":null,"refcd":"AP_LINE","option":"sel:rpt_line_2::nm","len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"26"},{"sort_seq":28,"section":"사업부결재선(전결권자, 필수합의부서)","section_icon":null,"colgrp":"합의","colid":"co_lines_2","colnm":"부서","dtype":"text","etype":"txt","attr":"readonly","defval":null,"w":"15","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"27"},{"sort_seq":29,"section":"사업부결재선(전결권자, 필수합의부서)","section_icon":null,"colgrp":"구분4","colid":"amt_from_3","colnm":"이상","dtype":"num","etype":"txt","attr":"readonly","defval":null,"w":"4","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"28"},{"sort_seq":30,"section":"사업부결재선(전결권자, 필수합의부서)","section_icon":null,"colgrp":"구분4","colid":"amt_to_3","colnm":"이하","dtype":"num","etype":"txt","attr":"readonly","defval":null,"w":"4","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"29"},{"sort_seq":31,"section":"사업부결재선(전결권자, 필수합의부서)","section_icon":null,"colgrp":null,"colid":"ap_line_3","colnm":"전결","dtype":"text","etype":"sel","attr":"readonly","defval":null,"w":"3","h":null,"refcd":"AP_LINE","option":"sel:ap_line_3::nm","len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"30"},{"sort_seq":32,"section":"사업부결재선(전결권자, 필수합의부서)","section_icon":null,"colgrp":null,"colid":"rpt_line_3","colnm":"보고","dtype":"text","etype":"sel","attr":"readonly","defval":null,"w":"3","h":null,"refcd":"AP_LINE","option":"sel:rpt_line_4::nm","len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"31"},{"sort_seq":33,"section":"사업부결재선(전결권자, 필수합의부서)","section_icon":null,"colgrp":"합의","colid":"co_lines_3","colnm":"부서","dtype":"text","etype":"txt","attr":"readonly","defval":null,"w":"15","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"32"},{"sort_seq":34,"section":"수신부서 또는 필수참조부서","section_icon":null,"colgrp":null,"colid":"cc_line1","colnm":"부서1","dtype":"text","etype":"raw","attr":"nm","defval":null,"w":"8","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"33"},{"sort_seq":35,"section":"수신부서 또는 필수참조부서","section_icon":null,"colgrp":null,"colid":"cc_line2","colnm":"부서2","dtype":"text","etype":"raw","attr":"nm","defval":null,"w":"8","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"34"},{"sort_seq":36,"section":"수신부서 또는 필수참조부서","section_icon":null,"colgrp":null,"colid":"cc_line3","colnm":"부서3","dtype":"text","etype":"raw","attr":"nm","defval":null,"w":"8","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"35"},{"sort_seq":37,"section":"수신부서 또는 필수참조부서","section_icon":null,"colgrp":null,"colid":"cc_line4","colnm":"부서4","dtype":"text","etype":"raw","attr":"nm","defval":null,"w":"8","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"36"},{"sort_seq":38,"section":null,"section_icon":null,"colgrp":null,"colid":"attach","colnm":"첨부파일","dtype":"text","etype":"raw","attr":"readonly","defval":null,"w":"45","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"37"},{"sort_seq":39,"section":null,"section_icon":null,"colgrp":null,"colid":"ref_doc","colnm":"참조문서","dtype":"text","etype":"raw","attr":"readonly","defval":null,"w":"45","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"38"},{"sort_seq":40,"section":"원천DATA","section_icon":null,"colgrp":null,"colid":"src_desc","colnm":"거래내역*","dtype":"text","etype":"tarea","attr":"readonly","defval":null,"w":"10","h":"8","refcd":null,"option":"편집:fas fa-edit","len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"39"},{"sort_seq":41,"section":"원천DATA","section_icon":null,"colgrp":null,"colid":"pay_desc","colnm":"지급조건*","dtype":"text","etype":"tarea","attr":"readonly","defval":null,"w":"10","h":"8","refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"40"},{"sort_seq":42,"section":"원천DATA","section_icon":null,"colgrp":null,"colid":"pjt_desc","colnm":"금액배부*","dtype":"text","etype":"tarea","attr":"readonly","defval":null,"w":"10","h":"8","refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"41"},{"sort_seq":43,"section":"PLAS","section_icon":null,"colgrp":"재무결재선","colid":"fi_lines","colnm":"담당","dtype":"text","etype":"raw","attr":"readonly","defval":null,"w":"10","h":null,"refcd":"mypop","option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"42"},{"sort_seq":44,"section":"PLAS","section_icon":null,"colgrp":null,"colid":"drcr_acct","colnm":"분개유형","dtype":"text","etype":"tarea","attr":"readonly","defval":null,"w":"15","h":"8","refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"43"},{"sort_seq":45,"section":"PLAS","section_icon":null,"colgrp":null,"colid":"evidence_tp","colnm":"증빙관리","dtype":"text","etype":"sel","attr":"readonly","defval":null,"w":"15","h":null,"refcd":"EVIDENCE_TP","option":"sel:evidence_tp::nm","len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"44"},{"sort_seq":46,"section":"PLAS","section_icon":null,"colgrp":null,"colid":"auto_chit_tp","colnm":"간소화*","dtype":"text","etype":"txt","attr":"readonly","defval":null,"w":"15","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"45"}]};
me.dataDef["_pgm_data"]["doc_data_src"]={"sort_seq":"7","data_id":"doc_data_src","data_nm":"거래내역","data_icon":null,"component_pgmid":"agGrid","component_option":{"gridOpt":"rn chk bForcePaste","gridOptions":{"singleClickEdit":false},"remark":"추가줄수:","content":[{"colid":"rowCnt","colnm":"줄수","dtype":"num","etype":"txt","defval":1}],"func":[{"funcid":"addRow","func_nm":"줄추가","func_icon":"fas fa-plus"},{"funcid":"delRow","func_nm":"줄삭제","func_icon":"fas fa-minus"},{"funcid":"addTbl","func_nm":"표삽입","func_icon":"fas fa-table"}]},"inout_tp":null,"content":[{"sort_seq":1,"section":null,"section_icon":null,"colgrp":null,"colid":"in_dt","colnm":"일자","dtype":"ymd","etype":"txt","attr":"ymd ","defval":null,"w":"8","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"0"},{"sort_seq":2,"section":null,"section_icon":null,"colgrp":null,"colid":"dept_cd","colnm":"부서코드","dtype":"text","etype":"txt","attr":"pop keycol","defval":null,"w":"6","h":null,"refcd":"mypop","option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"1"},{"sort_seq":3,"section":null,"section_icon":null,"colgrp":null,"colid":"dept_nm","colnm":"사용부서","dtype":"text","etype":"txt","attr":null,"defval":null,"w":"10","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"2"},{"sort_seq":4,"section":null,"section_icon":null,"colgrp":null,"colid":"pjt_cd","colnm":"PJT코드","dtype":"text","etype":"txt","attr":"pop keycol","defval":null,"w":"6","h":null,"refcd":"mypop","option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"3"},{"sort_seq":5,"section":null,"section_icon":null,"colgrp":null,"colid":"pjt_nm","colnm":"프로젝트","dtype":"text","etype":"txt","attr":null,"defval":null,"w":"10","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"4"},{"sort_seq":6,"section":null,"section_icon":null,"colgrp":null,"colid":"acct_cd","colnm":"계정코드","dtype":"text","etype":"txt","attr":"pop keycol","defval":null,"w":"6","h":null,"refcd":"mypop","option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"5"},{"sort_seq":7,"section":null,"section_icon":null,"colgrp":null,"colid":"acct_nm","colnm":"비용계정","dtype":"text","etype":"raw","attr":null,"defval":null,"w":"10","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"6"},{"sort_seq":8,"section":null,"section_icon":null,"colgrp":null,"colid":"rmk","colnm":"항목(적요)","dtype":"text","etype":"txt","attr":null,"defval":null,"w":"20","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"7"},{"sort_seq":9,"section":null,"section_icon":null,"colgrp":null,"colid":"tr_cd","colnm":"거래처코드","dtype":"text","etype":"txt","attr":"pop keycol","defval":null,"w":"6","h":null,"refcd":"mypop","option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"8"},{"sort_seq":10,"section":null,"section_icon":null,"colgrp":null,"colid":"tr_nm","colnm":"거래처","dtype":"text","etype":"txt","attr":null,"defval":null,"w":"10","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"9"},{"sort_seq":11,"section":null,"section_icon":null,"colgrp":null,"colid":"qty","colnm":"수량","dtype":"num","etype":"txt","attr":null,"defval":null,"w":"5","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"10"},{"sort_seq":12,"section":null,"section_icon":null,"colgrp":null,"colid":"price","colnm":"단가","dtype":"num","etype":"txt","attr":null,"defval":null,"w":"6","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"11"},{"sort_seq":13,"section":null,"section_icon":null,"colgrp":null,"colid":"amt","colnm":"금액(VAT-)","dtype":"num","etype":"txt","attr":null,"defval":null,"w":"7","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"12"},{"sort_seq":14,"section":null,"section_icon":null,"colgrp":null,"colid":"vat","colnm":"부가세액","dtype":"num","etype":"txt","attr":null,"defval":null,"w":"6","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"13"},{"sort_seq":15,"section":null,"section_icon":null,"colgrp":null,"colid":"tamt","colnm":"금액(VAT+)","dtype":"num","etype":"txt","attr":null,"defval":null,"w":"7","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"14"},{"sort_seq":16,"section":null,"section_icon":null,"colgrp":null,"colid":"ref_key","colnm":"정보참조키","dtype":"text","etype":"txt","attr":null,"defval":null,"w":"10","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"15"}]};
me.dataDef["_pgm_data"]["doc_data_pay"]={"sort_seq":"8","data_id":"doc_data_pay","data_nm":"지급조건","data_icon":null,"component_pgmid":"agGrid","component_option":{"func":[{"funcid":"getSrc","func_nm":"거래내역 가져오기","func_icon":"fas fa-plus"},{"funcid":"addRow","func_nm":"줄추가","func_icon":"fas fa-plus"},{"funcid":"delRow","func_nm":"줄삭제","func_icon":"fas fa-minus"}]},"inout_tp":null,"content":[{"sort_seq":1,"section":null,"section_icon":null,"colgrp":null,"colid":"tr_cd","colnm":"거래처","dtype":"text","etype":"txt","attr":"pop","defval":null,"w":"4","h":null,"refcd":"mypop","option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"4"},{"sort_seq":2,"section":null,"section_icon":null,"colgrp":null,"colid":"tr_nm","colnm":"거래처명","dtype":"text","etype":"raw","attr":null,"defval":null,"w":"8","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"3"},{"sort_seq":3,"section":null,"section_icon":null,"colgrp":null,"colid":"pay_tp","colnm":"결제방식","dtype":"text","etype":"txt","attr":null,"defval":"\"10일 현금\"","w":"8","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"2"},{"sort_seq":4,"section":null,"section_icon":null,"colgrp":null,"colid":"pay_bank","colnm":"결제계좌","dtype":"text","etype":"txt","attr":null,"defval":"\"은행명 ###-###-####\"","w":"15","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"1"},{"sort_seq":5,"section":null,"section_icon":null,"colgrp":null,"colid":"pay_condition","colnm":"지급조건","dtype":"text","etype":"txt","attr":null,"defval":"\"선금: 30%, 중도금: 30%, 잔금: 40%\"","w":"20","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"0"}]};
me.dataDef["_pgm_data"]["doc_data_pjt"]={"sort_seq":"9","data_id":"doc_data_pjt","data_nm":"금액배부","data_icon":null,"component_pgmid":"agGrid","component_option":{"func":[{"funcid":"getSrc","func_nm":"거래내역 가져오기","func_icon":"fas fa-plus"},{"funcid":"addRow","func_nm":"줄추가","func_icon":"fas fa-plus"},{"funcid":"delRow","func_nm":"줄삭제","func_icon":"fas fa-minus"}]},"inout_tp":null,"content":[{"sort_seq":1,"section":null,"section_icon":null,"colgrp":null,"colid":"dept_cd","colnm":"사용부서","dtype":"text","etype":"txt","attr":"pop","defval":null,"w":"4","h":null,"refcd":"mypop","option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"0"},{"sort_seq":2,"section":null,"section_icon":null,"colgrp":null,"colid":"dept_nm","colnm":"부서명","dtype":"text","etype":"raw","attr":null,"defval":null,"w":"10","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"1"},{"sort_seq":3,"section":null,"section_icon":null,"colgrp":null,"colid":"pjt_cd","colnm":"프로젝트","dtype":"text","etype":"txt","attr":"pop","defval":null,"w":"4","h":null,"refcd":"mypop","option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"2"},{"sort_seq":4,"section":null,"section_icon":null,"colgrp":null,"colid":"pjt_nm","colnm":"프로젝트명","dtype":"text","etype":"raw","attr":null,"defval":null,"w":"10","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"3"},{"sort_seq":5,"section":null,"section_icon":null,"colgrp":null,"colid":"acct_cd","colnm":"계정","dtype":"text","etype":"txt","attr":"pop","defval":null,"w":"8","h":null,"refcd":"mypop","option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"4"},{"sort_seq":6,"section":null,"section_icon":null,"colgrp":null,"colid":"amt","colnm":"금액(VAT-)","dtype":"num","etype":"txt","attr":null,"defval":null,"w":"8","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"5"},{"sort_seq":7,"section":null,"section_icon":null,"colgrp":null,"colid":"rmk","colnm":"적요","dtype":"text","etype":"txt","attr":null,"defval":null,"w":"10","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"6"}]};
me.dataDef["_pgm_data"]["doc_plas_frm"]={"sort_seq":"10","data_id":"doc_plas_frm","data_nm":"재무처리 기본정보","data_icon":null,"component_pgmid":"aweForm","component_option":null,"inout_tp":null,"content":[{"sort_seq":1,"section":null,"section_icon":null,"colgrp":"재무결재선","colid":"fi_line1","colnm":"담당1","dtype":"text","etype":"txt","attr":"pop","defval":null,"w":"10","h":null,"refcd":"mypop","option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"0"},{"sort_seq":2,"section":null,"section_icon":null,"colgrp":"재무결재선","colid":"fi_line2","colnm":"담당2","dtype":"text","etype":"txt","attr":"pop","defval":null,"w":"10","h":null,"refcd":"mypop","option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"1"},{"sort_seq":3,"section":null,"section_icon":null,"colgrp":"재무결재선","colid":"fi_line3","colnm":"담당3","dtype":"text","etype":"txt","attr":"pop","defval":null,"w":"10","h":null,"refcd":"mypop","option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"2"},{"sort_seq":4,"section":null,"section_icon":null,"colgrp":"재무결재선","colid":"fi_line4","colnm":"담당4","dtype":"text","etype":"txt","attr":"pop","defval":null,"w":"10","h":null,"refcd":"mypop","option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"3"},{"sort_seq":52,"section":null,"section_icon":null,"colgrp":null,"colid":"evidence_tp","colnm":"증빙관리","dtype":"text","etype":"sel","attr":null,"defval":null,"w":"15","h":null,"refcd":"EVIDENCE_TP","option":"sel:evidence_tp::nm","len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"4"},{"sort_seq":53,"section":null,"section_icon":null,"colgrp":null,"colid":"auto_chit_tp","colnm":"간소화*","dtype":"text","etype":"txt","attr":null,"defval":null,"w":"15","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"5"}]};
me.dataDef["_pgm_data"]["doc_plas_chit"]={"sort_seq":"11","data_id":"doc_plas_chit","data_nm":"분개유형","data_icon":null,"component_pgmid":"agGrid","component_option":{"func":[{"funcid":"getSrc","func_nm":"거래내역 자동분개","func_icon":"fas fa-plus"},{"funcid":"addRow","func_nm":"줄추가","func_icon":"fas fa-plus"},{"funcid":"delRow","func_nm":"줄삭제","func_icon":"fas fa-minus"},{"funcid":"save","func_nm":"분개저장","func_icon":"fas fa-save"}]},"inout_tp":null,"content":[{"sort_seq":1,"section":null,"section_icon":null,"colgrp":"간소화전표","colid":"in_dt","colnm":"등록일","dtype":"ymd","etype":"raw","attr":null,"defval":null,"w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"0"},{"sort_seq":2,"section":null,"section_icon":null,"colgrp":"간소화전표","colid":"in_sq","colnm":"전표순번","dtype":"text","etype":"raw","attr":null,"defval":null,"w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"1"},{"sort_seq":3,"section":null,"section_icon":null,"colgrp":"사업장","colid":"div_cd","colnm":"코드","dtype":"text","etype":"raw","attr":null,"defval":null,"w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"2"},{"sort_seq":4,"section":null,"section_icon":null,"colgrp":"사업장","colid":"div_nm","colnm":"명","dtype":"text","etype":"raw","attr":null,"defval":null,"w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"3"},{"sort_seq":5,"section":null,"section_icon":null,"colgrp":"사용부서","colid":"ct_dept","colnm":"코드","dtype":"text","etype":"raw","attr":null,"defval":null,"w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"4"},{"sort_seq":6,"section":null,"section_icon":null,"colgrp":"사용부서","colid":"ct_dept_nm","colnm":"명","dtype":"text","etype":"raw","attr":null,"defval":null,"w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"5"},{"sort_seq":7,"section":null,"section_icon":null,"colgrp":"프로젝트","colid":"pjt_cd","colnm":"코드","dtype":"text","etype":"raw","attr":null,"defval":null,"w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"6"},{"sort_seq":8,"section":null,"section_icon":null,"colgrp":"프로젝트","colid":"pjt_nm","colnm":"명","dtype":"text","etype":"raw","attr":null,"defval":null,"w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"7"},{"sort_seq":9,"section":null,"section_icon":null,"colgrp":"차변","colid":"dr_acct_cd","colnm":"계정코드","dtype":"text","etype":"raw","attr":null,"defval":null,"w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"8"},{"sort_seq":10,"section":null,"section_icon":null,"colgrp":"차변","colid":"dr_acct_nm","colnm":"계정명","dtype":"text","etype":"raw","attr":null,"defval":null,"w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"9"},{"sort_seq":11,"section":null,"section_icon":null,"colgrp":"차변","colid":"dr_acct_am","colnm":"금액","dtype":"num","etype":"raw","attr":null,"defval":null,"w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"10"},{"sort_seq":12,"section":null,"section_icon":null,"colgrp":"대변","colid":"cr_acct_cd","colnm":"계정코드","dtype":"text","etype":"raw","attr":null,"defval":null,"w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"11"},{"sort_seq":13,"section":null,"section_icon":null,"colgrp":"대변","colid":"cr_acct_nm","colnm":"계정명","dtype":"text","etype":"raw","attr":null,"defval":null,"w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"12"},{"sort_seq":14,"section":null,"section_icon":null,"colgrp":"대변","colid":"cr_acct_am","colnm":"금액","dtype":"num","etype":"raw","attr":null,"defval":null,"w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"13"},{"sort_seq":15,"section":null,"section_icon":null,"colgrp":"적요","colid":"rmk_dc","colnm":"적요","dtype":"text","etype":"raw","attr":null,"defval":null,"w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"14"},{"sort_seq":16,"section":null,"section_icon":null,"colgrp":"적요","colid":"rmk_dck","colnm":"적요2","dtype":"text","etype":"raw","attr":null,"defval":null,"w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"15"},{"sort_seq":17,"section":null,"section_icon":null,"colgrp":"거래처","colid":"tr_cd","colnm":"코드","dtype":"text","etype":"raw","attr":null,"defval":null,"w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"16"},{"sort_seq":18,"section":null,"section_icon":null,"colgrp":"거래처","colid":"tr_nm","colnm":"명","dtype":"text","etype":"raw","attr":null,"defval":null,"w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"17"},{"sort_seq":19,"section":null,"section_icon":null,"colgrp":"거래처","colid":"ct_am","colnm":"공급가액","dtype":"num","etype":"raw","attr":null,"defval":null,"w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"18"},{"sort_seq":20,"section":null,"section_icon":null,"colgrp":"거래처","colid":"ct_deal","colnm":"세무구분","dtype":"text","etype":"raw","attr":null,"defval":null,"w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"19"},{"sort_seq":21,"section":null,"section_icon":null,"colgrp":"거래처","colid":"jeonja_yn","colnm":"전자계산서","dtype":"text","etype":"raw","attr":null,"defval":null,"w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"20"},{"sort_seq":22,"section":null,"section_icon":null,"colgrp":"부가세/어음","colid":"fr_dt","colnm":"발행일","dtype":"ymd","etype":"raw","attr":null,"defval":null,"w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"21"},{"sort_seq":23,"section":null,"section_icon":null,"colgrp":"부가세/어음","colid":"ct_nb","colnm":"관리번호","dtype":"text","etype":"raw","attr":null,"defval":null,"w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"22"}]};
me.dataDef["_pgm_data"]["doc_budget"]={"sort_seq":"12","data_id":"doc_budget","data_nm":"당월 예산/집행현황","data_icon":null,"component_pgmid":"agGrid","component_option":{"func":[{"funcid":"refresh","func_nm":"재조회","func_icon":"fas fa-sync-alt"}]},"inout_tp":null,"content":[{"sort_seq":1,"section":null,"section_icon":null,"colgrp":null,"colid":"acct_cd","colnm":"계정코드","dtype":"text","etype":"raw","attr":null,"defval":null,"w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"0"},{"sort_seq":2,"section":null,"section_icon":null,"colgrp":null,"colid":"acct_nm","colnm":"계정명","dtype":"text","etype":"raw","attr":null,"defval":null,"w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"1"},{"sort_seq":3,"section":null,"section_icon":null,"colgrp":null,"colid":"budget_amt","colnm":"예산액","dtype":"num","etype":"raw","attr":null,"defval":null,"w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"2"},{"sort_seq":4,"section":null,"section_icon":null,"colgrp":null,"colid":"ex_amt","colnm":"집행액","dtype":"num","etype":"raw","attr":null,"defval":null,"w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"3"},{"sort_seq":5,"section":null,"section_icon":null,"colgrp":null,"colid":"avail_amt","colnm":"가용액","dtype":"num","etype":"raw","attr":null,"defval":null,"w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"4"},{"sort_seq":6,"section":null,"section_icon":null,"colgrp":null,"colid":"cur_amt","colnm":"당 건","dtype":"num","etype":"raw","attr":null,"defval":null,"w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"5"},{"sort_seq":7,"section":null,"section_icon":null,"colgrp":null,"colid":"bal_amt","colnm":"예산잔액","dtype":"num","etype":"raw","attr":null,"defval":null,"w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"6"}]};

        me.pageObj["_page"] = new gfnFramepage( me ); 
        for(var component_id in me.dataDef["_pgm_data"]) { 
            me.pageObj[component_id] = new gfnComponent( me.pageid, component_id, me.dataDef["_pgm_data"][component_id], me.fnEH, me); 
        }  
        setTimeout(function(){
            $("#frameset").scrollTo(0); //스크롤 
        },10);
        if(typeof(me.fnInitExtra)=='function') me.fnInitExtra(); 
    } 
/*-- SCRIPT autogen end ---------------------------------------------- */
    /* agGrid RN사이즈 줄이기 */
    RN_WIDTH = 32; 

    /* 사용자초기화 */
    me.fnInitExtra=function() {
        me.co_cd = nvl(gUserinfo.co_cd,gds.comcd.find(el=>el.grpcd=="DZ_CO_CD"&&el.val_6==gUserinfo.orgcd).cd);
        me.doc_template = {};
        
        //탭 설정
        gfnTab(pageid, "tabs0"); 
        gfnTab(pageid, "tabs"); 
        gfnTab(pageid, "tabs2"); 
        //원천DATA입력 확대/축소
        me.page.find(".expand").on("click",function(){
            //if(me.page.find("#doc_data").css("position")=="relative") 
            me.page.find("#doc_data").toggleClass("float");
        })
        
        //사용자 컨트롤 
        $("#"+pageid+" #mytextarea").attr("id",pageid+"mytextarea");
        var plugins = [
            "advlist", "autolink", "lists", "link", "image", "charmap", "print", "preview", "anchor",
            "searchreplace", "visualblocks", "code", "fullscreen", "insertdatetime", "media", "table",
            "paste", "code", "help", "wordcount", "save"
        ];
        var edit_toolbar = 'formatselect fontselect fontsizeselect |'
                    + ' forecolor backcolor |'
                    + ' bold italic underline strikethrough |'
                    + ' alignjustify alignleft aligncenter alignright |'
                    + ' bullist numlist |'
                    + ' table tabledelete |'
                    + ' link image';
        var selector = '#'+pageid+'mytextarea';
        tinymce.init({
            content_style: "body {font-size: 9pt;}",
            selector: selector,
            branding: false,
            /* forced_root_block: false, */
            language: "ko_KR",
            plugins: plugins,
            toolbar: edit_toolbar,
            height: 320, 
            statusbar: false,
            resize: false,
            paste_data_images: true,
            init_instance_callback : function(){  
                //최초 문서내용 조회 : 조회완료와 에디터초기화 차이발생함 => 에디터초기화 후 콜백으로 조회
                me.activeEditor = tinyMCE.activeEditor;   
                //화면이 열리면 문서템플릿을 먼저 선택해야함. 
                if(!isNull(gParam.copyDoc)) {      
                    me.fnCopyDocTemplate();
                } else {
                    me.fnPopDocTemplate();
                }                
            }  
        }); 
        
        //템플릿의 사업부결재선 벽돌쌓기 현상 방지
        var sec = me.page.find("[section='사업부결재선(전결권자, 필수합의부서)']");
        var grp1 = $("<div class='row'></div>");
        var grp2 = $("<div class='row'></div>");
        var grp3 = $("<div class='row'></div>");
        var grp4 = $("<div class='row'></div>");
        sec.children("[colgrp]").each((idx,el)=>{
            if(idx>=0 && idx<4*1) $(el).appendTo(grp1);
            if(idx>=4 && idx<4*2) $(el).appendTo(grp2);
            if(idx>=8 && idx<4*3) $(el).appendTo(grp3);
            if(idx>=12 && idx<4*4) $(el).appendTo(grp4);
        });
        sec.append(grp1).append(grp2).append(grp3).append(grp4);
        
        //callback 
        me.fnCallback = gParam.fnCallback;
    }

    /* 이벤트핸들러 */
    me.fnEH=function(component, evt, row, col, val) { 
        //console.log(evt+","+row+","+col+","+val);
        //화면기능버튼이 눌리면 
        if (component==me.pageObj["_pageFunc"]){ 
            if(typeof(me[col])=='function') me[col](); //col=기능명 me["fnSearch"]()=me.fnSearch(); 
        }
        //mst:문서 기본정보 이벤트처리     
        else if(component==me.pageObj["mst"]) {
            if(evt=="mypop") {
                if(col=="doc_template_nm") {
                    me.fnPopDocTemplate();
                }
                if(col=="reg_emp_info") {
                    /**************************************************************************************/
                    //조직도에서 사용자 검색은 코드/명 팝업이 아니므로 별도로 구현함 
                    //var option = val[3]; //"auto:reg_usid:nm:cdnm:"
                    //var term   = val[4]; //입력된 검색어
                    var co_cd = gds.comcd.find(el=>el.grpcd=="DZ_CO_CD"&&el.val_6==gUserinfo.orgcd).cd;
                    var auto  = (inStr(val[3],"auto")<0)?false:true;
                    var term  = val[4];
                    //console.log(val);
                    gParam ={INVAR:{co_cd:co_cd,term:term,auto:auto}}; 
                    //gfnLoad(app,pgm,oDOM:body에 붙인후,afnCallback,domChildClear)
                    gfnLoad("plas","popupPlasEMP",$("body"),function(OUTVAR){
                        gfnPopup("임직원검색", OUTVAR.rtnMsg, {width:800,height:600}, function(){
                            //console.log(gParam);
                            if(!isNull(gParam) && !isNull(gParam.OUTVAR) && gParam.OUTVAR.rtnCd=="OK") {
                                var rtn = gParam.OUTVAR.list[0];
                                me.pageObj.mst.setVal("reg_dept",rtn.dept_nm);
                                me.pageObj.mst.setVal("doc_co_cd",rtn.co_cd);
                                me.pageObj.mst.setVal("doc_dept_cd",rtn.dept_cd);
                                me.pageObj.mst.setVal("reg_co", gfnCdNm("DZ_CO_CD",rtn.co_cd,"nm"));
                                me.pageObj.mst.setVal("reg_emp_info",rtn.kor_nm + ' ' + rtn.hcls_nm);
                                me.pageObj.mst.setVal("reg_usid",rtn.usid);
                                me.pageObj.mst.setVal("emp_cd",rtn.emp_cd);
                            } else {
                                me.pageObj.mst.setVal("reg_dept","");
                                me.pageObj.mst.setVal("doc_co_cd","");
                                me.pageObj.mst.setVal("doc_dept_cd","");
                                me.pageObj.mst.setVal("reg_co_cd",""); 
                                me.pageObj.mst.setVal("reg_emp_info",""); 
                                me.pageObj.mst.setVal("reg_usid","");
                                me.pageObj.mst.setVal("emp_cd","");
                            } 
                        });     
                    })
                    /* mypop 사용자정의 검색창 구현 ****************************************************************/
                }
            } 
        }

        //rcv:담당자 정보 이벤트처리     
        else if(component==me.pageObj["rcv"]) {
            if(evt=="componentFunc") {
                if(row=="addAuto") {
                    me.fnAutoRcv();
                } else if(row=="addRow") {
                    component.addRow();  
                } else if(row=="moveUp") { 
                    me.fnSortOrderSet("rcv",-1);
                } else if(row=="moveDown") {
                    me.fnSortOrderSet("rcv",1);
                }
            }
            if(evt=="click" && col=="btnDelete") {
                if(component.getVal(row,"rcv_tp")=="A") {
                    gfnStatus("삭제확인","문서상신자는 삭제할 수 업습니다.");
                    return;
                }
                component.delRow(row,true);  
            }
            if(evt=="mypop" && col=="rcv_emp_nm") {
                /* mypop 사용자정의 검색창 구현 ****************************************************************/
                var co_cd = gds.comcd.find(el=>el.grpcd=="DZ_CO_CD"&&el.val_6==gUserinfo.orgcd).cd;
                var auto  = (inStr(val[3],"auto")<0)?false:true;
                var term  = val[4];
                gParam ={INVAR:{co_cd:co_cd,term:term,auto:auto}}; 
                gfnLoad("plas","popupPlasEMP",$("body"),function(OUTVAR){
                    gfnPopup("결재/합의선 검색", OUTVAR.rtnMsg, {width:800,height:600}, function(){
                        if(!isNull(gParam) && !isNull(gParam.OUTVAR) && gParam.OUTVAR.rtnCd=="OK") {
                            me.pageObj.rcv.gridOptions.api.stopEditing();
                            gParam.OUTVAR.list.forEach((rtn,idx)=>{
                                if(idx>0) {
                                    var rowIdx = me.pageObj.rcv.getRowIndex(row);
                                    row = me.pageObj.rcv.getNodeId( (rowIdx+1) );
                                } 
                                me.pageObj.rcv.setVal(row,"rcv_dept_nm",rtn.dept_nm);
                                me.pageObj.rcv.setVal(row,"rcv_hrsp_nm",rtn.hrsp_nm);
                                me.pageObj.rcv.setVal(row,"rcv_emp_nm",rtn.kor_nm);
                                me.pageObj.rcv.setVal(row,"rcv_hcls_nm",rtn.hcls_nm);
                                me.pageObj.rcv.setVal(row,"rcv_usid",rtn.usid);  
                                me.pageObj.rcv.setVal(row,"rcv_emp_cd",rtn.emp_cd);                                  
                            }); 
                        } else { 
                            me.pageObj.rcv.gridOptions.api.stopEditing();
                            me.pageObj.rcv.setVal(row,"rcv_dept_nm","");
                            me.pageObj.rcv.setVal(row,"rcv_hrsp_nm","");
                            me.pageObj.rcv.setVal(row,"rcv_emp_nm","");
                            me.pageObj.rcv.setVal(row,"rcv_hcls_nm","");
                            me.pageObj.rcv.setVal(row,"rcv_usid","");
                            me.pageObj.rcv.setVal(row,"rcv_emp_cd","");  
                        } 
                    });     
                })
                /* mypop 사용자정의 검색창 구현 ****************************************************************/
            }
        }
        
        //rcv_cc:담당자 정보 이벤트처리     
        else if(component==me.pageObj["rcv_cc"]) {
            if(evt=="componentFunc") {
                if(row=="addRow") {
                    component.addRow({rcv_tp:"BC"}); //사후참조   
                } else if(row=="moveUp") { 
                    me.fnSortOrderSet("rcv_cc",-1);
                } else if(row=="moveDown") {
                    me.fnSortOrderSet("rcv_cc",1);
                }
            }
            if(evt=="click" && col=="btnDelete") {
                component.delRow(row,true);  
            }
            if(evt=="mypop" && col=="rcv_emp_nm") {
                /* mypop 사용자정의 검색창 구현 ****************************************************************/
                var co_cd = gds.comcd.find(el=>el.grpcd=="DZ_CO_CD"&&el.val_6==gUserinfo.orgcd).cd;
                var auto  = (inStr(val[3],"auto")<0)?false:true;
                var term  = val[4];
                gParam ={INVAR:{co_cd:co_cd,term:term,auto:auto}}; 
                gfnLoad("plas","popupPlasEMP",$("body"),function(OUTVAR){
                    gfnPopup("결재/합의선 검색", OUTVAR.rtnMsg, {width:800,height:600}, function(){
                        if(!isNull(gParam) && !isNull(gParam.OUTVAR) && gParam.OUTVAR.rtnCd=="OK") {
                            me.pageObj.rcv_cc.gridOptions.api.stopEditing();
                            gParam.OUTVAR.list.forEach((rtn,idx)=>{
                                if(idx>0) {
                                    var rowIdx = me.pageObj.rcv_cc.getRowIndex(row);
                                    row = me.pageObj.rcv_cc.getNodeId( (rowIdx+1) );
                                } 
                                me.pageObj.rcv_cc.setVal(row,"rcv_dept_nm",rtn.dept_nm);
                                me.pageObj.rcv_cc.setVal(row,"rcv_hrsp_nm",rtn.hrsp_nm);
                                me.pageObj.rcv_cc.setVal(row,"rcv_emp_nm",rtn.kor_nm);
                                me.pageObj.rcv_cc.setVal(row,"rcv_hcls_nm",rtn.hcls_nm);
                                me.pageObj.rcv_cc.setVal(row,"rcv_usid",rtn.usid);  
                                me.pageObj.rcv_cc.setVal(row,"rcv_emp_cd",rtn.emp_cd);                                  
                            }); 
                        } else { 
                            me.pageObj.rcv_cc.gridOptions.api.stopEditing();
                            me.pageObj.rcv_cc.setVal(row,"rcv_dept_nm","");
                            me.pageObj.rcv_cc.setVal(row,"rcv_hrsp_nm","");
                            me.pageObj.rcv_cc.setVal(row,"rcv_emp_nm","");
                            me.pageObj.rcv_cc.setVal(row,"rcv_hcls_nm","");
                            me.pageObj.rcv_cc.setVal(row,"rcv_usid","");
                            me.pageObj.rcv_cc.setVal(row,"rcv_emp_cd","");  
                        } 
                    });     
                })
            }
        }

        //attach:첨부문서/파일 이벤트처리     
        else if(component==me.pageObj["attach"]) {
            if(evt=="componentFunc") {
                if(row=="attachFile") {
                    //gParam = {UUID: me.docid, file_tp:"DOC_ATTCH", ref_file_tp:"T_DOC"};
                    gfnUpload(me.docid, "DOC_ATTCH", "T_DOC", function(arrFiles) {
                        //console.log(arrFiles);
                        var data = [];
                        if(!isNull(arrFiles)) {
                            arrFiles.forEach((el,idx)=>{
                                var row = {};
                                if(!isNull(el.fileid)) { 
                                    row.content = el.orgn_nm;
                                    row.content_info = el.file_ext+" ("+el.file_sz+"kb)";
                                    row.fileid  = el.fileid;
                                    row.ref_id  = me.docid; 
                                    row.btn_show = el.file_url;
                                    data.push(row);
                                }
                            })
                        }
                        me.pageObj.attach.importData(data);
                    });
                } 
            }
            if(evt=="click") {
                if(col=="btn_show") {
                    var fileid  = component.getVal(row,"fileid");
                    var file_nm = nvl(component.getVal(row,"content"),component.getVal(row,"file_nm"));
                    gfnDownload(fileid, file_nm);    
                }  
            }
        }

        //ref_doc:참조문서 이벤트처리     
        else if(component==me.pageObj["ref_doc"]) {
            if(evt=="componentFunc") {
                if(row=="attachDoc") {
                    /* mypop 사용자정의 검색창 구현 ****************************************************************/
                    var co_cd = gds.comcd.find(el=>el.grpcd=="DZ_CO_CD"&&el.val_6==gUserinfo.orgcd).cd;
                    var auto  = false;
                    var term  = "";
                    gParam ={INVAR:{co_cd:co_cd,term:term,auto:auto,doc_stat:"F"}}; 
                    gfnLoad("plas","popupPlasDoc",$("body"),function(OUTVAR){
                        gfnPopup("참조문서 검색", OUTVAR.rtnMsg, {width:800,height:600}, function(){
                            if(!isNull(gParam) && !isNull(gParam.OUTVAR) && gParam.OUTVAR.rtnCd=="OK") {
                                gParam.OUTVAR.list.forEach((rtn,idx)=>{
                                    var rowId = component.addRow(); 
                                    me.pageObj.ref_doc.setVal(rowId,"content",rtn.docid);  
                                    me.pageObj.ref_doc.setVal(rowId,"doc_no",rtn.doc_no);
                                    me.pageObj.ref_doc.setVal(rowId,"title",rtn.title);
                                }); 
                            }  
                        });     
                    }); 
                } 
            }
            if(evt=="click") {
                if(col=="btnShow") {
                    gfnShowPlasDoc( component.getVal(row,"content") );
                }  
                if(col=="btnDelete") {
                    component.delRow(row, true);
                }  
            }
        }
        
        //doc_data_src:원천DATA-거래내역 이벤트처리     
        else if(component==me.pageObj["doc_data_src"]) {
            if(evt=="componentFunc") {
                if(row=="addRow") {
                    var curRow = component.selectedRow(); 
                    var rowCnt = nvl(component._componentCond.rowCnt.getVal(),1);
                    var orgData = component.exportData(); 
                    //선택된 줄이 있는 경우 복제하여 줄추가
                    for(var i=0; i < rowCnt; i++) {
                        var rowData = {crud:"C"};
                        if(curRow >= 0) {
                            rowData = $.extend(true,{},component.getRowData(curRow));
                        } 
                        delete rowData.id;
                        orgData.push(rowData);
                    }
                    component.importData(orgData);
                    component.total("top");
                    component.selectRow(curRow);
                }
                if (row=="delRow") {
                    component.delRow(undefined,true);
                    component.total("top");
                } 
                if (row=="addTbl") {
                    //gfnTable(framepage,arrData,arrDispCols,arrColHeader,arrColAttr,totalTopBottom)
                    var arrDispCols =["tr_nm",   "rmk",  "qty", "amt"];
                    var arrColHeader=["공급업체","항목", "수량","금액(v-)"];
                    var arrColAttr  =["center",  "left", "num right", "num"];
                    //템플릿 출력항목 가져옴
                    var src_desc = trim(me.doc_template.src_desc_clob);
                    if(!isNull(src_desc)) {
                        var prt_cols = [];
                        arrDispCols =[];
                        arrColHeader=[];
                        arrColAttr  =[];
                        src_desc = JSON.parse(src_desc);
                        src_desc = sort(src_desc,"sort_seq");
                        src_desc.forEach(col=>{
                            if(col.tbl_yn=='Y') {
                                arrDispCols.push(col.colid); 
                                arrColHeader.push(col.colnm);
                                arrColAttr.push(col.attr);  
                            }
                        });
                        //console.log(arrDispCols);
                        //console.log(arrColHeader);
                        //console.log(arrColAttr);
                    }
                    var htmlTbl = gfnTable(me, "doc_data_src", arrDispCols, arrColHeader, arrColAttr, "bottom");
                    //console.log(htmlTbl);
                    me.content = tinymce.activeEditor.getContent(); 
                    if(inStr(me.content,"[표]")>=0) {
                        me.content = me.content.replace("[표]", htmlTbl);
                        tinymce.activeEditor.setContent(me.content);
                    }
                    else tinymce.activeEditor.insertContent("<br>"+htmlTbl+"<br>"); 
                    gfnAlert("표삽입 확인","본문에 표가 추가되었습니다!");
                }
            } 
            if(evt=="mypop") {
                if(col=="dept_cd") {
                    /**************************************************************************************/
                    var co_cd = me.co_cd; //문서작성자의 회사코드
                    var auto  = (inStr(val[3],"auto")<0)?false:true;
                    var term  = val[4]; 
                    gParam ={INVAR:{co_cd:co_cd,term:term,auto:auto}}; 
                    //gfnLoad(app,pgm,oDOM:body에 붙인후,afnCallback,domChildClear)
                    gfnLoad("plas","popupPlasGRP",$("body"),function(OUTVAR){
                        gfnPopup("거래처 검색", OUTVAR.rtnMsg, {width:800,height:600}, function(){
                            //console.log(gParam);
                            if(!isNull(gParam) && !isNull(gParam.OUTVAR) && gParam.OUTVAR.rtnCd=="OK") {
                                var rtn = gParam.OUTVAR.list[0];
                                component.gridOptions.api.stopEditing();
                                component.setVal(row,"dept_cd",rtn.dept_cd);
                                component.setVal(row,"dept_nm",rtn.dept_nm); 
                            } else {
                                component.gridOptions.api.stopEditing();
                                component.setVal(row,"dept_cd","");
                                component.setVal(row,"dept_nm",""); 
                            } 
                            component.forceFocus(row,col,true);
                        });     
                    })
                    /* mypop 사용자정의 검색창 구현 ****************************************************************/ 
                }
                if(col=="pjt_cd") {
                    /**************************************************************************************/
                    var co_cd = me.co_cd; //문서작성자의 회사코드
                    var auto  = (inStr(val[3],"auto")<0)?false:true;
                    var term  = val[4]; 
                    gParam ={INVAR:{co_cd:co_cd,term:term,auto:auto}}; 
                    //gfnLoad(app,pgm,oDOM:body에 붙인후,afnCallback,domChildClear)
                    gfnLoad("plas","popupPlasPJT",$("body"),function(OUTVAR){
                        gfnPopup("거래처 검색", OUTVAR.rtnMsg, {width:600,height:600}, function(){
                            //console.log(gParam);
                            if(!isNull(gParam) && !isNull(gParam.OUTVAR) && gParam.OUTVAR.rtnCd=="OK") {
                                var rtn = gParam.OUTVAR.list[0];
                                component.gridOptions.api.stopEditing();
                                component.setVal(row,"pjt_cd",rtn.pjt_cd);
                                component.setVal(row,"pjt_nm",rtn.pjt_nm); 
                            } else {
                                component.gridOptions.api.stopEditing();
                                component.setVal(row,"pjt_cd","");
                                component.setVal(row,"pjt_nm",""); 
                            } 
                            component.forceFocus(row,col,true);
                        });     
                    })
                    /* mypop 사용자정의 검색창 구현 ****************************************************************/ 
                }
                if(col=="tr_cd") {
                    /**************************************************************************************/
                    var co_cd = me.co_cd; //문서작성자의 회사코드
                    var auto  = (inStr(val[3],"auto")<0)?false:true;
                    var term  = val[4]; 
                    gParam ={INVAR:{co_cd:co_cd,term:term,auto:auto}}; 
                    //gfnLoad(app,pgm,oDOM:body에 붙인후,afnCallback,domChildClear)
                    gfnLoad("plas","popupPlasTR",$("body"),function(OUTVAR){
                        gfnPopup("거래처 검색", OUTVAR.rtnMsg, {width:800,height:600}, function(){
                            //console.log(gParam);
                            if(!isNull(gParam) && !isNull(gParam.OUTVAR) && gParam.OUTVAR.rtnCd=="OK") {
                                var rtn = gParam.OUTVAR.list[0];
                                component.gridOptions.api.stopEditing();
                                component.setVal(row,"tr_cd",rtn.tr_cd);
                                component.setVal(row,"tr_nm",rtn.tr_nm); 
                            } else {
                                component.gridOptions.api.stopEditing();
                                component.setVal(row,"tr_cd","");
                                component.setVal(row,"tr_nm",""); 
                            }
                            component.forceFocus(row,col,true); 
                        });     
                    })
                    /* mypop 사용자정의 검색창 구현 ****************************************************************/ 
                }
                if(col=="acct_cd") {
                    //doc_template에 정의된 차변계정에서 가져온다.  
                    var arrAcct_list = me.doc_template.drcr_acct.split("\n");
                    //console.log(arrAcct_list);
                    arrAcct_list = nvl(arrAcct_list.find(el=>inStr(el,"차변 -  ")>=0),"");
                    //console.log(arrAcct_list);
                    arrAcct_list = arrAcct_list.replace("차변 -  ","").split(",");
                    //console.log(arrAcct_list);
                    var acct_list = [];
                    arrAcct_list.forEach(el=>{
                        var cols = el.split(":");
                        acct_list.push({cd:trim(cols[0]), nm:trim(cols[1])});
                    })
                    var option = (inStr(val[3],"auto")<0)?"sel:::cdnm":"single:::cdnm";
                    //console.log(option);
                    gfnSearch(acct_list,function(OUTVAR){
                        if(gParam.rtnCd=="OK" && gParam.rtnData.length > 0) {
                            component.gridOptions.api.stopEditing();
                            component.setVal(row,"acct_cd",gParam.rtnData[0].cd);
                            component.setVal(row,"acct_nm",gParam.rtnData[0].nm); 
                        } else {
                            component.gridOptions.api.stopEditing();
                            component.setVal(row,"acct_cd","");
                            component.setVal(row,"acct_nm",""); 
                        }
                        component.forceFocus(row,col,true);
                    }, option, val[4], true );
                }
            }
            if(evt=="change") {
                if(col=="qty"||col=="price") {
                    var qty = component.getVal(row,"qty");
                    var price = component.getVal(row,"price");
                    var tamt = toNum(qty)*toNum(price);
                    var amt  = toNum(format(tamt/1.1,0));
                    var vat  = tamt-amt;
                    component.setVal(row,"tamt",tamt);
                    component.setVal(row,"amt",amt);
                    component.setVal(row,"vat",vat);
                    component.total("top");
                    component.forceFocus(row,col,true);
                }
                if(col=="amt"||col=="vat") {
                    var amt  = toNum(component.getVal(row,"amt"));
                    var vat  = toNum(component.getVal(row,"vat"));
                    var tamt = amt+vat;
                    component.setVal(row,"tamt",tamt); 
                    component.total("top");
                    component.forceFocus(row,col,true);
                } 
                if(col=="tamt") {
                    var tamt = toNum(component.getVal(row,"tamt"));
                    var amt  = toNum(format(tamt/1.1,0));
                    var vat  = tamt-amt;
                    component.setVal(row,"amt",amt);
                    component.setVal(row,"vat",vat);
                    component.total("top");
                    component.forceFocus(row,col,true);
                } 
            }
        }
        //doc_data_pay:원천DATA-지급조건 이벤트처리     
        else if(component==me.pageObj["doc_data_pay"]) {
            if(evt=="componentFunc") {
                if(row=="getSrc") {
                    gfnStatus("기능 개발중입니다.","기능 개발중입니다.");
                }
                if(row=="addRow") {
                    component.addRow(); 
                    component.total("top"); 
                }
                if (row=="delRow") {
                    component.delRow(undefined,true);
                    component.total("top");
                } 
            }
        }
        //doc_data_pay:원천DATA-지급조건 이벤트처리     
        else if(component==me.pageObj["doc_data_pjt"]) {
            if(evt=="componentFunc") {
                if(row=="getSrc") {
                    gfnStatus("기능 개발중입니다.","기능 개발중입니다.");
                }
                if(row=="addRow") {
                    component.addRow(); 
                    component.total("top"); 
                }
                if (row=="delRow") {
                    component.delRow(undefined,true);
                    component.total("top");
                } 
            }
        }
        //doc_plas_chit: 회계분개 이벤트처리     
        else if(component==me.pageObj["doc_plas_chit"]) {
            if(evt=="componentFunc") {
                if(row=="getSrc") {
                    gfnStatus("기능 개발중입니다.","기능 개발중입니다.");
                }
                if(row=="addRow") {
                    component.addRow(); 
                    component.total("top"); 
                }
                if (row=="delRow") {
                    component.delRow(undefined,true);
                    component.total("top");
                } 
                if(row=="save") {
                    gfnStatus("기능 개발중입니다.","기능 개발중입니다.");
                }
            }
        }
        //doc_budget: 예산현황 조회 이벤트처리     
        else if(component==me.pageObj["doc_budget"]) {
            if(evt=="componentFunc") {
                if(row=="refresh") {
                    gfnStatus("기능 개발중입니다.","기능 개발중입니다.");
                } 
            }
        }
    }    

    //문서템플릿 조회
    me.fnPopDocTemplate=function() {
        /**************************************************************************************/
        gParam ={INVAR:{co_cd:me.co_cd,fnCallback(OUTVAR){
            if(OUTVAR.rtnCd=="OK" && OUTVAR.list.length > 0) {
                me.pageObj.mst.setVal("doc_template_id",OUTVAR.list[0].doc_template_id);
                me.pageObj.mst.setVal("doc_template_nm",OUTVAR.list[0].title);
                me.doc_template = $.extend(true,{},OUTVAR.list[0]);
                //me.pageObj.doc_template.importData(OUTVAR.list);
                var rowData = OUTVAR.list[0];
                me.pageObj.doc_template.reset();
                //템플릿의 사업부결재선 벽돌쌓기 현상 방지
                var sec = me.page.find("[section='사업부결재선(전결권자, 필수합의부서)']");
                var grp1 = $("<div class='row'></div>");
                var grp2 = $("<div class='row'></div>");
                var grp3 = $("<div class='row'></div>");
                var grp4 = $("<div class='row'></div>");
                sec.children("[colgrp]").each((idx,el)=>{
                    if(idx>=0 && idx<4*1) $(el).appendTo(grp1);
                    if(idx>=4 && idx<4*2) $(el).appendTo(grp2);
                    if(idx>=8 && idx<4*3) $(el).appendTo(grp3);
                    if(idx>=12 && idx<4*4) $(el).appendTo(grp4);
                });
                sec.append(grp1).append(grp2).append(grp3).append(grp4);
                //variant세팅
                me.pageObj.doc_template.importData(rowData);
                me.fnSetVariant();
                //데이터 쪼개서 넣어주기
                rowData.cat = rowData.cat_0 + " > " + rowData.cat_1 + " > " + rowData.cat_2;
                var div_cds = (rowData.div_cd||"").split(";");
                rowData.div_cd1 = div_cds[0].split(":")[1];
                rowData.div_cd2 = div_cds[1].split(":")[1];
                rowData.div_cd3 = div_cds[2].split(":")[1];
                rowData.div_cd4 = div_cds[3].split(":")[1];
                var co_lines = (rowData.co_line||"").split(";");
                rowData.co_line1 = co_lines[0];
                rowData.co_line2 = co_lines[1];
                rowData.co_line3 = co_lines[2]; 
                rowData.co_line4 = co_lines[3];
                rowData.co_lines = nvl(co_lines[0].split(":")[1],"")+" "+nvl(co_lines[1].split(":")[1],"")+" "+nvl(co_lines[2].split(":")[1],"")+" "+nvl(co_lines[3].split(":")[1],"");
                var co_lines_1 = (rowData.co_line_1||"").split(";");
                rowData.co_line1_1 = co_lines_1[0];
                rowData.co_line2_1 = co_lines_1[1];
                rowData.co_line3_1 = co_lines_1[2]; 
                rowData.co_line4_1 = co_lines_1[3]; 
                rowData.co_lines_1 = nvl(co_lines_1[0].split(":")[1],"")+" "+nvl(co_lines_1[1].split(":")[1],"")+" "+nvl(co_lines_1[2].split(":")[1],"")+" "+nvl(co_lines_1[3].split(":")[1],"");
                var co_lines_2 = (rowData.co_line_2||"").split(";");
                rowData.co_line1_2 = co_lines_2[0];
                rowData.co_line2_2 = co_lines_2[1];
                rowData.co_line3_2 = co_lines_2[2]; 
                rowData.co_line4_2 = co_lines_2[3]; 
                rowData.co_lines_2 = nvl(co_lines_2[0].split(":")[1],"")+" "+nvl(co_lines_2[1].split(":")[1],"")+" "+nvl(co_lines_2[2].split(":")[1],"")+" "+nvl(co_lines_2[3].split(":")[1],"");
                var co_lines_3 = (rowData.co_line_3||"").split(";");
                rowData.co_line1_3 = co_lines_3[0];
                rowData.co_line2_3 = co_lines_3[1];
                rowData.co_line3_3 = co_lines_3[2]; 
                rowData.co_line4_3 = co_lines_3[3]; 
                rowData.co_lines_3 = nvl(co_lines_3[0].split(":")[1],"")+" "+nvl(co_lines_3[1].split(":")[1],"")+" "+nvl(co_lines_3[2].split(":")[1],"")+" "+nvl(co_lines_3[3].split(":")[1],"");
                var fi_lines = (rowData.fi_line||"").split(";");
                rowData.fi_lines = nvl(fi_lines[0].split(":")[1],"")+" "+nvl(fi_lines[1].split(":")[1],"")+" "+nvl(fi_lines[2].split(":")[1],"")+" "+nvl(fi_lines[3].split(":")[1],"");
                var cc_lines = (rowData.cc_line||"").split(";");
                rowData.cc_line1 = cc_lines[0];
                rowData.cc_line2 = cc_lines[1];
                rowData.cc_line3 = cc_lines[2]; 
                rowData.cc_line4 = cc_lines[3];  
                //console.log(rowData);
                me.pageObj.doc_template.importData(rowData);
                tinyMCE.get(me.pageid+"mytextarea").setContent(rowData.content); 
                
                //원천데이터 입력양식 재설정
                var src_desc;
                try {
                    src_desc = JSON.parse( rowData.src_desc_clob );
                } catch {
                    src_desc = null 
                }  
                //console.log(src_desc);
                if(!isNull(trim(src_desc))) {
                    var doc_data_src_content = [];
                    src_desc = sort(src_desc,"sort_seq");
                    src_desc.forEach(el=>{ if(el.entry_yn=='Y') doc_data_src_content.push(el); });
                    if(!isNull(trim(rowData.src_desc_clob))) me.dataDef["_pgm_data"]["doc_data_src"].content = doc_data_src_content;
                    me.pageObj["doc_data_src"] = new gfnComponent( me.pageid, "doc_data_src", me.dataDef["_pgm_data"]["doc_data_src"], me.fnEH, me);  
                }
                var pay_desc;
                try {
                    pay_desc = JSON.parse( rowData.pay_desc_clob );
                } catch {
                    pay_desc = null 
                }  
                if(!isNull(trim(pay_desc))) {
                    var doc_data_pay_content = [];
                    pay_desc = sort(pay_desc,"sort_seq");
                    pay_desc.forEach(el=>{ if(el.entry_yn=='Y') doc_data_pay_content.push(el); });
                    if(!isNull(trim(rowData.pay_desc_clob))) me.dataDef["_pgm_data"]["doc_data_pay"].content = doc_data_pay_content;
                    me.pageObj["doc_data_pay"] = new gfnComponent( me.pageid, "doc_data_pay", me.dataDef["_pgm_data"]["doc_data_pay"], me.fnEH, me);  
                } 
                var pjt_desc;
                try {
                    pjt_desc = JSON.parse( rowData.pjt_desc_clob );
                } catch {
                    pjt_desc = null 
                }  
                if(!isNull(trim(pjt_desc))) {
                    var doc_data_pjt_content = [];
                    pjt_desc = sort(pjt_desc,"sort_seq");
                    pjt_desc.forEach(el=>{ if(el.entry_yn=='Y') doc_data_pjt_content.push(el); });
                    if(!isNull(trim(rowData.pjt_desc_clob))) me.dataDef["_pgm_data"]["doc_data_pjt"].content = doc_data_pjt_content;
                    me.pageObj["doc_data_pjt"] = new gfnComponent( me.pageid, "doc_data_pjt", me.dataDef["_pgm_data"]["doc_data_pjt"], me.fnEH, me);  
                }
                
                me.fnReadInit();
            } else {
                me.pageObj.mst.setVal("doc_template_id","");
                me.pageObj.mst.setVal("doc_template_nm","");
                me.doc_template = {};
            }
        }}}; 
        //gfnLoad(app,pgm,oDOM:body에 붙인후,afnCallback,domChildClear)
        gfnLoad("plas","popupDocTemplate",$("body"),function(OUTVAR){
            gfnPopup("문서템플릿 검색", OUTVAR.rtnMsg, {width:600,height:600}, function(){});     
        })
        /* mypop 사용자정의 검색창 구현 ****************************************************************/
    }

    //문서복사 신규생성 
    me.fnCopyDocTemplate=function() {
        /**************************************************************************************/
        var OUTVAR = {list:[gParam.copyDoc.doc_template]} 
        me.pageObj.mst.setVal("doc_template_id",OUTVAR.list[0].doc_template_id);
        me.pageObj.mst.setVal("doc_template_nm",OUTVAR.list[0].title);
        me.doc_template = $.extend(true,{},OUTVAR.list[0]);
        var rowData = OUTVAR.list[0];
        me.pageObj.doc_template.reset();
        //템플릿의 사업부결재선 벽돌쌓기 현상 방지
        var sec = me.page.find("[section='사업부결재선(전결권자, 필수합의부서)']");
        var grp1 = $("<div class='row'></div>");
        var grp2 = $("<div class='row'></div>");
        var grp3 = $("<div class='row'></div>");
        var grp4 = $("<div class='row'></div>");
        sec.children("[colgrp]").each((idx,el)=>{
            if(idx>=0 && idx<4*1) $(el).appendTo(grp1);
            if(idx>=4 && idx<4*2) $(el).appendTo(grp2);
            if(idx>=8 && idx<4*3) $(el).appendTo(grp3);
            if(idx>=12 && idx<4*4) $(el).appendTo(grp4);
        });
        sec.append(grp1).append(grp2).append(grp3).append(grp4);
        //variant세팅
        me.pageObj.doc_template.importData(rowData);
        me.fnSetVariant();
        //데이터 쪼개서 넣어주기
        rowData.cat = rowData.cat_0 + " > " + rowData.cat_1 + " > " + rowData.cat_2;
        var div_cds = (rowData.div_cd||"").split(";");
        rowData.div_cd1 = div_cds[0].split(":")[1];
        rowData.div_cd2 = div_cds[1].split(":")[1];
        rowData.div_cd3 = div_cds[2].split(":")[1];
        rowData.div_cd4 = div_cds[3].split(":")[1];
        var co_lines = (rowData.co_line||"").split(";");
        rowData.co_line1 = co_lines[0];
        rowData.co_line2 = co_lines[1];
        rowData.co_line3 = co_lines[2]; 
        rowData.co_line4 = co_lines[3];
        rowData.co_lines = nvl(co_lines[0].split(":")[1],"")+" "+nvl(co_lines[1].split(":")[1],"")+" "+nvl(co_lines[2].split(":")[1],"")+" "+nvl(co_lines[3].split(":")[1],"");
        var co_lines_1 = (rowData.co_line_1||"").split(";");
        rowData.co_line1_1 = co_lines_1[0];
        rowData.co_line2_1 = co_lines_1[1];
        rowData.co_line3_1 = co_lines_1[2]; 
        rowData.co_line4_1 = co_lines_1[3]; 
        rowData.co_lines_1 = nvl(co_lines_1[0].split(":")[1],"")+" "+nvl(co_lines_1[1].split(":")[1],"")+" "+nvl(co_lines_1[2].split(":")[1],"")+" "+nvl(co_lines_1[3].split(":")[1],"");
        var co_lines_2 = (rowData.co_line_2||"").split(";");
        rowData.co_line1_2 = co_lines_2[0];
        rowData.co_line2_2 = co_lines_2[1];
        rowData.co_line3_2 = co_lines_2[2]; 
        rowData.co_line4_2 = co_lines_2[3]; 
        rowData.co_lines_2 = nvl(co_lines_2[0].split(":")[1],"")+" "+nvl(co_lines_2[1].split(":")[1],"")+" "+nvl(co_lines_2[2].split(":")[1],"")+" "+nvl(co_lines_2[3].split(":")[1],"");
        var co_lines_3 = (rowData.co_line_3||"").split(";");
        rowData.co_line1_3 = co_lines_3[0];
        rowData.co_line2_3 = co_lines_3[1];
        rowData.co_line3_3 = co_lines_3[2]; 
        rowData.co_line4_3 = co_lines_3[3]; 
        rowData.co_lines_3 = nvl(co_lines_3[0].split(":")[1],"")+" "+nvl(co_lines_3[1].split(":")[1],"")+" "+nvl(co_lines_3[2].split(":")[1],"")+" "+nvl(co_lines_3[3].split(":")[1],"");
        var fi_lines = (rowData.fi_line||"").split(";");
        rowData.fi_lines = nvl(fi_lines[0].split(":")[1],"")+" "+nvl(fi_lines[1].split(":")[1],"")+" "+nvl(fi_lines[2].split(":")[1],"")+" "+nvl(fi_lines[3].split(":")[1],"");
        //console.log(rowData);
        me.pageObj.doc_template.importData(rowData);
        //원천데이터 입력양식 재설정
        var src_desc;
        try {
            src_desc = JSON.parse( rowData.src_desc_clob );
        } catch {
            src_desc = null 
        }  
        //console.log(src_desc);
        if(!isNull(trim(src_desc))) {
            var doc_data_src_content = [];
            src_desc = sort(src_desc,"sort_seq");
            src_desc.forEach(el=>{ if(el.entry_yn=='Y') doc_data_src_content.push(el); });
            if(!isNull(trim(rowData.src_desc_clob))) me.dataDef["_pgm_data"]["doc_data_src"].content = doc_data_src_content;
            me.pageObj["doc_data_src"] = new gfnComponent( me.pageid, "doc_data_src", me.dataDef["_pgm_data"]["doc_data_src"], me.fnEH, me);  
        }
        var pay_desc;
        try {
            pay_desc = JSON.parse( rowData.pay_desc_clob );
        } catch {
            pay_desc = null 
        }  
        if(!isNull(trim(pay_desc))) {
            var doc_data_pay_content = [];
            pay_desc = sort(pay_desc,"sort_seq");
            pay_desc.forEach(el=>{ if(el.entry_yn=='Y') doc_data_pay_content.push(el); });
            if(!isNull(trim(rowData.pay_desc_clob))) me.dataDef["_pgm_data"]["doc_data_pay"].content = doc_data_pay_content;
            me.pageObj["doc_data_pay"] = new gfnComponent( me.pageid, "doc_data_pay", me.dataDef["_pgm_data"]["doc_data_pay"], me.fnEH, me);  
        } 
        var pjt_desc;
        try {
            pjt_desc = JSON.parse( rowData.pjt_desc_clob );
        } catch {
            pjt_desc = null 
        }  
        if(!isNull(trim(pjt_desc))) {
            var doc_data_pjt_content = [];
            pjt_desc = sort(pjt_desc,"sort_seq");
            pjt_desc.forEach(el=>{ if(el.entry_yn=='Y') doc_data_pjt_content.push(el); });
            if(!isNull(trim(rowData.pjt_desc_clob))) me.dataDef["_pgm_data"]["doc_data_pjt"].content = doc_data_pjt_content;
            me.pageObj["doc_data_pjt"] = new gfnComponent( me.pageid, "doc_data_pjt", me.dataDef["_pgm_data"]["doc_data_pjt"], me.fnEH, me);  
        } 
        me.fnReadInit(); 
    }

    
    //Variant에 따라 구분과 결재선 표시변경
    me.fnSetVariant=function() { 
        var template_form = me.pageObj.doc_template; 
        var amt_tp = template_form.getVal("amt_tp");
        if(isNull(amt_tp) || amt_tp=="N") { //variant없을때는 전결, 합의선표시 
            me.page.find("[colgrp='구분1']").hide(); me.page.find("[colgrp='합의'] button").show();
            me.page.find("[colgrp='구분2']").next().hide().next().hide().next().hide(); me.page.find("[colgrp='구분2']").hide();
            me.page.find("[colgrp='구분3']").next().hide().next().hide().next().hide(); me.page.find("[colgrp='구분3']").hide();
            me.page.find("[colgrp='구분4']").next().hide().next().hide().next().hide(); me.page.find("[colgrp='구분4']").hide();
            me.page.find("[colid='budget_in']").hide(); me.page.find("[colid='budget_out']").hide(); 
            me.page.find("[colid='amt_from']").hide(); me.page.find("[colid='amt_to']").hide();
            me.page.find("[colid='amt_from_1']").hide(); me.page.find("[colid='amt_to_1']").hide();
            me.page.find("[colid='amt_from_2']").hide(); me.page.find("[colid='amt_to_2']").hide();   
            me.page.find("[colid='amt_from_3']").hide(); me.page.find("[colid='amt_to_3']").hide();           
            me.pageObj.mst.setVal("budget_in","예산범위내"); 
            me.pageObj.mst.setVal("budget_out","예산범위초과"); 
        } else if(amt_tp=="AMT") { //금액구간은 구분1~3개방 
            me.page.find("[colgrp='구분1']").css("width","17em").show(); me.page.find("[colgrp='합의'] button").hide();        
            me.page.find("[colgrp='구분2']").css("width","17em").next().show().next().show().next().show(); me.page.find("[colgrp='구분2']").show();
            me.page.find("[colgrp='구분3']").css("width","17em").next().show().next().show().next().show(); me.page.find("[colgrp='구분3']").show();
            me.page.find("[colgrp='구분4']").css("width","17em").next().show().next().show().next().show(); me.page.find("[colgrp='구분4']").show();
            me.page.find("[colid='budget_in']").hide(); me.page.find("[colid='budget_out']").hide();
            me.page.find("[colid='amt_from']").show(); me.page.find("[colid='amt_to']").show();
            me.page.find("[colid='amt_from_1']").show(); me.page.find("[colid='amt_to_1']").show();
            me.page.find("[colid='amt_from_2']").show(); me.page.find("[colid='amt_to_2']").show();
            me.page.find("[colid='amt_from_3']").show(); me.page.find("[colid='amt_to_3']").show();
            me.pageObj.mst.setVal("budget_in","예산범위내"); 
            me.pageObj.mst.setVal("budget_out","예산범위초과");       
        } else if(amt_tp=="BUDGET") { //예산구간은 구분1~2개방 
            me.page.find("[colgrp='구분1']").css("width","12em").show(); me.page.find("[colgrp='합의'] button").hide();        
            me.page.find("[colgrp='구분2']").css("width","12em").next().show().next().show().next().show(); me.page.find("[colgrp='구분2']").show();
            me.page.find("[colgrp='구분3']").css("width","12em").next().hide().next().hide().next().hide(); me.page.find("[colgrp='구분3']").hide();
            me.page.find("[colgrp='구분4']").css("width","12em").next().hide().next().hide().next().hide(); me.page.find("[colgrp='구분4']").hide();
            me.page.find("[colid='budget_in']").show(); me.page.find("[colid='budget_out']").show();
            me.page.find("[colid='amt_from']").hide(); me.page.find("[colid='amt_to']").hide();
            me.page.find("[colid='amt_from_1']").hide(); me.page.find("[colid='amt_to_1']").hide();
            me.page.find("[colid='amt_from_2']").hide(); me.page.find("[colid='amt_to_2']").hide();
            me.page.find("[colid='amt_from_3']").hide(); me.page.find("[colid='amt_to_3']").hide();
            me.pageObj.mst.setVal("budget_in","예산범위내"); 
            me.pageObj.mst.setVal("budget_out","예산범위초과");          
        } 
    }
    
    //init: 문서초기화
    me.fnReadInit=function() {
        //사용자정보를 가져옴
        //작성부서에 맞는지 점검함 
        //기본결재선을 세팅함
        var args = me.pageObj.mst.exportData()[0]; 
        args.co_cd = me.co_cd;
        args.div_cd = me.doc_template.div_cd;
        var invar = JSON.stringify(args);
        gfnTx(appid+"."+pgmid,"readInit",{INVAR:invar},function(OUTVAR){
            //console.log(OUTVAR);
            if(OUTVAR.rtnCd=="OK") {
                var rtn = OUTVAR.mst[0];
                //사용자정보 가져옴 
                me.docid = OUTVAR.docid;
                me.pageObj.mst.setVal("docid",OUTVAR.docid);
                me.pageObj.mst.setVal("doc_no",rtn.doc_no);
                me.pageObj.mst.setVal("reg_dept",rtn.dept_nm);
                me.pageObj.mst.setVal("reg_dept",rtn.dept_nm);
                me.pageObj.mst.setVal("doc_co_cd",rtn.co_cd);
                me.pageObj.mst.setVal("doc_dept_cd",rtn.dept_cd);
                me.pageObj.mst.setVal("reg_co", gfnCdNm("DZ_CO_CD",rtn.co_cd,"nm"));
                me.pageObj.mst.setVal("reg_emp_info",rtn.kor_nm + ' ' + rtn.hcls_nm);
                me.pageObj.mst.setVal("reg_usid",rtn.usid);
                me.pageObj.mst.setVal("emp_cd",rtn.emp_cd); 
                //작성부서에 맞는지 점검함
                if(rtn.chk_div_cd=='N') {
                    gfnAlert("문서 템플릿 작성부서 확인","작성자의 조직(또는 상위조직)이 문서템플릿의 작성부서에 속해있지 않습니다!");
                } else {
                    me.fnAutoRcv();
                }
                //복사인 경우 데이터 IMPORT진행
                if(!isNull(gParam.copyDoc)) {
                    var mst = gParam.copyDoc.pageObj.mst.exportData()[0];
                    me.pageObj.mst.setVal("title",mst.title);
                    var copyContent = tinyMCE.get(gParam.copyDoc.pageid+"mytextarea").getContent();
                    tinyMCE.get(me.pageid+"mytextarea").setContent(copyContent);
                    var doc_data_src = gParam.copyDoc.pageObj.doc_data_src.exportData();
                    me.pageObj.doc_data_src.importData(doc_data_src);
                    var doc_data_pay = gParam.copyDoc.pageObj.doc_data_pay.exportData();
                    me.pageObj.doc_data_pay.importData(doc_data_pay);
                    var doc_data_pjt = gParam.copyDoc.pageObj.doc_data_pjt.exportData();
                    me.pageObj.doc_data_pjt.importData(doc_data_pjt);
                    var doc_plas_frm = gParam.copyDoc.pageObj.doc_plas_frm.exportData();
                    me.pageObj.doc_plas_frm.importData(doc_plas_frm);
                    var doc_plas_chit = gParam.copyDoc.pageObj.doc_plas_chit.exportData();
                    me.pageObj.doc_plas_chit.importData(doc_plas_chit); 
                }
            } else {
                gfnAlert("초기화 오류",OUTVAR.rtnMsg);
            }
        }); 
    } 
    
    //결재선 순서변경
    me.fnSortOrderSet=function(comp,step) {
        var data = me.pageObj[comp].exportData(); //전체 데이터배열
        var curRow = me.pageObj[comp].selectedRow(); //시작요소
        var from = me.pageObj[comp].getRowIndex(curRow); //시작요소의 순번
        var cnt = me.pageObj[comp].selectedRows().length; //이동건수
        if(cnt < 1) return;
        var mvitems = data.splice(from,cnt); //이동할 요소들을 잘라내고
        var to = from+step; 
        if(to < 0 || to > data.length) {
            gfnStatus("순서변경 확인","더이상 이동할 수 없습니다.");
            return;
        }
        //OBJ flat()이 안되어서 splice를 사용할 수 없음. data.splice(to,0,mvitems); data.flat();
        var dataT = data.splice(to); //꼬리먼저 자르고
        data = data.concat(mvitems).concat(dataT); 
        me.pageObj[comp].importData(data);
        var rows = [to+""];
        for(var i=1; i < cnt; i++) rows.push((to+i)+"");  
        me.pageObj[comp].selectRows(rows); 
    } 
    
    //문서내용에 맞는 결재선 가져오기
    me.fnAutoRcv=function() {
        //작성자/부서정보+합의부서 전체 => 작성자로부터 최상위 결재권자, 합의부서장 
        var args = me.pageObj["mst"].exportData()[0];  
        
        //수신,참조부서 추가
        var doc_template = me.pageObj.doc_template.exportData()[0];
        var cc_line = [];
        if(!isNull(doc_template.cc_line1)) cc_line.push(doc_template.cc_line1); 
        if(!isNull(doc_template.cc_line2)) cc_line.push(doc_template.cc_line2); 
        if(!isNull(doc_template.cc_line3)) cc_line.push(doc_template.cc_line3); 
        if(!isNull(doc_template.cc_line4)) cc_line.push(doc_template.cc_line4); 

        //입력된금액, 잔여예산 => 문서금액 계산 : 템플릿과 비교 - 결재선 가져오기
        var doc_template = me.pageObj.doc_template.exportData()[0];
        var amt_tp = nvl(doc_template.amt_tp,"N"); 
        if(amt_tp=="N") {            //variant 없으면 
            args.amt_tp = "N";
            args.ap_until = doc_template.ap_line;
            args.co_line = me.doc_template.co_line;
            args.rpt_line = me.doc_template.rpt_line;
        } else if (amt_tp=="AMT") {  //금액구간대이면
            args.amt_tp = "AMT";
            var doc_data_src = me.pageObj.doc_data_src.exportData(); 
            var amt = 0;
            doc_data_src.forEach(el=>amt+=toNum(el.amt)); //합계계산
            if(doc_template.amt_from <= amt && amt <= doc_template.amt_to) {
                args.ap_until = doc_template.ap_line;
                args.co_line = me.doc_template.co_line;
                args.rpt_line = me.doc_template.rpt_line;
            } else if(doc_template.amt_from_1 <= amt && amt <= doc_template.amt_to_1 ) { 
                args.ap_until = doc_template.ap_line_1;
                args.co_line  = me.doc_template.co_line_1;
                args.rpt_line = me.doc_template.rpt_line_1;
            } else if(doc_template.amt_from_2 <= amt && amt <= doc_template.amt_to_2 ) { 
                args.ap_until = doc_template.ap_line_2;
                args.co_line = me.doc_template.co_line_2;
                args.rpt_line = me.doc_template.rpt_line_2;
            } else if(doc_template.amt_from_3 <= amt && amt <= doc_template.amt_to_3 ) { 
                args.ap_until = doc_template.ap_line_3;
                args.co_line = me.doc_template.co_line_3;
                args.rpt_line = me.doc_template.rpt_line_3;
            } else {
                gfnStatus("결재선 자동설정 확인","원천Data가 입력되지 않았거나 문서템플릿(전결규정) 금액구간에서 벗어납니다.");
                args.ap_until = nvl(doc_template.ap_line_3,nvl(doc_template.ap_line_2,nvl(doc_template.ap_line_1,doc_template.ap_line)));
                args.co_line = me.doc_template.co_line+""+me.doc_template.co_line_1+""+me.doc_template.co_line_2+""+me.doc_template.co_line_3; 
            }
        } else if (amt_tp=="BUDGET") {  //예산점검이면 상위계정/상위부서로 올라가야 하므로 쿼리에서 처리해야함 : PILOT오픈시는 템플릿에 지정된 0번값 사용
            args.amt_tp = "BUDGET";
            args.ap_until = me.doc_template.ap_line;
            args.co_line  = me.doc_template.co_line; 
            args.rpt_line = me.doc_template.rpt_line;
        } 
        
        //console.log(args);
        var invar = JSON.stringify(args);
        gfnTx(appid+"."+pgmid,"searchAPline",{INVAR:invar},function(OUTVAR){
            //console.log(OUTVAR);
            if(OUTVAR.rtnCd=="OK") {  
                me.pageObj.rcv.reset(); 
                var rowNext = 9;
                var cur_ap  = "A";
                OUTVAR.apline.forEach((rtn,idx)=>{
                    if(rtn.rcv_tp =="A"||rtn.rcv_tp =="B") { //문서작성자 본인과 합의선은 무조건 추가 
                        var row = {};
                        row.rcv_dept_nm = rtn.dept_nm; 
                        row.rcv_emp_cd  = rtn.emp_cd;
                        row.rcv_emp_nm  = rtn.kor_nm;
                        row.rcv_hcls_nm = rtn.hcls_nm; 
                        row.rcv_hrsp_nm = rtn.hrsp_nm; 
                        row.rcv_tp      = rtn.rcv_tp; //lv==0?"A":(rtn.lv==9?"B":"C");
                        row.rcv_usid    = rtn.usid;  
                        rowNext = me.pageObj.rcv.addRow(row, rowNext);  
                    } else if(rtn.rcv_tp =="C") {
/* 직급구분 -  A	자가승인 >  B	팀 > C	본부 > D	실 > E	사업부 > F	부문 > G	CEO */
                        var this_ap = "B"; //팀원이건 팀장이건 rcv_tp='C'로 들어오면 승인대상 
                        if( rtn.hrsp_nm=="본부장" || rtn.hrsp_nm=="이사" ) this_ap = "C";
                        else if( rtn.hrsp_nm=="실장" ) this_ap = "D";
                        else if( rtn.hrsp_nm=="사업부장" ) this_ap = "E";
                        else if( rtn.hrsp_nm=="부문장" ) this_ap = "F";
                        else if( rtn.hrsp_nm=="대표이사" || rtn.hrsp_nm=="CEO" || rtn.hrsp_nm=="부회장" ) this_ap = "G";
                        if( cur_ap < this_ap ) cur_ap = this_ap;
                        if( cur_ap <= args.ap_until ) { //조건에 따라 판단된 결재선까지만 추가  
                            var row = {};
                            row.rcv_dept_nm = rtn.dept_nm; 
                            row.rcv_emp_cd  = rtn.emp_cd;
                            row.rcv_emp_nm  = rtn.kor_nm;
                            row.rcv_hcls_nm = rtn.hcls_nm; 
                            row.rcv_hrsp_nm = rtn.hrsp_nm; 
                            row.rcv_tp      = rtn.rcv_tp; //lv==0?"A":(rtn.lv==9?"B":"C");
                            row.rcv_usid    = rtn.usid;  
                            rowNext = me.pageObj.rcv.addRow(row, rowNext);  
                        }
                        if( args.rpt_line == this_ap ) { //보고선 있는 경우 참조선에 보고자 추가
                            var row = {};
                            row.rcv_dept_nm = rtn.dept_nm; 
                            row.rcv_emp_cd  = rtn.emp_cd;
                            row.rcv_emp_nm  = rtn.kor_nm;
                            row.rcv_hcls_nm = rtn.hcls_nm; 
                            row.rcv_hrsp_nm = rtn.hrsp_nm; 
                            row.rcv_tp      = "RPT"; 
                            row.rcv_usid    = rtn.usid;  
                            me.pageObj.rcv_cc.addRow(row);  
                        } 
                    }  
                }); 
                
                //수신/참조부서 체크 
                if( cc_line.length > 0 ) {  //체크할게 있는지 없는지 판단
                    var rcv_cc = me.pageObj.rcv_cc.exportData();
                    cc_line.forEach(cc_cdnm=>{
                        var cc_dept_nm = cc_cdnm; //cc_cdnm.split(":")[1];
                        if( !rcv_cc.some(el=> el.rcv_dept_nm==cc_dept_nm ) ) {
                            //gfnStatus("수신,필수참조자 확인", cc_dept_nm + " 부서의 담당자가 수신 또는 참조되어야 합니다.");
                            gfnAlert("수신,필수참조자 확인", cc_dept_nm + " 부서의 담당자가 수신 또는 참조되어야 합니다.<br>적요 : "+doc_template.remark);
                        }
                    })
                } 
                
                // if(doc_template.doc_template_id == "4-70-036"){
                //     console.log("하잇!");
                //     var row = {};
                //     row.rcv_dept_nm = "IT팀";
                //     row.rcv_emp_cd  = "210902";
                //     row.rcv_emp_nm  = "정주리";
                //     row.rcv_hcls_nm = "사원";
                //     row.rcv_hrsp_nm = "팀원";
                //     row.rcv_tp      = "BC"; 
                //     row.rcv_usid    = 'jjr'
                //     me.pageObj.rcv_cc.addRow(row);  
                // }
    
                
            } else {
                gfnAlert("결재선 조회 오류",OUTVAR.rtnMsg);
            }
        });   
    }
    
    //save:저장 
    me.fnSave=function() {
        if( !me.pageObj["mst"].chkValid() ) return; 
        //var content = tinymce.activeEditor.getContent();
        //console.log(content); 
        //문서안에 이미지는 CLOB으로 변환한다.
        var ed = $(pageid+"mytextarea_ifr")
        ed.contents().find("img").each(function(idx,el){
            el.src = getDataUrl(el);
        });
        me.content = tinymce.activeEditor.getContent();
        //console.log(content); 
        //추가 Validation : 템플릿에 맞춰 결재선/합의선/첨부파일/참조문서 Validation 
        
        var args = me.pageObj["mst"].exportData()[0]; 
        args.docid   = me.docid;
        args.content = me.content;
        args.rcv     = me.pageObj["rcv"].exportData();
        args.rcv     = args.rcv.concat( me.pageObj["rcv_cc"].exportData() );
        args.attach  = me.pageObj["attach"].exportData();
        args.ref_doc = me.pageObj["ref_doc"].exportData(); 
        args.doc_data_src = me.pageObj["doc_data_src"].exportData(); 
        args.doc_data_pay = me.pageObj["doc_data_pay"].exportData(); 
        args.doc_data_pjt = me.pageObj["doc_data_pjt"].exportData(); 
        args.doc_plas_frm = me.pageObj["doc_plas_frm"].exportData();  
        args.doc_plas_chit = me.pageObj["doc_plas_chit"].exportData();  
        //console.log(args);
        var invar = JSON.stringify(args);
        gfnTx(appid+"."+pgmid,"save",{INVAR:invar},function(OUTVAR){
            //console.log(OUTVAR);
            if(OUTVAR.rtnCd=="OK") {
                gfnAlert("저장성공","신규 문서가 저장되었습니다."); 
                //신규창을 닫고 문서수정/조회창을 연다.me.fnSearch();
                //if(typeof(me.fnCallback)=='function') me.fnCallback(true);
                gMDI.closeTab(me.pageid);
                gfnShowPlasDoc( me.docid, "framepage" );
                console.log("open");
            } else {
                gfnAlert("저장오류",OUTVAR.rtnMsg);
            }
        });  
    }

    //close:닫기 
    me.fnClose=function() {
        //tinyMCE.activeEditor.setContent(me.content);
        if(typeof(me.fnCallback)=='function') me.fnCallback(true);
        gMDI.closeTab(me.pageid);
    }


/*-- SCRIPT autogen ---------------------------------------------------- */        
if(typeof(me.fnInit)=='function') me.fnInit();
});

</script>