<link rel="stylesheet" href="/src/aweportal.css">
<link rel="stylesheet" href="/src/awecomponent.css">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport"
        content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="format-detection" content="telephone=no" />


    <title>LF Networks ITSM</title>
    <script src="https://kit.fontawesome.com/b8597271c4.js" crossorigin="anonymous"></script>

    <link href="https://fonts.googleapis.com/css2?family=Gothic+A1:wght@400;500;600;700;800;900&display=swap"
        rel="stylesheet">



    <!-- <style>
        * {
            margin: 0;
            padding: 0;
            list-style: none;
        }

        body {

            background-color: #cccccc;
            /* font-family: 'Gothic A1', sans-serif; */
        }



        /*로고사이드 애니메이션*/
        .link {
            width: 200px;
            height: 200px;
            display: inline-block;
            font: 300 1.55rem/1.4 "Josefin Sans";
            text-transform: uppercase;
            letter-spacing: 0.1175em;
            word-spacing: 0.3em;
        }

        .link__svg {
            width: 100%;
            height: auto;
            transform-box: fill-box;
            fill: white;
            stroke: white;
            stroke-width: 0.05em;
            stroke-linecap: round;
            stroke-linejoin: round;
        }

        .link__cloud {
            transform-origin: 50% 50%;
            -webkit-animation: rotate normal infinite 60s linear;
            animation: rotate normal infinite 60s linear;
            fill: rgba(255, 255, 255, 0.15);
        }

        .link__face,
        .link__arrow {
            transform-origin: 50% 50%;
            transition: transform 0.15s cubic-bezier(0.32, 0, 0.67, 0);
        }

        .link:hover .link__face,
        .link:hover .link__arrow {
            transform: scale(1.1);
            transition: transform 0.3s cubic-bezier(0.33, 1, 0.68, 1);
        }

        .link__arrow {
            stroke-width: 0.075em;
        }

        .link__text {
            -webkit-animation: rotateReverse normal infinite 20s linear;
            animation: rotateReverse normal infinite 20s linear;
            transform-origin: 50% 50%;
        }


        .link__face {
            -webkit-animation: rotate normal infinite 20s linear;
            animation: rotate normal infinite 20s linear;
            transform-origin: 50% 50%;
        }

        .link:hover .link__text {
            -webkit-animation-play-state: paused;
            animation-play-state: paused;
        }

        .link--alt {
            font-size: 1.15rem;
            letter-spacing: 0;
            word-spacing: 0;
        }

        @-webkit-keyframes rotate {
            to {
                transform: rotate(360deg);
            }
        }

        @keyframes rotate {
            to {
                transform: rotate(360deg);
            }
        }

        @-webkit-keyframes rotateReverse {
            to {
                transform: rotate(-360deg);
            }
        }

        @keyframes rotateReverse {
            to {
                transform: rotate(-360deg);
            }
        }


        /*로고사이드 애니메이션 끝*/

        @keyframes blink-effect {
            50% {
                opacity: 0;
            }
        }

        .fa-comment-dots {
            animation: blink-effect 1s step-end infinite;
        }

        /*상단 메뉴 */
        @media(min-width:768px) {

            #frameGNB {
                flex: 0 0 auto;
                width: 100%;
                position: relative;
                padding-bottom: 0;
             
            }


            .mainLogo {
                text-decoration: none;
                color: navy;
                font-weight: bold;
            }

            .mainLogo p {
                font-size: 30px;
                display: inline;
                margin-top: 20px;

            }

            #menuIcon {
                font-size: 20px;
                cursor: pointer;
                margin: 21px 10px 0 10px;
                color: #ffffff;

                background-color: #2b4cbc;
                border-radius: 50%;
                padding: 10px 12px;
                transition: all 0.3s;

            }



            .gnb {
                overflow: hidden;
                background-image: linear-gradient(to right, #58aafc, #2b4cbc);
                height: 80px;
                transition: margin-left .5s;

            }

            .menu {
                overflow: hidden;
                background-image: linear-gradient(to right, #58aafc, #2b4cbc);
                height: 80px;
                width: 100%;

            }

            .menu button {
                float: left;
                color: black;
                text-align: center;
                text-decoration: none;
                font-size: 30px;

            }


            .menu-right {
                float: right;
                background-color: transparent;
                color: white;
                width: 300px;
                height: 80%;

                background-color: rgba(0, 0, 0, 0.1);
                border-top-left-radius: 20px;
                border-top-right-radius: 20px;
                border-bottom-left-radius: 20px;
                border-bottom-right-radius: 20px;
                margin-top: 9px;
                display: flex;
                justify-content: center;
                align-items: center;

            }

            .menu-right button {
                color: #a0d2e9;


            }

            .search {
                border: none;
                background-color: transparent;
                transition: all 0.5s;
                padding-left: 5px;
                padding-right: 30px;

            }

            .search:hover {
                cursor: pointer;
                color: #0e2d87;
            }

            .alarm {
                border: none;
                background-color: transparent;
                transition: all 0.5s;
                padding-right: 20px;
                position: relative;
            }

            .alarm>span {
                position: absolute;
                top: 3px;
                right: 7px;
                font-size: 15px;
            }

            .alarm:hover {
                cursor: pointer;
                color: #0e2d87;
            }

            .user {
                border: none;
                background-color: transparent;
                transition: all 0.5s;
                padding-left: 10px;
            }

            .user:hover {
                cursor: pointer;
                color: #0e2d87;
            }

            .textSearch {
                float: left;

                height: 3em;
                width: 20em;
                border: 2px solid #cccccc;
                border-radius: 8px;
                padding: 5px;
            }

            /*사이드 메뉴 네비 바*/

            #mySidenav {
                height: 100%;
                width: 0;
                position: fixed;
                z-index: 2;
                top: 0;
                left: 0;
                background-color: #0e2d87;
                background-image: linear-gradient(180deg, #0e2d87, #78c1f5);
                overflow-x: hidden;
                transition: 0.5s;
                padding-top: 60px;
                -ms-overflow-style: none;
                /* for Internet Explorer, Edge */
                scrollbar-width: none;
                /* for Firefox */
                overflow-y: scroll;


            }

            #mySidenav::-webkit-scrollbar {
                display: none;

            }


            .logoside {

                width: 100%;
                height: 200px;
                display: flex;
                align-items: center;
                justify-content: center;
                margin-bottom: 30px;


            }

            .logoside p {

                font-size: 30px;
                color: #a0d2e9;
                background-color: navy;
                padding: 10px 20px;
                border-top-left-radius: 20px;
                border-top-right-radius: 20px;
                border-bottom-left-radius: 20px;
                border-bottom-right-radius: 20px;
            }



            #mySidenav a {
                position: absolute;
                text-decoration: none;


            }

            #mySidenav a:hover {
                color: navy;
            }

            #mySidenav .closebtn {
                position: absolute;
                top: 0;
                right: 25px;
                font-size: 50px;
                margin-left: 50px;
                border: none;
                color: #ffffff;

            }



            /*탭라인*/

            #frameMain {

                transition: margin-left .5s;
                /* overflow-y: scroll; */
            }




            /* #frameMain::-webkit-scrollbar {
                display: none;

            } */

            #tabline {
                height: 65px;
                background-color: #fcfefe;
            }

            nav {
                transition: margin-left .5s;
            }

            /*콘텐츠박스*/

            #main {
                height: auto;
                background-color: white;
                border: 2px dashed #0e2d87;
                transition: margin-left .5s;
                padding: 16px;
            }

            #undercopy {


                background-color: #cccccc;
                text-align: center;
                font-weight: normal;
                width: 100%;
            }


            #frameHome {
                transition: margin-left .5s;
                display: block;
            }
        }


        /************************모바일 사이즈************************/

        @media(max-width:768px) {

            /*상단 메뉴 */

            #frameGNB {
                padding-bottom: 0;
                position: relative;
            }

            .gnb {
                background-image: linear-gradient(to right, #58aafc, #2b4cbc);
                transition: margin-left .5s;
            }


            .menu {
                overflow: hidden;
                background-image: linear-gradient(to right, #58aafc, #2b4cbc);
                height: 80px;
                width: 100%;

            }

            .mainLogo {
                float: none;
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                font-size: 30px;
                color: navy;
                text-decoration: none;
                font-weight: bold;
            }

            #menuIcon {
                font-size: 20px;
                cursor: pointer;
                margin: 21px 10px 0 10px;
                color: #ffffff;

                background-color: #2b4cbc;
                border-radius: 50%;
                padding: 10px 12px;
                transition: all 0.3s;

            }





            .menu button {
                float: left;
                color: black;
                text-align: center;
                padding: 14px 6px;
                text-decoration: none;
                font-size: 30px;
                margin-top: 5px;
            }

            .menu-right {
                float: right;
                color: white;

            }

            .menu-right button {
                color: #a0d2e9;
            }

            .profile {
                position: relative;
                width: 60px;
                height: 60px;
                overflow: hidden;
                cursor: pointer;
            }

            .search {
                display: none;
                border: none;
                background-color: transparent;
                transition: all 0.5s;

            }

            .search:hover {
                cursor: pointer;
                color: #0e2d87;
            }

            .textSearch {
                display: none;
                float: left;
                margin-top: 20px;
                height: 30px;
                width: 200px;
                border: 2px solid #cccccc;
                border-radius: 8px;
                padding: 5px;
            }


            .alarm {
                border: none;
                background-color: transparent;
                transition: all 0.5s;
                position: relative;
                margin-right: 10px;
            }

            .alarm>span {
                position: absolute;
                top: 17px;
                right: -7px;
                font-size: 15px;
            }

            .alarm:hover {
                cursor: pointer;
                color: #0e2d87;
            }

            .user {
                border: none;
                background-color: transparent;
                transition: all 0.5s;


            }


            .useSC:hover {
                cursor: pointer;
                color: #0e2d87;
            }




            /*사이드 메뉴 네비 바*/

            #mySidenav {
                height: 100%;
                width: 0;
                position: fixed;
                z-index: 10;
                top: 0;
                left: 0;
                background-color: #0e2d87;
                background-image: linear-gradient(180deg, #0e2d87, #78c1f5);
                overflow-x: hidden;
                transition: 0.5s;
                padding-top: 60px;
                -ms-overflow-style: none;
                /* for Internet Explorer, Edge */
                scrollbar-width: none;
                /* for Firefox */
                overflow-y: scroll;


            }

            /* div::-webkit-scrollbar {
                display: none;

            } */

            #mySidenav a {
                position: absolute;
                text-decoration: none;

            }

            #mySidenav a:hover {
                color: navy;
            }

            #mySidenav .closebtn {
                position: absolute;
                top: 0;
                right: 25px;
                font-size: 36px;
                margin-left: 50px;
                border: none;
                color: #ffffff;

            }


            .logoside {

                width: 100%;
                height: 200px;
                display: flex;
                align-items: center;
                justify-content: center;
                margin-bottom: 30px;

            }

            .logoside p {

                font-size: 30px;
                color: #a0d2e9;
                background-color: navy;
                padding: 10px 20px;
                border-top-left-radius: 20px;
                border-top-right-radius: 20px;
                border-bottom-left-radius: 20px;
                border-bottom-right-radius: 20px;
            }


            /*콘텐츠박스*/

            #main {
                height: 800px;

                background-color: white;
                border: 2px dashed #0e2d87;

                transition: margin-left .5s;
                padding: 16px;
            }


            /*푸터*/

            footer {
                background-color: #aaaaaa;
                color: white;
                width: 100%;
                height: 30px;
                display: flex;
                align-items: center;
                justify-content: flex-start;
                transition: margin-left .5s;

            }

            footer p {
                margin-left: 10px;
            }

            .action {
                position: fixed;
                top: 20px;
                right: 30px;
            }


        }
    </style> -->

</head>

<body id="body">

    <header id="frameGNB">

        <div class="gnb">

            <nav class="menu">

                <!-- <button class="apps"><i class="fas fa-bars"></i><span></span></button> -->
                <i class="fas fa-bars" id="menuIcon" onclick="openNav()"></i>

                <a href="#" class="mainLogo">
                    <p>Logo</p>
                </a>

                <div class="menu-right">

                  
                    <!-- <input type="text" placeholder="Search.." class="textSearch"> -->
                    <button class="search"><i class="fas fa-search"></i></button>

                    <!-- <button class="apps"><i class="fas fa-th"></i></button> -->

                    <button class="alarm" onclick="gMDI.openPage('manageAlert', '알림 목록');">
                        <i class="far fa-comment"></i>
                        <span></span>
                    </button>

                    <button class="user"><i class="fas fa-user-circle"></i></button>

                </div>

            </nav>
        </div>


        <div class="user" onclick="menuToggle();">
        </div>

        <div class="userInfo hidden">

            <ul class="userInfo-item">

                <div class="p-2">
                    <div class="media">

                        <div class="media-body">

                                <p id="userid" class="d-block fs-8 link-secondary">ID</p>
                                
                                <span class="d-flex align-items-center">
<!-- 
                                    <div class="media-head me-2">

                                        <div class="avatar avatar-primary avatar-sm avatar-rounded">
                                         
                                            <span id="usernicknm" class="initial-wrap">AJ</span>

                                        </div>

                                    </div> -->

                                    <span id="usernm">usernm</span><p>님 환영합니다 ^^</p>
                                   
                                </span>

                        </div>
                    </div>
                </div>
    
              <li class="profile"><i class="fas fa-user-edit"></i>   프로필 관리</li>
                <li class="changePwd"><i class="fas fa-pencil-alt"></i>비밀번호변경</li>
                <!-- <li class="withdrawlUser">회원탈퇴</li> -->
                <li class="logout"><i class="fas fa-sign-out-alt"></i>로그아웃</li>

            </ul>
        </div>

    </header>




    <div id="frameset">

        <!---사이드 네비바----->

        <div id="mySidenav">

            <a href="javascript:void(0)" class="closebtn" id="closebtn" onclick="closeNav()">&times;</a>

            <div class="logoside">

                <!----로고 애니메이션----->

                <a href="#" class="link">

                    <svg viewBox='0 0 200 200' width='200' height='200' xmlns='http://www.w3.org/2000/svg'
                        class="link__svg" aria-labelledby="link1-title link1-desc">

                        <path id="link-circle" class="link__path" d="M 20, 100 a 80,80 0 1,1 160,0 a 80,80 0 1,1 -160,0"
                            stroke="none" fill="none" />

                        <path class="link__cloud" class="link__path"
                            d="M 35, 100 a 65,65 0 1,1 130,0 a 65,65 0 1,1 -130,0" stroke="none" fill="none" />

                        <g class="link__face">
                            <ellipse class='' cx='100' cy='100' rx='45' ry='45' stroke-dasharray="5,5" fill="none" />
                        </g>

                        <path class="link__arrow" d="M 75 100 L 125 100 L 110 85 M 125 100 L 110 115" fill="none" />

                        <text class="link__text">
                            <textPath href="#link-circle" stroke="none">
                                Put the lf logo here
                            </textPath>
                        </text>

                    </svg>

                </a>

            </div>


            <!------앱버튼------->
            <nav id="frameApp" style="position:absolute; width: auto; ">
                <div class="appMenu">
                    <ul class="APP" style="width:300px"></ul>
                    <!--하위메뉴 사용자랑 포털들-->
                    <div class="PGM" style="display: none;"></div>
                </div>
            </nav>

        </div>

        <!----탭밑에 컨텐츠 화면들----->


        <main id="frameMain">
            <div id="frameTab"></div>
        </main>
    </div>

    <!----푸터---->
 
    <footer id="undercopy">

        <p>copyright &copy; 2022 LF networks. All Right Reserved</p>
    </footer>

    <!-- status -->
    <div id="status">
        <ul></ul>
    </div>


    <!-- alert -->
    <div id="alert" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">alert 창입니다.</h5>
                <button class="layerBtn btn-close" data-bs-dismiss="modal" aria-label="Close"
                    onclick="layerClickHandler('alert')"></button>
            </div>
            <div class="modal-body">
                <p>alert 내용입니다.</p>
            </div>
            <div class="modal-footer">
                <button class="layerBtn btn btn-primary" onclick="layerClickHandler('alert')">확인</button>
            </div>
        </div>
    </div>

    <!-- progress -->
    <div id="progress" class="modal">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Progress 창입니다.</h5>
                </div>
                <div class="modal-body">
                    <p>Progress 내용입니다.</p>
                    <div class="progress">
                        <div class="progress-bar progress-bar-striped progress-bar-animated" style="width: 100%;"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- popup -->
    <div id="popup" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">popup 창입니다.</h5>
                <button class="layerBtn btn-close" data-bs-dismiss="modal" aria-label="Close"
                    onclick="layerClickHandler('popup')"></button>
            </div>
            <div class="modal-body">
                <p>popup 내용입니다.</p>
            </div>
        </div>
    </div>
    <search id="frameSearch" class="aweSearch hidden">
    </search>

</body>


<script>
    function menuToggle() {
        const toggleMenu = document.querySelector(".menu");
        toggleMenu.classList.toggle("active");
       

    }
</script>


<script>

    /*사이드 메뉴 열기*/

    function openNav() {

        document.getElementById("mySidenav").style.width = "300px";

        document.getElementById("menuIcon").style.color = "transparent";
        document.getElementById("menuIcon").style.backgroundColor = "transparent"
        document.getElementById("closebtn").style.color = "white";


        /*모바일 767px일 경우 */

        if (window.outerWidth < 767) {
            document.querySelector("#mySidenav").style.zIndex = 15;
            document.getElementById("frameMain").style.marginLeft = "0";
            document.querySelector(".gnb").style.marginLeft = "0";
            document.getElementById("frameMain").style.opacity = "0.3";
            document.querySelector("nav").style.opacity = "0.3";
        }

        /*데스크탑일 경우*/

        else {
            document.getElementById("frameMain").style.marginLeft = "300px";
            document.getElementById("undercopy").style.marginLeft = "300px";
            document.querySelector(".gnb").style.marginLeft = "300px";
        }
    }

    /*사이드 메뉴 닫기*/

    function closeNav() {

        document.getElementById("mySidenav").style.width = "0";
        document.getElementById("frameMain").style.marginLeft = "0";
        document.querySelector(".gnb").style.marginLeft = "0";
        document.getElementById("undercopy").style.marginLeft = "0";

        document.getElementById("frameMain").style.opacity = "1";
        document.querySelector("nav").style.opacity = "1";


        document.getElementById("menuIcon").style.color = "white";
        document.getElementById("menuIcon").style.backgroundColor = "#2b4cbc"
        document.getElementById("closebtn").style.color = "transparent";


        $(".PGM").slideUp();
        $(".app").removeClass("selected");

    }

    function newPagenav() {

        document.getElementById("mySidenav").style.width = "0";
        document.getElementById("frameMain").style.marginLeft = "0";
        document.querySelector(".gnb").style.marginLeft = "0";
        document.getElementById("undercopy").style.marginLeft = "0";

        document.getElementById("frameMain").style.opacity = "1";
        document.querySelector("nav").style.opacity = "1";
        document.getElementById("menuIcon").style.color = "white";
        document.getElementById("menuIcon").style.backgroundColor = "#2b4cbc"
        document.getElementById("closebtn").style.color = "transparent";
    }

</script>

<script>
    var wH, wW, bH, bW, fH, fW, mH, mW, rem; //화면상태 추적
</script>

<script>
    /*-- SCRIPT autogen start ---------------------------------------------- */
    $(function () {
        var appid = "aweportal";
        var pgmid = "frameset";
        var page = $("*[pgmid='" + pgmid + "'].framepage").last();
        var pageid = page.attr("id");
        var me = {}
        var dataSet = {};
        var dataDef = {};
        var pageObj = {};
        var bEdit = false;
        me.fnInit = function () {
            gfn[pageid] = me;
            me.appid = appid;
            me.pgmid = pgmid;
            me.pageid = pageid;
            me.page = page;
            me.dataSet = dataSet;
            me.dataDef = dataDef;
            me.pageObj = pageObj;
            me.bEdit = bEdit;
            me.dataDef["_pgm"] = { "ver": 2.6, "upd_dt": "2022-10-27 09:04:25", "remark": "", "pgmid": "frameset", "proc_mst_id": "", "pgm_stat": "Y", "sort_seq": 92, "app_pgmid": "aweportal", "shortcut": "", "reg_dt": "2022-10-12 17:14:15", "reg_usid": "kihyunlee", "pgm_nm": "포털프레임셋", "upd_usid": "kihyunlee", "pgm_tp": "TX", "pgm_grp_nm": "공통", "proc_mst_nm": "", "app_pgm_nm": "FO Portal", "": "트랜젝션(화면)", "crud": "" };
            me.dataDef["_pgm_func"] = [];
            me.dataDef["_pgm_data"] = {};

            me.pageObj["_page"] = new gfnFramepage(me);
            for (var component_id in me.dataDef["_pgm_data"]) {
                me.pageObj[component_id] = new gfnComponent(me.pageid, component_id, me.dataDef["_pgm_data"][component_id], me.fnEH, me);
            }
            setTimeout(function () {
                $("#frameset").scrollTo(0); //스크롤 
            }, 10);
            if (typeof (me.fnInitExtra) == 'function') me.fnInitExtra();
        }
        /*-- SCRIPT autogen end ---------------------------------------------- */
        /* 사용자초기화 */
        me.fnInitExtra = function () {
            if (isNull(gUserinfo.usersession)) location.reload();
            pageid = "frameset";
            page = $("#body"); //frameset의 page는 "#body"임에 주의한다!

            gFrameset = me; //frameset에 Access할때 gFrameset사용 
            me.appid = appid;
            me.pgmid = pgmid;
            me.pageid = pageid;
            me.page = page;
            me.dataSet = dataSet;

            try {
                //최초 로드시 스크롤탑 처리
                window.addEventListener('load', function () {
                    setTimeout(scrollTo, 0, 0, 1);
                }, false);

                //화면이 바뀔때 사이즈정보 표시
                $(window).on("resize rotate orientationchange", me.fnFramesetLayout);

            } catch (e) {
                console.error(`${pgmid} window.load : ${e}`);
            }

            //mainLogo 로고 클릭시 리로드
            $(".mainLogo").on("click", function () {
                alert("시스템 리소스 파일을 초기화합니다.")
                location.href = "/index.html?" + date("today", "yyyymmddhh24miss");
            });

            me.fnRetrieveInit();

            //jqueryui modal dialog에서 select2 제대로 작동하지 않는 것에 대한 HACK
            if ($.ui && $.ui.dialog && $.ui.dialog.prototype._allowInteraction) {
                var ui_dialog_interaction = $.ui.dialog.prototype._allowInteraction;
                $.ui.dialog.prototype._allowInteraction = function (e) {
                    if ($(e.target).closest('.select2-dropdown').length) return true;
                    return ui_dialog_interaction.apply(this, arguments);
                };
            }

            gfnTx("aweportal.frameset", "getReq", {}, function (OUTVAR) {
                console.log(OUTVAR);

                // $("#usernicknm").text(gUserinfo.usernicknm.substr(0, 2));
                // $("#usernm").text(gUserinfo.usernm);
                // if (!gUserinfo.usergrp.some(e => e.role_tp == "ADM")) $("#usergrp").css("display", "none");
                // $("#email").text(gUserinfo.email);
            });
        }

        //frameset 데이터로드 : 세션사용자정보를 사용하므로 args없음 
        me.fnRetrieveInit = function () {
            gfnTx("aweportal.frameset", "retrieveInit", {}, function (OUTVAR) {
                if (OUTVAR.rtnCd == "OK") {
                    if (OUTVAR.server != "fo.lfnetworks.co.kr") {
                        // $("#frameGNB").css("background-color", "blue"); 
                        // KESCSS 위에 배경화면색상
                        gUserinfo.server = "dev";
                        console.log("개발환경입니다...");
                        messages = io('http://192.168.0.86:9090/socket.io/messages'); //Messages 개발 서버 연결
                        // messages          = io('http://localhost:9090/socket.io/messages'); //Messages 개발 서버 연결  
                    } else {
                        gUserinfo.server = "prod";
                        console.log("운영환경입니다...!");
                        messages = io('https://fo.lfnetworks.co.kr/socket.io/messages'); //Messages 운영 서버 연결
                    }

                    gds.comcd = OUTVAR.comcd;   //공통코드
                    gUserinfo.defval = OUTVAR.defval;  //사용자기본값
                    gUserinfo.usergrp = OUTVAR.usergrp; //사용자그룹
                    gds.menu = OUTVAR.menu;    //권한화면목록
                    gds.notice = OUTVAR.notice;  //사용자알림

                    encdeckey = "lfnetworks";   //메세지 암호화 복호화 키



                    $("#usernicknm").text(gUserinfo.usernicknm.substr(0, 2));
                    $("#usernm").text(gUserinfo.usernm);
                    if (!gUserinfo.usergrp.some(e => e.role_tp == "ADM")) $("#usergrp").css("display", "none");
                    $("#userid").text(gUserinfo.userid);

                    me.fnInitMDI();
                    me.fnInitFrameGNB();
                    me.fnInitJoinGroupMain();

                    me.fnShowFrameApp();

                    me.fnEHFrameStatus();
                    me.fnEHFrameGNB();
                    me.fnEHFrameApp();
                    me.fnEHFrameSearch();
                    me.fnEHFrameUser();
                    me.fnEHFrameSet();
                    me.fnEHFrameLeftBar();
                    me.fnEHFrameRightBar();
                    me.fnEHFrameBottom();
                    me.fnEHMessageReceive();

                    me.fnFramesetLayout();

                    //비번변경해야할 경우
                    gfnTx("aweportal.frameset", "checkChangePwd", {}, function (OUTVAR) {
                        //console.log(OUTVAR);
                        if (OUTVAR.rtnCd == "OK") {
                            var pwd_yn = OUTVAR.list[0].temp_yn;
                            if (pwd_yn == "Y") {
                                gfnAlert("비밀번호 변경 요청", "비밀번호가 초기화 또는 변경요청되었습니다. 비밀번호를 변경한 후 [저장]하시면 다시 접속됩니다!");
                                gMDI = new gfnMDI($("#frameMain"), $("#frameTab")); //gMDI초기화 
                                var pgmid = "changePwd";
                                var pgmnm = "비밀번호 변경";
                                var changePwd = $("<div></div>");
                                gMDI.openPageOne(pgmid, pgmnm);

                            }
                        }
                    });
                }
            });
        }

        //frameSet 화면크기 //KES MOBILE버전 바꿈
        me.fnFramesetLayout = function () {
            //프레임셋 화면크기 추적
            wH = toNum($(window).outerHeight(), 0);
            wW = toNum($(window).outerWidth(), 0);

            //mobile모드가 아니면 frameBottom을 frameGNB로 도킹시킨다  
            var frameBottom = $("#frameBottom");
            var bottomH = 0;


            if (wW < 768) {
                $("body").addClass("mobile");
                me.fnShowFrameLeftBar(false);
                $("#frameRight").after(frameBottom);
                frameBottom.removeClass("dock");
                frameBottom.addClass("bottom");
                bottomH = frameBottom.outerHeight();
            } else {
                $("body").removeClass("mobile");
                $("#frameGNB .CI").after(frameBottom); //docking
                frameBottom.removeClass("bottom");
                frameBottom.addClass("dock");
            }



            $("#frameset").css("margin-bottom", bottomH + "px");

            bH = toNum($("body").outerHeight(), 0);
            bW = toNum($("body").outerWidth(), 0);
            fH = toNum($("#frameset").outerHeight(), 0);
            fW = toNum($("#frameset").outerWidth(), 0);
            mH = toNum($("#frameMain").outerHeight(), 0);
            mW = toNum($("#frameMain").outerWidth(), 0);

            var oRem = $("#ruler");
            $("body").append(oRem);
            rem = toNum(oRem.outerHeight(), 0);
            oRem.text(mW + "," + mH + " / " + fW + "," + fH + " / " + bW + "," + bH + " / " + wW + "," + wH + " (" + rem + "px/rem)");


            /* JQUERYUI HACK : window변경시 다이얼로그 닫기 */
            if (!$("body").hasClass("mobile")) {
                $("[role='dialog']").each(function (idx, el) {
                    var dialogId = $(el).attr("aria-describedby");
                    $("#" + dialogId).dialog("close");
                });

                $(".gButtonsetpanel").hide();

                // if (!$("#frameApp").hasClass("hidden")) $("#frameApp").addClass("hidden");
            }
        }

        //main group 유저 접속	
        me.fnInitJoinGroupMain = function () {
            var args = {
                reg_usid: gUserinfo.userid,
                usnm: gUserinfo.usernm,
                grpid: "main"
            }
            messages.emit("main", args);
            // var args = {	
            //     reg_usid : gUserinfo.userid,	
            //     usnm : gUserinfo.usernm,	
            //     grpid : gUserinfo.userid	
            // }	
            // messages.emit(gUserinfo.userid, args);	
        }

        //gMDI
        me.fnInitMDI = function () {
            gMDI = new gfnMDI($("#frameMain"), $("#frameTab")); //gMDI초기화 
            gMDI.loadHome(); //frameMain에 frameHome 로드

            //frameLeft cafePortlet 로드
            var cafePortlet = $("#frameLeft .CAFE");
            gfnLoad("aweportal", "cafePortlet", cafePortlet, function (OUTVAR) {
            });

            //frameLeft 메세지 채널 로드 및 초기화
            gMDI.portletChat();
            //frameGNB 알림 로드 및 초기화	
            gMDI.portletAlert();
        }

        me.fnInitFrameGNB = function () {
            //banner로드
            gfnTx("aweportal.frameset", "retrieveBanner", {}, function (OUTVAR) {
                if (OUTVAR.rtnCd == "OK") {
                    for (var i = 0; i < OUTVAR.list.length; i++) {
                        var row = OUTVAR.list[i];
                        var banner = $(`<div class="banner ${row.doc_template_id}" docid="${row.docid}" title="${row.title}"></div>`);
                        //내용채워주고
                        var bannerContent = $(`<span>${row.content}</span>`);
                        bannerContent.on("click", function (e) {
                            //광고 내용표시
                            var oDoc = $(e.target).exactObj(".banner");
                            var args = { docid: oDoc.attr("docid"), proc_stat: "Y" };
                            var invar = JSON.stringify(args);
                            gfnTx("aweportal.frameset", "updateBannerRead", { INVAR: invar }, function (OUTVAR) {

                                gfnAlert("준비중", `Banner표시: [${oDoc.attr("docid")}] ${oDoc.attr("title")}`);
                            });

                            oDoc.remove();
                        });
                        banner.append(bannerContent);
                        //닫기버튼 추가하고
                        var bannerCloser = $('<i class="fas fa-times"></i>');
                        bannerCloser.on("click", function (e) {
                            //다시 안 열리게 업데이트
                            var oDoc = $(e.target).exactObj(".banner");
                            var args = { docid: oDoc.attr("docid"), proc_stat: "C" };
                            var invar = JSON.stringify(args);
                            gfnTx("aweportal.frameset", "updateBannerRead", { INVAR: invar }, function (OUTVAR) {

                                gfnStatus("광고를 읽음처리 하였습니다.");
                            });

                            oDoc.remove();
                        });
                        bannerContent.after(bannerCloser);
                        //GNB에 붙여줌
                        if (row.doc_template_id == "bannerUp") {
                            $("#frameGNB .gnb").before(banner);
                        } else {
                            $("#frameGNB .gnb").after(banner);
                        }
                    }
                }
            });

            //알림
            if (gds.notice != undefined && gds.notice.length > 0) {
                var noticnt = $("#frameGNB button.notice i b");
                if (noticnt.length == 0) {
                    $("#frameGNB button.notice i").append("<b></b>");
                    noticnt = $("#frameGNB button.notice i b");
                }
                noticnt.text(gds.notice.length);
            } else {
                $("#frameGNB button.notice i b").remove();
            }

            //사용자정보에 따른 사용자표시
            $("#frameGNB button.user span").text(gUserinfo.usernm);
        }

        /*kes 여기부터*/
        me.fnShowFrameApp = function () {
            var showMenu = function (app_pgm_nm) {

                //$.each(subset(gds.menu, "app_pgm_nm", app_pgm_nm), function(idx, row) {
                var pgms = subset(gds.menu, "app_pgm_nm", app_pgm_nm);
                sort(pgms, "sort_seq");
                $.each(pgms, function (idx, row) {
                    //idx 시작 값 0 이벤트 - 기존 APP 메뉴 대분류 제거, 새로운 APP 메뉴 대분류 생성
                    if (idx == 0) {
                        page.find("#frameApp .appMenu .PGM .app").remove();
                        var app = $("<div><h3></h3></div>");

                        app.addClass("app");

                        app.attr("app", app_pgm_nm);

                        page.find("#frameApp .appMenu .PGM").append(app);





                    }

                    $($("#frameApp>.appMenu>.APP>.app")).click(function () {

                    })

                    //////Apps 메뉴 구조임      

                    //Apps 메뉴 버튼들
                    //hasClass() boolean - 이미 생성된 중분류가 있는지 확인 후 대분류에 append()
                    if (page.find("#frameApp .appMenu .PGM .app div").hasClass(row.pgm_grp_nm) == false) {


                        var grp = $("<div></div>");

                        grp.addClass(row.pgm_grp_nm);
                        //grp.attr("pgmgrp", row.pgm_grp_nm);
                        grp.append("<div class='pgmgrp'>" + row.pgm_grp_nm + "</div>") //부제목 하위메뉴
                        grp.append("<ul class='box'></ul>") //하위메뉴의 하위메뉴
                        //grp.text(row.pgm_grp_nm);
                        page.find("#frameApp .appMenu .PGM .app").append(grp);
                    }

                    //Apps 메뉴 버튼들
                    //subset()으로 분류된 요소를 each() 반복 - row를 통해 program 정보를 해당 중분류에 append()
                    var pgm = $("<li></li>");
                    pgm.addClass("pgm");
                    pgm.text(row.pgm_nm);
                    pgm.attr("pgmid", row.pgmid);
                    pgm.attr("pgmgrp", row.pgm_grp_nm);
                    if (row.fav_yn == "Y") pgm.addClass("fav");
                    page.find("#frameApp .appMenu .PGM div[class='" + row.pgm_grp_nm + "'] .box").append(pgm);
                });
            }

            //menu에 app 추가
            var applistDistinct = extract(gds.menu, ["app_pgm_nm", "app_seq"], "distinct");
            applistDistinct = applistDistinct.filter(el => !isNull(el.app_pgm_nm));
            sort(applistDistinct, "app_seq");
            var applist = [];
            for (var x = 0; x < applistDistinct.length; x++) {
                applist.push(applistDistinct[x].app_pgm_nm);
            }
            $.each(applist, function (idx, row) {
                if (idx == 0) page.find("#frameApp .appMenu .APP .app").remove();

                //extract()로 중복 제거한 applist를 each()로 반복 - row값 idx 0인 경우만 showMenu로 전달

                var app = $("<div app='" + row + "'></div>");
                app.addClass("app")
                app.text(row);
                page.find("#frameApp .appMenu .APP").append(app);

                // if (idx == 0) showMenu(row);

            });



            //event-handler(frameGNB) : frameApp menu click event 상위메뉴 클릭하면 하위메뉴 뜨게 하는것
            var content = $(".PGM").parent().attr("app")

            page.find("#frameApp .appMenu .APP .app").on("click", function (e) {
                //Apps 을 클릭하면 하단에 pgm리스트를 표시한다.
                showMenu($(e.target).text());


                $(this).append($(".PGM"))

                // $(this).toggleClass("selected");

                if ($(".PGM").parent().attr("app") !== content) {

                    $(".PGM").slideDown();
                    $(this).toggleClass('selected')
                    $(this).siblings().removeClass('selected');
                    content = $(".PGM").parent().attr("app")

                }
                else {

                    $(".PGM").slideToggle();
                    $(this).toggleClass('selected')

                }

            });



            page.find("#frameApp .appMenu .PGM").on("click", ".pgm", function (e) {
                //pgm을 클릭하면 해당 화면을 열어준다.
                var menu = $(e.target);
                var pgmid = menu.attr("pgmid");
                var pgmnm = menu.text();
                gMDI.openPage(pgmid, pgmnm);
                page.find("#frameHome").css("display", "block") //메뉴선택시 패널 숨김

                newPagenav();


                // page.find("#mySidenav").addClass("hidden"); //메뉴선택시 패널 숨김
                // page.find("#frameApp .appMenu .APP .app").removeClass("selected");         
                // $(".PGM").slideUp();
                // $("#frameApp .appMenu .APP .app").removeClass("selected");
                //  $("#frameApp .appMenu .APP .app selected").css('backgroundColor')





            });
        }

        me.fnShowFrameSearch = function () {
            $("#frameSearch").empty();
            var frameGNBWidth = parseInt(window.getComputedStyle(document.querySelector("nav")).width);
            document.querySelector("#frameSearch").style.width = (frameGNBWidth - 10) + "px";

            //page.find("#frameSearch .frameSearchSet").remove();
            //page.find("#frameSearch").removeClass("hidden");
            //var search = $("<div></div>");
            //search.addClass("frameSearchSet");
            var searchAll = $("<div></div>");
            gfnLoad("aweportal", "searchAll", searchAll, function () {
                /* 
            search.append("<div><input class='searchBar' placeholder='&nbsp;LF Networks EP 통합검색'></div>");
            //search.append("<div><button>아이콘</div>");
            
            page.find(".searchBar").off("keyup");
            page.find(".searchBar").on("keyup",function(e){
                if(e.keyCode==13) {
                    gfnStatus($(e.target).val()+" enter pressed");
                }
            });            */
                page.find("#frameSearch").append(searchAll);
                page.find(".searchBar").focus();
            });

        }

        me.fnShowFrameLeftBar = function (bShow) {
            if (bShow == undefined) {
                if (page.find("#frameLeft").hasClass("leftMini")) bShow = true;
                else bShow = false;
            }
            if (bShow) {
                if ($("#frameBottom nav .screen").hasClass("max")) $("#frameGNB").css("display", "block");
                // page.find("#frameLeft .appMenu").show();
                // page.find("#frameLeft .grp").show();
                // page.find("#frameLeft").removeClass("leftMini");
                $("#frameMain .btnShow").removeClass("closed");
            } else {
                if ($("#frameBottom nav .screen").hasClass("max")) $("#frameGNB").css("display", "none");
                // page.find("#frameLeft .appMenu").hide();
                // page.find("#frameLeft .grp").hide();
                // page.find("#frameLeft").addClass("leftMini");
                $("#frameMain .btnShow").addClass("closed");
            }
        }

        // me.fnShowFrameRightBar = function (bShow) {
        //     if (bShow == undefined) {
        //         if (page.find("#frameRight").hasClass("rightMini")) bShow = true;
        //         else bShow = false;
        //     }
        //     if (bShow) {
        //         page.find("#frameRight .info").show();
        //         page.find("#frameRight").removeClass("rightMini");
        //     } else {
        //         page.find("#frameRight .info").hide();
        //         page.find("#frameRight").addClass("rightMini");
        //     }
        // }

        me.fnEHFrameStatus = function () {
            /* 커서가 있으면 frameStatus메시지 위치를 변경한다. */
            var block = false;
            $("body #frameStatus").on({
                mouseover: function (e) {
                    if (!block) {
                        if ($("#frameStatus").css("flex-direction") == "column-reverse") {
                            block = true;
                            $("#frameStatus").css({ top: "unset", bottom: "0.5em", "flex-direction": "column" });
                            setTimeout(function () { block = false }, 1000);
                        } else {
                            $("#frameStatus").css({ top: "0.5em", bottom: "unset", "flex-direction": "column-reverse" });
                            bLock = true;
                            setTimeout(function () { block = false }, 1000);
                        }
                    }
                }
            })
            /* gButtonsetpanel */
            $(window).on({
                click: function (e) {
                    var oE = $(e.target);
                    if (oE.isON(".gButtonpanelBtn") == false) {
                        $(".gButtonsetpanel").hide();
                    }
                    /* framepage.active에서 btnCond, Quick Guide, Tab 클릭이 일어나면 그리드 높이를 fit하게 해줌 */
                    if (oE.isON(".btnCond") || oE.isON(".guideBtn") || oE.isON(".commonFunc button:contains('Screen')") || oE.isON(".aweTab .tab") || oE.isON(".componentTitle")) {
                        gfnFramepageLayout();
                    }
                }
            });
        }

        /*kes여기까지*/

        me.fnEHFrameGNB = function () {
            $("#frameGNB .gnb .CI").on({
                click: function () {
                    gfnHome();
                }
            })

            $("#frameGNB .gnb nav .notice").on({
                click: function () {
                    $("#frameGNB .gnb nav .notice").attr("style", "background-color:unset");
                    $("#frameGNB .gnb nav .notice i").css("color", "white"); //KESCSS NOTICE 색상바꿈
                    $("#frameAlert").toggleClass("hidden");
                }
            })
            $(page).on({
                click: function (e) {
                    if (!$("#frameGNB .gnb nav .notice").has(e.target).length && !$("#frameAlert").has(e.target).length) {
                        $("#frameAlert").addClass("hidden");
                    }
                }
            });
            $("#frameGNB .gnb nav .remote").on({
                click: function (e) {
                    const url = "http://helpu.kr/LFNETWORKS/";
                    window.open(url);
                }
            })
        }

        me.fnEHFrameApp = function () {

            // $("#frameGNB .gnb nav ").on({
            //     click: function () {
            //         $("#frameApp").toggleClass("hidden");
            //     }
            // })
            // $(window).on({  
            //     click: function (e) {
            //         if (!$("#frameGNB .gnb nav ").has(e.target).length && !$("#frameApp").has(e.target).length) {
            //             $("#frameApp").addClass("hidden");
            //         }
            //     }
            // });
            //메뉴표시 바깥 클릭시 메뉴 숨기기 
            document.querySelector("#frameMain").addEventListener('click', closeNav);

        }

        me.fnEHFrameSearch = function () {
            $("#frameGNB .gnb .frameBtnSet .search").on({
                click: function () {
                    $("#frameSearch").toggleClass("hidden");
                    me.fnShowFrameSearch();
                }
            });
            $(window).on({
                click: function (e) {
                    if (!$("#frameGNB .gnb .frameBtnSet .search").has(e.target).length && !$("#frameSearch").has(e.target).length) {
                        $("#frameSearch").addClass("hidden");
                    }
                }
            });
        }

        me.fnEHFrameUser = function () {
            $("#frameGNB .gnb nav .user").on({
                click: function (e) {
                    $(".userInfo").toggleClass("hidden");
              

                }
            })
            $(" .userInfo").on({
                click: function (e) {
                    var oE = $(e.target);

                    if (oE.isON(".profile")) gMDI.openPage("manageProfile", "프로필 관리", function (OUTVAR) { }, "aweportal");
                    else if (oE.isON(".changePwd")) gMDI.openPage("changePwd", "비밀번호 변경", function (OUTVAR) { }, "aweportal");
                    else if (oE.isON(".withdrawlUser")) gMDI.openPage("withdrawlUser", "회원탈퇴", function (OUTVAR) { }, "aweportal");
                    else if (oE.isON(".logout")) gfnLogout();
                }
            });
            $(page).on({
                click: function (e) {
                    if (!$("#frameGNB .gnb nav .user").has(e.target).length && !$("#frameGNB .list").has(e.target).length) {
                        $(" .userInfo").addClass("hidden");
               

                    }
                }
            });
        }

        me.fnEHFrameSet = function () {
            $("#frameset").on({
                scroll: function () {
                    if ($("body").hasClass("mobile") == false) {
                        var scrollTop = $("#frameset").scrollTop();
                        var frameLeft = $("#frameLeft");
                        if (scrollTop < 2 * rem) { //스크롤이 충분히(2rem) 올라왔으면 마진 0
                            frameLeft.css("margin-top", 0);
                        } else {
                            var Lmt = nzl(toNum(frameLeft.css("margin-top").replaceAll("px", "")), 0);
                            var LH = frameLeft.outerHeight();
                            var MH = $("#frameMain").outerHeight();
                            if (Lmt + LH < MH && scrollTop + LH < MH) { //frameMain이 더 크다고 가정할때 왼쪽이 더 작으면
                                frameLeft.css("margin-top", scrollTop + "px"); //스크롤Top만큼 마진을 넣어줌
                            }
                        }
                    }
                    //화면크기 추적
                    me.fnFramesetLayout();
                }
            })
        }

        me.fnEHFrameLeftBar = function () {
            $("#frameMain .btnShow").on({
                click: function () {
                    me.fnShowFrameLeftBar();
                }
            })
        }

        me.fnEHFrameRightBar = function () {
            $("#frameMain .btnShowR").on({
                click: function () {
                    me.fnShowFrameRightBar();
                }
            })
        }

        me.fnEHFrameBottom = function () {
            $("#frameBottom").on({
                click: function (e) {
                    var oE = $(e.target);
                    if (oE.isON(".home")) gMDI.go(0);
                    else if (oE.isON(".prev")) gMDI.go("prev");
                    else if (oE.isON(".next")) gMDI.go("next");
                    else if (oE.isON(".calendar")) gfnCalendar();
                    else if (oE.isON(".screen")) gMDI.screen();
                    else if (oE.isON(".close")) gMDI.close();
                }
            })
        }
        //여기도 페이지 리로딩 시 (리스너) 초기화 필요	
        me.fnEHMessageReceive = function () {
            setInterval(function () {
                var args = { usid: gUserinfo.userid };
                var invar = JSON.stringify(args);
                gfnTx(appid + "." + pgmid, "checkMsg", { INVAR: invar }, function (OUTVAR) {
                    if (OUTVAR.num[0]["num"] > 0) {
                        $(".alarm>i").removeClass("far fa-comment")

                        $(".alarm>i").addClass("fas fa-comment-dots")

                        $(".alarm>span").show()
                        $(".alarm>span").text(OUTVAR.num[0]["num"])

                    }
                    else {
                        $(".alarm>i").removeClass("fas fa-comment-dots")
                        $(".alarm>i").addClass("far fa-comment")

                        $(".alarm>span").hide()
                    }
                }, true)
            }, 5000);
        }

        /*-- SCRIPT autogen ---------------------------------------------------- */
        if (typeof (me.fnInit) == 'function') me.fnInit();
    });

</script>