<style>:root {
    --boxWidth: 400px;
    --boxHeight: 500px;
    --foldSize: 50px;
    --foldMove: 25px; /* foldSize / 2 */
}

[pgmid="img3D"] .pageContent {
    position: relative;
}

[pgmid="img3D"] .pageContent::before {
    content: attr(data-text);
    position: absolute;
    top: 20px;
    font-size: 100px;
    color: goldenrod;
    width: 90%;
    text-align: center;
    z-index: 1;
}
[pgmid="img3D"] .pageContent::after {
    content: attr(data-info);
    position: absolute;
    bottom: 30px;
    left: calc(50% - 150px);
    font-size: 10px;
    background-color: goldenrod;
    padding: 0.25em 1.25em;
    border-radius: 1em;
    z-index: 1; 
}
[pgmid='img3D'] .perspective.2D {
    transform-style: unset !important;
    perspective: unset !important;
    transform: unset !important;
}
[pgmid='img3D'] .perspective.2D .box.dice6 {
    display: none;
}
[pgmid='img3D'] .perspective {
    position: relative;
    width: var(--boxWidth);
    height: var(--boxHeight);
    transform-style: preserve-3d;
    perspective: 1000px;
    transition: all 500ms ease-in;
    transform: rotateY(20deg) rotateX(60deg) rotateZ(-10deg);
    box-shadow: -40px 80px 80px -10px rgba(0, 0, 0, 0.7);
    cursor: pointer;
    display: inline-block;
    margin-top: calc(50% - calc(var(--boxHeight) / 2));
    margin-left: calc(50% - calc(var(--boxWidth) / 2));
}

[pgmid='img3D'] .perspective .box {
    position: absolute;
    top: 0px;
    left: 0px;
    width: var(--boxWidth);
    height: var(--boxHeight);
    display: inline-block; 
    background-image: url(https://i.imgur.com/foDEYpB.png);
    background-size: var(--boxWidth) var(--boxHeight);
    background-repeat: no-repeat;
}
[pgmid='img3D'] .perspective .box.dice1 { 
    /* 앞면 띄움 */
    transform: translate3d(0,0,var(--foldSize)); 
}  
[pgmid='img3D'] .perspective .box.dice2 { 
    /* 왼쪽 앞접힘*/
    width: var(--foldSize);
    transform: rotateY(-90deg) translate3d(var(--foldMove),0,var(--foldMove)); 
    filter: brightness(0.75);
}  
[pgmid='img3D'] .perspective .box.dice3 { 
    /* 오른쪽 뒤접힘 */
    width: var(--foldSize);
    left: calc(var(--boxWidth) - var(--foldSize));
    background-position: calc(-1 * (var(--boxWidth) - var(--foldSize))) 0px;
    transform: rotateY(90deg) translate3d(calc(-1 * var(--foldMove)),0,var(--foldMove));
    filter: brightness(0.75); 
} 
[pgmid='img3D'] .perspective .box.dice4 { 
    /* 뚜껑 앞접힘 */
    height: var(--foldSize);
    transform: rotateX(90deg) translate3d(0px,var(--foldMove),var(--foldMove)); 
    filter: brightness(1.25);
}  
[pgmid='img3D'] .perspective .box.dice5 { 
    /* 바닥 뒤접힘 */
    height: var(--foldSize);
    top: calc(var(--boxHeight) - var(--foldSize));
    background-position: 0px calc(-1 * (var(--boxHeight) - var(--foldSize)));
    transform: rotateX(-90deg) translate3d(0px,calc(-1 * var(--foldMove)),var(--foldMove)); 
    filter: brightness(0.5);
}   
[pgmid='img3D'] .perspective .box.dice6 { 
    /* 뒷면 180%회전 */ 
    transform: rotateY(180deg); 
} 
[pgmid='img3D'] .control {
    position: absolute;
    bottom: 16px;
    z-index:3;
    padding:0.5em;
    background-color: lightgreen;
    border-radius: 0.5em;
}
[pgmid='img3D'] .control.Move {
    right: 0px;
} </style>

<!-- HTML autogen start ---------------------------------------------- -->            
<div class="pageNav"></div>
<div class="pageTop"></div>
<div class="pageCond"></div>
<div class="pageGuide"></div>
<div class="pageContent" style="display:inline-flex" data-text="3D content">
<div class="perspective" data-x="15" data-y="-17" data-z="-1" data-top="0" data-left="0" data-front="0">
        <span class="box dice1"></span>
        <span class="box dice2"></span>
        <span class="box dice3"></span>
        <span class="box dice4"></span>
        <span class="box dice5"></span>
        <span class="box dice6"></span>
</div>
<div class="control Rotate">
    <h4>Rotate</h4>
    <button class="btn" data-axis="x" data-step="3">X+</button>    
    <button class="btn" data-axis="x" data-step="-3">X-</button>    
    <button class="btn" data-axis="y" data-step="3">Y+</button>    
    <button class="btn" data-axis="y" data-step="-3">Y-</button>    
    <button class="btn" data-axis="z" data-step="1">Z+</button>    
    <button class="btn" data-axis="z" data-step="-1">Z-</button>    
</div>
<div class="control Move">
    <h4>Move</h4>
    <button class="btn" data-axis="left" data-step="-100">X-</button>    
    <button class="btn" data-axis="left" data-step="100">X+</button>    
    <button class="btn" data-axis="top" data-step="-100">Y-</button>    
    <button class="btn" data-axis="top" data-step="100">Y+</button>    
    <button class="btn" data-axis="front" data-step="-100">Z-</button>    
    <button class="btn" data-axis="front" data-step="100">Z+</button>    
</div>
</div>
<!-- HTML autogen end ---------------------------------------------- -->
<script>
/*-- SCRIPT autogen start ---------------------------------------------- */        
$(function() {
    var appid = "aweportal";
    var pgmid = "img3D"; 
    var page = $("*[pgmid='"+pgmid+"'].framepage").last();
    var pageid = page.attr("id"); 
    var me = {}
    var dataSet = {};
    var dataDef = {};
    var pageObj = {};
    var bEdit = false;
    me.fnInit = function() {
        gfn[pageid] = me; 
        me.appid    = appid;
        me.pgmid    = pgmid;
        me.pageid   = pageid;
        me.page     = page; 
        me.dataSet = dataSet;
        me.dataDef = dataDef;
        me.pageObj = pageObj;
        me.bEdit = bEdit;
me.dataDef["_pgm"]={"ver":0.1,"upd_dt":"2022-09-23 08:54:30","remark":"","pgmid":"img3D","proc_mst_id":"","pgm_stat":"Y","sort_seq":99,"app_pgmid":"aweportal","shortcut":"","reg_dt":"2022-09-23 08:54:30","reg_usid":"kihyunlee","pgm_nm":"3D이미지","upd_usid":"kihyunlee","pgm_tp":"UX","pgm_grp_nm":"실험실","proc_mst_nm":"","app_pgm_nm":"포털","":"트랜젝션(메뉴)","crud":""};
me.dataDef["_pgm_func"]=[{"sort_seq":1,"funcid":"set","func_nm":"변환","func_icon":"fas fa-cube","func_tp":"EH","content":null,"remark":null,"crud":"C","id":"0"}];
me.dataDef["_pgm_data"] = {};
me.dataDef["_pgm_data"]["pageCond"]={"sort_seq":1,"data_id":"pageCond","data_nm":"설정","data_icon":null,"component_pgmid":"aweForm","component_option":null,"inout_tp":null,"content":[{"sort_seq":1,"section":null,"section_icon":null,"colgrp":null,"colid":"perspective","colnm":"원근깊이","dtype":"text","etype":"txt","attr":null,"defval":"unset","w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"0"},{"sort_seq":2,"section":null,"section_icon":null,"colgrp":null,"colid":"title","colnm":"텍스트","dtype":"text","etype":"txt","attr":null,"defval":"3D Content","w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"1"},{"sort_seq":3,"section":"배치","section_icon":null,"colgrp":null,"colid":"mgTop","colnm":"윗여백","dtype":"text","etype":"txt","attr":null,"defval":"calc(50% - 350px)","w":"25","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"2"},{"sort_seq":4,"section":"배치","section_icon":null,"colgrp":null,"colid":"mgLeft","colnm":"옆여백","dtype":"text","etype":"txt","attr":null,"defval":"calc(50% - 200px)","w":"25","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"3"}]};

        me.pageObj["_page"] = new gfnFramepage( me ); 
        for(var component_id in me.dataDef["_pgm_data"]) { 
            me.pageObj[component_id] = new gfnComponent( me.pageid, component_id, me.dataDef["_pgm_data"][component_id], me.fnEH, me); 
        }  
        setTimeout(function(){
            $("#frameset").scrollTo(0); //스크롤 
        },10);
        if(typeof(me.fnInitExtra)=='function') me.fnInitExtra(); 
    } 
/*-- SCRIPT autogen end ---------------------------------------------- */

    /* 사용자초기화 */
    me.fnInitExtra=function() {
        //탭 설정
        //gfnTab(pageid, "tabs", {"multi-active":"off","toggle-switch":"on"}); 
        //사용자 컴포넌트 
        //me.dataDef["_pgm_data"][myCompoId] = {...};
        //me.pageObj["myCompoId"] = new gfnComponent( me.pageid, myCompoId, me.dataDef["_pgm_data"][myCompoId], me.fnEH, me); 
        //me.pageObj["myCompoId"].userComponent = "myCompoId";
        //사용자 컨트롤
        //var myColinfo = {colid:...}
        //me.pageObj["myColId"] = new gfnControl(myColinfo, me.fnEH) 
        //me.page.find("#myCol").append(me.pageObj["myColId"].dispObj);
        //me.pageObj["myColId"].getVal(); / myCol.setVal(val);...
        me.page.on("click",".Rotate Button.btn",function(e){
            me.fnEH("btnRotate","click",$(e.target),$(e.target).text(),e);
        });
        me.page.on("click",".Move Button.btn",function(e){
            me.fnEH("btnMove","click",$(e.target),$(e.target).text(),e);
        });
        me.fnRotateMove(); 

        me.page.on("mousedown",".pageContent",function(e){
            me.mdX = e.clientX;
            me.mdY = e.clientY; 
        });
        me.page.on("mouseup",".pageContent",function(e){
            me.muX = e.clientX;
            me.muY = e.clientY;
            var x = me.muX - me.mdX;
            var y = me.muY - me.mdY;
            if(e.shiftKey) {
                me.fnRotateMove("Move","left",x);    
                me.fnRotateMove("Move","top",y);
            } else  {
                me.fnRotateMove("Rotate","x",toNum(-1*y/10,0));    
                me.fnRotateMove("Rotate","y",toNum(x/10,0));
            } 
        }); 
        
        //me.page.find(".perspective").addClass("2D");
    }
    /* 이벤트핸들러 */
    me.fnEH=function(component, evt, row, col, val) { 
        //console.log(evt+","+row+","+col+","+val);
        //화면기능버튼이 눌리면 
        if (component==me.pageObj["_pageFunc"]){ 
            if(typeof(me[col])=='function') me[col](); //col=기능명 me["fnSearch"]()=me.fnSearch(); 
        }
        //사용자 컴포넌트/컨트롤
        if(component=="btnRotate") {
            var ev = row;
            var axis = ev.data("axis");
            var step = ev.data("step");
            me.fnRotateMove("Rotate",axis, step);
        }
        if(component=="btnMove") {
            var ev = row;
            var axis = ev.data("axis");
            var step = ev.data("step");
            me.fnRotateMove("Move",axis, step);
        }
    }
    /* 3D 적용 */
    me.fnSet=function() {
        var cond = me.pageObj.pageCond.exportData()[0];
        me.page.find(".perspective").removeClass("2D");
        me.page.find(".pageContent").attr("data-text",cond.title); 
        me.page.find(".perspective").css("perspective",cond.perspective);
        me.page.find(".perspective").css("margin-top",cond.mgTop);
        me.page.find(".perspective").css("margin-left",cond.mgLeft); 
    }
    
    /* 박스회전과 이동 */
    me.fnRotateMove=function(RMtype, axis, step) { 
        var el = me.page.find(".perspective"); 
        var tf = {x:toNum(el.data("x")),y:toNum(el.data("y")),z:toNum(el.data("z"))};
        var ts = {top:toNum(el.data("top")),left:toNum(el.data("left")),front:toNum(el.data("front"))};
        if(RMtype=="Rotate" && !isNull(axis)) {
            tf[axis] += toNum(step); //축변경값 재계산
            el.data(axis, tf[axis]); //세팅
        } else if(RMtype=="Move" && !isNull(axis)) {
            ts[axis] += toNum(step); //축변경값 재계산
            el.data(axis, ts[axis]); //세팅
        }
        var strTf = "rotateX("+tf.x+"deg) rotateY("+tf.y+"deg) rotateZ("+tf.z+"deg)";
        var strTs = "translate3d("+ts.left+"px, "+ts.top+"px, "+ts.front+"px)";
        el.css("transform",strTf+" "+strTs);
        var pc = me.page.find(".pageContent");
        pc.attr("data-info","Rotate(x/y/z): "+toNum(el.data("x"),0)+" / "+toNum(el.data("y"),0)+" / "+toNum(el.data("z"),0)+"\nPosition(top/left/front): "+toNum(el.data("top"),0)+" / "+toNum(el.data("left"),0)+" / "+toNum(el.data("front"),0));
        
    } 
    
    
    

/*-- SCRIPT autogen ---------------------------------------------------- */        
if(typeof(me.fnInit)=='function') me.fnInit();
});

</script>