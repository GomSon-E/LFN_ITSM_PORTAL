<style>body.mobile {
    display: block;
    width: 100%;
    min-height: 100vh;
    /*position: relative;*/
    overflow-y: auto;
}

.mobile #frameGNB {
    position: sticky;
    top: 0;
    left: 0;
    right: 0;
    z-index: 10;
}
.mobile > #frameset {
	min-width: unset !important;
} 
/* .mobile #frameMain {
    height: calc(100% - 124.125px);
} */

/* .mobile #frameStatus {
    z-index: 3000;
} */
/*
.mobile #frameset {
    min-height: calc(100vh - 37.125px);
    height: unset !important;
    display: block;
    overflow-y: auto;
    position: relative; 
}

.mobile #frameMain {
    min-height: inherit;
    height: 100%;
    width: 100%;
    overflow-y: visible;
}

.mobile .framepage.active {
    display: block;
    height: unset;
    min-height: inherit;
    width: 100%;
    overflow-y: visible;
}

.mobile .framepage.active > .pageContent {
    display: block;
    position: relative;
    height: unset;
    overflow: visible;
}
*/
.mobile #frameHome .flexColumn {
    display: block;
    height: unset;
}

.mobile #frameHome .componentBody {
    min-height: 24em;
}

.mobile #frameHome .componentBody .ag-root-wrapper-body {
    min-height: 24em;
}

.mobile #frameHome #graph {
    height: unset !important;
}

#frameHome .flex50 > *  { 
    flex:1 1 50% !important; 
}

	
#frameHome .aweCalendar h2 {
    margin: 0;
}

#frameHome .aweCalendar p {
    display: none;
}


#frameHome .aweCalendar tbody tr { 
    height: 5em;
}

#frameHome .aweCalendar td { 
    vertical-align: top;
    padding-bottom: 0;
    min-height: 3em;
}

#frameHome .aweCalendar .cal { 
    width: 100%;
    text-align: right;
    white-space: nowrap;
}

#frameHome .aweCalendar .sqty { 
    color: #487c32;
}

#frameHome .aweCalendar .amt { 
    color: #7c3232;
}

#frameHome .aweCalendar .factor { 
    color: #aeaeae;
}

#frameHome .btnXls, #frameHome .btnPdf { 
    display:none;
}

#frameHome .componentTitle {
    font-size: 1.4em;
}

</style>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Tangerine">        
<SCRIPT src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.3.2/chart.min.js" crossorigin="anonymous"></script>

    <div class="pageContent flexRow">
    <div style="flex:1 1 30%" class="flexColumn flex50">
        <div style="flex:1 1 50%;" class="flexColumn">
            <!-- <ul id="tabs2">
                <li refid="notice">공지사항</li> 
                <li refid="csrList">CSR요청처리</li> 
            </ul> -->
            <div id='notice' class="flexColumn"></div>
            <!-- <div id='csrList' class="flexColumn"></div> -->
        </div>
        <!-- <div style="flex:1 1 50%" class="flexColumn">
            <ul id="tabs">
                <li refid="list7">매장간 이동요청</li> 
                <li refid="list5">매장별 매출현황</li> 
            </ul>
            <div id='list7' class="flexColumn"></div>
            <div id='list5' class="flexColumn"></div> 
        </div> -->      
    </div>
    
    <div  style="flex:1 1 30%; " class="flexColumn flex50" >
        <div id='list4' style="height:50%;position:relative"></div>
    </div>


    <!----- 11.24 원본 (차트와 달력)-->
    <!-- <div style="flex:1 1 calc(30% - 3em);height:100%;display:block">
        <div id='graph' style="height:50%;position:relative">
            <canvas id="myChart" style="height:100%;width:100%;"></canvas>    
        </div>
        <div id='list4' style="height:50%;position:relative"></div>
    </div> -->
</div>
<script>
/*-- SCRIPT autogen start ---------------------------------------------- */        
$(function() {
    var appid = "aweportal";
    var pgmid = "frameHome"; 
    var page = $("*[pgmid='"+pgmid+"'].framepage").last();
    var pageid = page.attr("id"); 
    var me = {}
    var dataSet = {};
    var dataDef = {};
    var pageObj = {};
    var bEdit = false;
    me.fnInit = function() {
        gfn[pageid] = me; 
        me.appid    = appid;
        me.pgmid    = pgmid;
        me.pageid   = pageid;
        me.page     = page; 
        me.dataSet = dataSet;
        me.dataDef = dataDef;
        me.pageObj = pageObj;
        me.bEdit = bEdit;
me.dataDef["_pgm"]={"ver":2.7,"upd_dt":"2022-10-25 16:55:22","remark":"","pgmid":"frameHome","proc_mst_id":"","pgm_stat":"Y","sort_seq":93,"app_pgmid":"aweportal","shortcut":"","reg_dt":"2022-10-25 16:55:22","reg_usid":"kihyunlee","pgm_nm":"포털메인화면","upd_usid":"kihyunlee","pgm_tp":"TX","pgm_grp_nm":"공통","proc_mst_nm":"","app_pgm_nm":"FO Portal","":"트랜젝션(화면)","crud":""};
me.dataDef["_pgm_func"]=[];
me.dataDef["_pgm_data"] = {};
me.dataDef["_pgm_data"]["notice"]={"sort_seq":"1","data_id":"notice","data_nm":"공지사항","data_icon":null,"component_pgmid":"agGrid","component_option":{"func":[{"funcid":"more","func_nm":"더보기","func_icon":"fas fa-search"}]},"inout_tp":"OUT","content":[{"sort_seq":1,"section":null,"section_icon":null,"colgrp":null,"colid":"tag","colnm":"태그","dtype":"text","etype":"raw","attr":"center","defval":null,"w":"7","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"0"},{"sort_seq":2,"section":null,"section_icon":null,"colgrp":null,"colid":"title","colnm":"제목","dtype":"text","etype":"raw","attr":null,"defval":null,"w":"15","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"1"},{"sort_seq":3,"section":null,"section_icon":null,"colgrp":null,"colid":"read_cnt","colnm":"조회수","dtype":"num","etype":"raw","attr":null,"defval":null,"w":"3","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"2"},{"sort_seq":4,"section":null,"section_icon":null,"colgrp":null,"colid":"nm","colnm":"작성자","dtype":"text","etype":"raw","attr":"center","defval":null,"w":"6","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"3"},{"sort_seq":5,"section":null,"section_icon":null,"colgrp":null,"colid":"reg_dt","colnm":"작성일자","dtype":"text","etype":"raw","attr":"center","defval":null,"w":"10","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"4"}]};
me.dataDef["_pgm_data"]["csrList"]={"sort_seq":"2","data_id":"csrList","data_nm":"CSR 현황","data_icon":null,"component_pgmid":"agGrid","component_option":{"func":[{"funcid":"more","func_nm":"전체내역","func_icon":"fas fa-search"}]},"inout_tp":"OUT","content":[{"sort_seq":1,"section":null,"section_icon":null,"colgrp":null,"colid":"content_stat","colnm":"상태","dtype":"text","etype":"sel","attr":"readonly ","defval":null,"w":"5","h":null,"refcd":"RES_TP","option":"sel:cd_stat::nm","len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"0"},{"sort_seq":2,"section":null,"section_icon":null,"colgrp":null,"colid":"doc_no","colnm":"CSR 번호","dtype":"text","etype":"raw","attr":null,"defval":null,"w":"5","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"1"},{"sort_seq":3,"section":null,"section_icon":null,"colgrp":null,"colid":"ref_docid","colnm":"모듈","dtype":"text","etype":"raw","attr":null,"defval":null,"w":"5","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"2"},{"sort_seq":4,"section":null,"section_icon":null,"colgrp":null,"colid":"ref_id","colnm":"화면","dtype":"text","etype":"raw","attr":null,"defval":null,"w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"3"},{"sort_seq":5,"section":null,"section_icon":null,"colgrp":null,"colid":"title","colnm":"요청제목","dtype":"text","etype":"raw","attr":null,"defval":null,"w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"4"},{"sort_seq":6,"section":null,"section_icon":null,"colgrp":null,"colid":"reg_usid","colnm":"요청자","dtype":"text","etype":"raw","attr":"hidden","defval":null,"w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"5"},{"sort_seq":7,"section":null,"section_icon":null,"colgrp":null,"colid":"req_docid","colnm":"문서번호","dtype":"text","etype":"raw","attr":"hidden","defval":null,"w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"6"}]};
me.dataDef["_pgm_data"]["list2"]={"sort_seq":"3","data_id":"list2","data_nm":"상품유형별 판매현황","data_icon":null,"component_pgmid":"agGrid","component_option":{"remark":"(금액단위: 천원, VAT제외. 온라인: 판매량)","func":[{"funcid":"refresh","func_nm":"","func_icon":"fas fa-sync"}]},"inout_tp":"OUT","content":[{"sort_seq":1,"section":null,"section_icon":null,"colgrp":"상품유형","colid":"mat_tp","colnm":"  차수","dtype":"text","etype":"raw","attr":"pk","defval":null,"w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"0"},{"sort_seq":2,"section":null,"section_icon":null,"colgrp":"당일 매출","colid":"sale_qty_today","colnm":"수량","dtype":"num","etype":"raw","attr":null,"defval":null,"w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"1"},{"sort_seq":3,"section":null,"section_icon":null,"colgrp":"당일 매출","colid":"price_amt_today","colnm":"소가액","dtype":"num","etype":"raw","attr":null,"defval":null,"w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"2"},{"sort_seq":4,"section":null,"section_icon":null,"colgrp":"당일 매출","colid":"sale_amt_today","colnm":"매출액","dtype":"num","etype":"raw","attr":"keycol","defval":null,"w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"3"},{"sort_seq":5,"section":null,"section_icon":null,"colgrp":"당월 매출","colid":"sale_qty","colnm":"수량","dtype":"num","etype":"raw","attr":null,"defval":null,"w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"4"},{"sort_seq":6,"section":null,"section_icon":null,"colgrp":"당월 매출","colid":"sale_qty_on","colnm":"(온라인)","dtype":"num","etype":"raw","attr":null,"defval":null,"w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"5"},{"sort_seq":7,"section":null,"section_icon":null,"colgrp":"당월 매출","colid":"price_amt","colnm":"소가액","dtype":"num","etype":"raw","attr":null,"defval":null,"w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"6"},{"sort_seq":8,"section":null,"section_icon":null,"colgrp":"당월 매출","colid":"sale_amt","colnm":"매출액","dtype":"num","etype":"raw","attr":"keycol","defval":null,"w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"7"}]};
me.dataDef["_pgm_data"]["list4"]={"sort_seq":"4","data_id":"list4","data_nm":"월간 달력","data_icon":null,"component_pgmid":"aweCalendar","component_option":{"caltype":"FO_SHOP","fnTemplate":"gfn.frameHome.fnCalTemplate","remark":"(일일 판매량: pcs. 매출액: 백만원, VAT제외)  자동조회(분):","content":[{"colid":"period","colnm":"분","dtype":"num","etype":"sel","defval":"10","refcd":"[10,5,1]","option":"sel:period::cd"}],"func":[{"funcid":"refresh","func_nm":"","func_icon":"fas fa-sync"}]},"inout_tp":"OUT","content":[{"sort_seq":1,"section":null,"section_icon":null,"colgrp":null,"colid":"ymd","colnm":"일자","dtype":"ymd","etype":"raw","attr":null,"defval":null,"w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"0"},{"sort_seq":2,"section":null,"section_icon":null,"colgrp":null,"colid":"qty","colnm":"판매량","dtype":"num","etype":"raw","attr":null,"defval":null,"w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"1"},{"sort_seq":3,"section":null,"section_icon":null,"colgrp":null,"colid":"amt","colnm":"판매액","dtype":"num","etype":"raw","attr":null,"defval":null,"w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"2"}]};
me.dataDef["_pgm_data"]["list5"]={"sort_seq":"5","data_id":"list5","data_nm":"매장별 매출현황","data_icon":null,"component_pgmid":"agGrid","component_option":{"remark":"(금액단위: 천원, VAT제외. 온라인: 판매량)","func":[{"funcid":"refresh","func_nm":"","func_icon":"fas fa-sync"}]},"inout_tp":"OUT","content":[{"sort_seq":1,"section":null,"section_icon":null,"colgrp":"  구분","colid":"shop_nm","colnm":"매장","dtype":"text","etype":"raw","attr":"rowSpan keycol","defval":null,"w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"0"},{"sort_seq":2,"section":null,"section_icon":null,"colgrp":"  구분","colid":"remark","colnm":"채널","dtype":"text","etype":"raw","attr":"keycol","defval":null,"w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"1"},{"sort_seq":3,"section":null,"section_icon":null,"colgrp":"당일 매출","colid":"sale_qty_today","colnm":"수량","dtype":"num","etype":"raw","attr":null,"defval":null,"w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"2"},{"sort_seq":4,"section":null,"section_icon":null,"colgrp":"당일 매출","colid":"sale_qty_on_today","colnm":"(온라인)","dtype":"num","etype":"raw","attr":null,"defval":null,"w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"5"},{"sort_seq":5,"section":null,"section_icon":null,"colgrp":"당일 매출","colid":"sale_amt_today","colnm":"매출액","dtype":"num","etype":"raw","attr":"keycol","defval":null,"w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"4"},{"sort_seq":6,"section":null,"section_icon":null,"colgrp":"당월 매출","colid":"sale_qty","colnm":"수량","dtype":"num","etype":"raw","attr":null,"defval":null,"w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"3"},{"sort_seq":7,"section":null,"section_icon":null,"colgrp":"당월 매출","colid":"sale_qty_on","colnm":"(온라인)","dtype":"num","etype":"raw","attr":null,"defval":null,"w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"7"},{"sort_seq":8,"section":null,"section_icon":null,"colgrp":"당월 매출","colid":"sale_amt","colnm":"매출액","dtype":"num","etype":"raw","attr":"keycol","defval":null,"w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"6"}]};
me.dataDef["_pgm_data"]["list6"]={"sort_seq":"6","data_id":"list6","data_nm":"Best 상품(2주간)","data_icon":null,"component_pgmid":"agGrid","component_option":{"gridOpt":"rn","remark":"(금액단위:천원,VAT제외)","func":[{"funcid":"refresh","func_nm":"","func_icon":"fas fa-sync"}]},"inout_tp":"OUT","content":[{"sort_seq":1,"section":null,"section_icon":null,"colgrp":null,"colid":"goods_cd","colnm":"상제품코드","dtype":"text","etype":"raw","attr":"keycol","defval":null,"w":"8","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"0"},{"sort_seq":2,"section":null,"section_icon":null,"colgrp":null,"colid":"goods_nm","colnm":"상제품명","dtype":"text","etype":"raw","attr":null,"defval":null,"w":"8","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"1"},{"sort_seq":3,"section":null,"section_icon":null,"colgrp":null,"colid":"sale_qty","colnm":"판매수량","dtype":"num","etype":"raw","attr":null,"defval":null,"w":"6","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"2"},{"sort_seq":4,"section":null,"section_icon":null,"colgrp":null,"colid":"sale_amt","colnm":"판매금액","dtype":"text","etype":"raw","attr":"keycol right","defval":null,"w":"8","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"3"},{"sort_seq":5,"section":null,"section_icon":null,"colgrp":null,"colid":"stk_qty","colnm":"재고수량","dtype":"num","etype":"raw","attr":null,"defval":null,"w":"6","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"4"},{"sort_seq":6,"section":null,"section_icon":null,"colgrp":null,"colid":"shop_cnt","colnm":"매장수","dtype":"num","etype":"raw","attr":null,"defval":null,"w":"3","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":"\" \"","remark":null,"crud":"C","id":"5"}]};
me.dataDef["_pgm_data"]["list7"]={"sort_seq":"7","data_id":"list7","data_nm":"매장간 이동 요청","data_icon":null,"component_pgmid":"agGrid","component_option":{"remark":"*최근 일주일간 요청"},"inout_tp":"OUT","content":[{"sort_seq":1,"section":null,"section_icon":null,"colgrp":null,"colid":"req_dt","colnm":"요청일","dtype":"ymd","etype":"raw","attr":null,"defval":null,"w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"0"},{"sort_seq":2,"section":null,"section_icon":null,"colgrp":null,"colid":"rotate_nm","colnm":"요청문서명","dtype":"text","etype":"raw","attr":null,"defval":null,"w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"1"},{"sort_seq":3,"section":null,"section_icon":null,"colgrp":null,"colid":"to_whcd","colnm":"이동처","dtype":"text","etype":"raw","attr":"readonly","defval":null,"w":null,"h":null,"refcd":"SHOPCD","option":"sel:to_whcd::cdnm","len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"2"},{"sort_seq":4,"section":null,"section_icon":null,"colgrp":null,"colid":"req_usid","colnm":"요청자","dtype":"text","etype":"raw","attr":"readonly","defval":null,"w":null,"h":null,"refcd":"USID","option":"sel:req_usid::cdnm","len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"3"},{"sort_seq":5,"section":null,"section_icon":null,"colgrp":null,"colid":"content","colnm":"내용","dtype":"text","etype":"raw","attr":null,"defval":null,"w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"4"},{"sort_seq":6,"section":null,"section_icon":null,"colgrp":null,"colid":"qty","colnm":"수량","dtype":"num","etype":"raw","attr":null,"defval":null,"w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"5"},{"sort_seq":7,"section":null,"section_icon":null,"colgrp":null,"colid":"delay_day_cnt","colnm":"경과일수","dtype":"num","etype":"raw","attr":null,"defval":null,"w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"6"}]};

        me.pageObj["_page"] = new gfnFramepage( me ); 
        for(var component_id in me.dataDef["_pgm_data"]) { 
            me.pageObj[component_id] = new gfnComponent( me.pageid, component_id, me.dataDef["_pgm_data"][component_id], me.fnEH, me); 
        }  
        setTimeout(function(){
            $("#frameset").scrollTo(0); //스크롤 
        },10);
        if(typeof(me.fnInitExtra)=='function') me.fnInitExtra(); 
    } 
/*-- SCRIPT autogen end ---------------------------------------------- */
me.fnInitExtra=function() {
    // LOCAL, QAS, PROD 환경 구분하기
    var gServer = "QAS";
    if(window.location.href.indexOf("lfnetworks.co.kr")>=0) gServer='PROD';
    else if(window.location.href.indexOf("localhost")>=0) gServer='LOCAL';
    console.log(`------${gServer} 환경입니다------`)

    //탭
    gfnTab(pageid, "tabs2");
    gfnTab(pageid, "tabs");
    
    //화면 Open시 조회
    me.fnSearch();
    
    //FO달력가져오기
    me.pageObj.list4.initCalendar(); 
    
    /* SEASONS GREETING
    var panel = gfnPanel({
        position: "absolute",
        left:"-180px",top:"10%",
        width:"600px",height:"880px",
        display:"flex",
        "justify-content":"center",
        "align-items":"center", 
        background: "#eaeef0",  
        "transform":"scale(0.3)",
        overflow: "hidden",
        "box-shadow":"3px 3px 3px 2px lightgrey, -3px -3px 3px 2px lightgrey"
    });    
    gfnLoad("aweportal","happyNewyear2022",panel,function(){
        $("body").append(panel);
        panel.on("click",function(){
            gfnStatus("새해 복 많이 받으세요!");
            panel.remove(); 
        });
    });
    */
}

//달력 템플릿
me.fnCalTemplate=function(data) {
    return `<div class='cal'><span class='sqty'>${data.qty}</span> <span class='factor'>pcs</span></div><div class='cal'><span class='amt'>${data.amt}</span> <span class='factor'>M</span></div>`;
}

me.fnEH=function(component, evt, row, col, val) { 
    //console.log(evt+","+row+","+col+","+val);
    //화면기능버튼이 눌리면 
    if (component==me.pageObj["_pageFunc"]){ 
        if(typeof(me[col])=='function') me[col](); //col=기능명 me["fnSearch"]()=me.fnSearch(); 
    }
    //사용자 컴포넌트/컨트롤
    else if(component==me.pageObj["list2"]) {
        if(evt=="componentFunc") {
            if(row=="refresh") {
                me.fnRefresh("list2");
            }    
        }
    }
    else if(component==me.pageObj["list6"]) {
        if(evt=="componentFunc") {
            if(row=="refresh") {
                me.fnRefresh("list6");
            }    
        }
    }    
    else if(component==me.pageObj["list5"]) {
        if(evt=="componentFunc") {
            if(row=="refresh") {
                me.fnRefresh("list5");
            }    
        }
    }       
    else if(component==me.pageObj["list4"]) {
        if(evt=="componentFunc") {
            if(row=="refresh") {
                me.fnSearch();
            }    
        }
    }    
    //공지사항
    else if(component==me.pageObj["notice"]) {
        if (evt=="componentFunc") {
            gMDI.openPage( "manageBBS", "공지사항 관리" );
        } else if(evt=="dblclick") {
            var rows = me.pageObj.notice.selectedRows();
            var rowData = me.pageObj.notice.getRowData(rows);
            var invar = JSON.stringify(rowData);
            gfnTx("aweportal.manageBBS", "selectOneDoc", {"INVAR" : invar}, function(OUTVAR){
                if(OUTVAR.rtnCd=="OK") {
                    gfnPopupDetailBBS(rowData.docid);
                } else {
                    gfnAlert("조회오류",OUTVAR.rtnMsg);
                }
            });
        }
    }  
    else if(component==me.pageObj["list7"]) {
        if(evt=="dblclick") {
            gMDI.openPage("RTregister", "매장간 이동요청 처리", function(){}, "fo_pos"); 
        }
    }    
    
    //CSR현황
    else if(component==me.pageObj["csrList"]) {
        if (evt=="componentFunc") {
            gMDI.openPage( "manageCSR", "CSR 관리" );
        } else if(evt=="dblclick") {
            var resPop = $("<div id='resPop' class='framepage active'></div>");
            var resPopup = null;
            gfnLoad("aweportal","detailCSR", resPop,function(){
                resPopup = gfnPopup("처리내역 등록", resPop,{width:800, height:700});
                gParam["docid"] = component.getVal(row,"req_docid");
            });
            gParam.fncallback = function() {};
        }
    }
}

me.ticker = null;

me.fnSearch=function() { 
    //응답속도 지연으로 순차적으로 로딩한다.
    /*
    var args = {docTag:"공지사항"};
    var invar = JSON.stringify(args);    
    gfnTx("aweportal.manageBBS", "selectRecentDoc", {INVAR:invar}, function(OUTVAR){
        if(OUTVAR.rtnCd=="OK") {
            me.pageObj["notice"].importData(OUTVAR.list); 
            me.pageObj.notice.sizeColumnsToFit();
        } else {
            gfnAlert("조회오류",OUTVAR.rtnMsg);
        }    
    });
    gfnTx("aweportal.manageCSR", "searchMyCSR", {}, function(OUTVAR){
        if(OUTVAR.rtnCd=="OK") {
            me.pageObj["csrList"].importData(OUTVAR.list); 
            me.pageObj.csrList.sizeColumnsToFit();
        } else {
            gfnAlert("조회오류",OUTVAR.rtnMsg);
        }    
    });
    gfnTx(appid+"."+pgmid,"search", {}, function(OUTVAR){
        if(OUTVAR.rtnCd=="OK") {
            gfnStatus("홈화면 정보를 재조회하였습니다!");
            
            me.pageObj["list2"].importData(OUTVAR.list2);
            me.pageObj.list2.sizeColumnsToFit();
            me.pageObj.list2.total("top");
            
            me.pageObj["list6"].importData(OUTVAR.list6);
            me.pageObj.list6.sizeColumnsToFit(); 
            me.pageObj.list6.total("top");
            
            me.pageObj["list5"].importData(OUTVAR.list5);
            me.pageObj.list5.sizeColumnsToFit(); 
            me.pageObj.list5.total("top");
            
            me.pageObj["list4"].importData(OUTVAR.list4);
            
            me.pageObj["list7"].importData(OUTVAR.list7);

            //CHART
            me.fnChart(OUTVAR.list3); 
            
            var period = me.pageObj.list4._componentCond["period"].getVal();
            if(isNum(period)) {
                if(!isNull(me.ticker)) {
                    window.clearTimeout(me.ticker);
                    me.ticker = null;
                }
                me.ticker = window.setTimeout(me.fnSearch, period*60*1000);     
            }
        } else {
            gfnAlert("조회오류",OUTVAR.rtnMsg);
        }    
    });
    */
    /* 조회순서 */
    me.fnRefresh("list4",function(){
        me.fnRefresh("list3",function(){
            me.fnRefresh("list2",function(){
                me.fnRefresh("list5",function(){
                    me.fnRefresh("list6",function(){
                        me.fnRefresh("list7",function(){
                            var args = {docTag:"공지사항"};
                            var invar = JSON.stringify(args);    
                            gfnTx("aweportal.manageBBS", "selectRecentDoc", {INVAR:invar}, function(OUTVAR){
                                if(OUTVAR.rtnCd=="OK") {
                                    me.pageObj["notice"].importData(OUTVAR.list); 
                                    if(!isNull(me.pageObj.notice.container) && me.pageObj.notice.container.css("display")!="none") me.pageObj.notice.sizeColumnsToFit();
                                    gfnTx("aweportal.manageCSR", "searchMyCSR", {}, function(OUTVAR){
                                        if(OUTVAR.rtnCd=="OK") {
                                            me.pageObj["csrList"].importData(OUTVAR.list); 
                                            if(!isNull(me.pageObj.csrList.container) && me.pageObj.csrList.container.css("display")!="none") me.pageObj.csrList.sizeColumnsToFit();
                                        } else {
                                            gfnAlert("조회오류",OUTVAR.rtnMsg);
                                        }    
                                    });
                                } else {
                                    gfnAlert("조회오류",OUTVAR.rtnMsg);
                                }    
                            });
                        });
                    });
                });
            });
        });
    })
    
} 

// ---------------------------------------------------------------------------임시 오라클 오류 해결 --------------------------------------------------------------------
// me.fnRefresh=function(listId, fnCallback) {
//     var args = {listId:listId};
//     var invar = JSON.stringify(args);
//     gfnTx(appid+"."+pgmid,"refresh", {INVAR:invar}, function(OUTVAR){
//         if(OUTVAR.rtnCd=="OK") {
//             if(listId=="list4") {
//                 me.pageObj.list4.importData(OUTVAR.list);
//             } else if (listId=="list3") {
//                 me.fnChart(OUTVAR.list);
//             } else {
//                 me.pageObj[listId].importData(OUTVAR.list);
//                 if(!isNull(me.pageObj[listId].container) && me.pageObj[listId].container.css("display")!="none") me.pageObj[listId].sizeColumnsToFit();  
//                 me.pageObj[listId].total("top");
//             }
//             if(typeof(fnCallback)=='function') fnCallback();
//         } else {
//             gfnAlert("조회오류",OUTVAR.rtnMsg);
//         }    
//     });
// }

me.fnChart=function(data) {
    console.log(data);
    //이미 chart가 있으면 data를 사용하여 update
    if(!isNull(me.myChart)) {
        var datasets = [
            {
                type: 'line',
                label: '판매량(pcs)', 
                yAxisID: 'y',
                data: extract(data,"qty"),
                borderColor: 'rgba(255, 99, 132, 0.8)', 
                backgroundColor: 'rgba(255, 99, 132, 0.8)'  
            },
            {
                type: 'bar',
                label: '매출액(백만,VAT제외)', 
                yAxisID: 'y1', 
                data: extract(data,"amt"), 
                borderColor: 'rgba(255, 99, 100, 0.5)', 
                backgroundColor: 'rgba(255, 99, 100, 0.5)' 
            },
            {
                type: 'line',
                label: '전년판매량', 
                yAxisID: 'y',
                data: extract(data,"qtyb"),
                borderColor: 'rgba(128, 128, 128, 0.8)', 
                backgroundColor: 'rgba(128, 128, 128, 0.8)'  
            },
            {
                type: 'bar',
                label: '전년매출액', 
                yAxisID: 'y1',
                data: extract(data,"amtb"),
                borderColor: 'rgba(128, 128, 128, 0.5)', 
                backgroundColor: 'rgba(128, 128, 128, 0.5)'  
            }
        ];
        me.myChart.data.datasets = datasets; 
        me.myChart.update();
        return;
    }  
    
    
    me.page.find("#myChart").children("*").remove(); 
    var datasets = [
            {
                type: 'line',
                label: '판매량(pcs)', 
                yAxisID: 'y',
                data: extract(data,"qty"),
                borderColor: 'rgba(255, 99, 132, 0.8)', 
                backgroundColor: 'rgba(255, 99, 132, 0.8)'  
            },
            {
                type: 'bar',
                label: '매출액(백만,VAT제외)', 
                yAxisID: 'y1', 
                data: extract(data,"amt"), 
                borderColor: 'rgba(255, 99, 100, 0.5)', 
                backgroundColor: 'rgba(255, 99, 100, 0.5)' 
            },
            {
                type: 'line',
                label: '전년판매량', 
                yAxisID: 'y',
                data: extract(data,"qtyb"),
                borderColor: 'rgba(128, 128, 128, 0.8)', 
                backgroundColor: 'rgba(128, 128, 128, 0.8)'  
            },
            {
                type: 'bar',
                label: '전년매출액', 
                yAxisID: 'y1',
                data: extract(data,"amtb"),
                borderColor: 'rgba(128, 128, 128, 0.5)', 
                backgroundColor: 'rgba(128, 128, 128, 0.5)'  
            }
        ];
    //ymd qty amt qtyb amtb
    var DATA_COUNT = data.length;
    var DATA_MIN   = arrFormula(data,"min('amt')");
    var DATA_MAX   = arrFormula(data,"max('amt')");
    var NUMBER_CFG = {count: DATA_COUNT, min: DATA_MIN, max: DATA_MAX};
    var DATA_LABEL = extract(data,"ymd");  
    var data = {
        labels: DATA_LABEL,
        datasets: datasets, 
    };
    var config = { 
        type: 'bar',
        data: data,
        options: {
            responsive: true,
            plugins: {
                legend: {
                    position: 'top',
                },
                title: {
                    display: true,
                    text: '당월 매출현황(전년 동월비)'
                }
            },
            scales: {
                y: {
                    position: 'left',
                },
                y1: {
                    position: 'right',
                }
            }
        }, 
    };

    setTimeout(function(){
        /* instance변수로 myChart선언 */
        me.myChart = new Chart(
            me.page.find("#myChart")[0],
            config
        );    
    },100);
    
    
    
    
    
    
    
    var actions = [
    {
        name: 'Randomize',
        handler(chart) {
        chart.data.datasets.forEach(dataset => {
            dataset.data = Utils.numbers({count: chart.data.labels.length, min: -100, max: 100});
        });
        chart.update();
        }
    },
    {
        name: 'Add Dataset',
        handler(chart) {
        const data = chart.data;
        const dsColor = Utils.namedColor(chart.data.datasets.length);
        const newDataset = {
            label: 'Dataset ' + (data.datasets.length + 1),
            backgroundColor: Utils.transparentize(dsColor, 0.5),
            borderColor: dsColor,
            borderWidth: 1,
            data: Utils.numbers({count: data.labels.length, min: -100, max: 100}),
        };
        chart.data.datasets.push(newDataset);
        chart.update();
        }
    },
    {
        name: 'Add Data',
        handler(chart) {
        const data = chart.data;
        if (data.datasets.length > 0) {
            data.labels = Utils.months({count: data.labels.length + 1});

            for (var index = 0; index < data.datasets.length; ++index) {
            data.datasets[index].data.push(Utils.rand(-100, 100));
            }

            chart.update();
        }
        }
    },
    {
        name: 'Remove Dataset',
        handler(chart) {
        chart.data.datasets.pop();
        chart.update();
        }
    },
    {
        name: 'Remove Data',
        handler(chart) {
        chart.data.labels.splice(-1, 1); // remove the label first

        chart.data.datasets.forEach(dataset => {
            dataset.data.pop();
        });

        chart.update();
        }
    }
    ];   
}





/*-- SCRIPT autogen ---------------------------------------------------- */        
if(typeof(me.fnInit)=='function') me.fnInit();
});

</script>