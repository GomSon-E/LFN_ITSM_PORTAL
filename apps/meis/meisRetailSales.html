<style>[pgmid="meisRetailSales"] .aweSalesCalendar .calendar tr > * {
    border-bottom: 1px solid #eaeaea;
}

[pgmid="meisRetailSales"] .aweSalesCalendar li.am_sale {
    background-color: #f5f5dca6;
}

[pgmid="meisRetailSales"] th ul.cal {
    line-height: 1.8;
}
[pgmid="meisRetailSales"] th ul.cal li {
    position:relative;
}
[pgmid="meisRetailSales"] th ul.cal li::before {
    font-size: 8px;
    color: #6a5acda6;
    position: absolute;
    top: -6px;
    left: -6px;
    font-family: sans-serif;
}
[pgmid="meisRetailSales"] th ul.cal li.am_sale::before {
    content: "전체";
}
[pgmid="meisRetailSales"] th ul.cal li.am_sale_06::before {
    content: "광양";
}
[pgmid="meisRetailSales"] th ul.cal li.am_sale_04::before {
    content: "양주";
}
[pgmid="meisRetailSales"] th ul.cal li.am_sale_03::before {
    content: "인천";
}


[pgmid="meisRetailSales"] .badge {
    line-height: 1.25;
}

[pgmid="meisRetailSales"] .agGrid .aweCol.readonly {
    background-color: #aeaeae21 !important;
}</style>
<div class="container-xxl">
    <div class="pageNav"></div>
    <div class="pageTop"></div>
    <div class="pageCond"></div>
    <div class="pageGuide"></div>
    
<div class="pageContent hk-pg-body">
	<div class="row">
		<div class="col-xxl col-lg col-md mb-md-4 mb-3">
			<div class="card card-border mb-0 h-100">
				<div class="card-header card-header-action" style="flex-wrap:wrap">
					<h6><i class="fas fa-square"></i> <span id="title1">누적 거래액 현황</span></h6> 
					<i class="quickGuide">(달성/신장율: 전년 동기 대비, 거래액: 백만원, VAT제외)</i>
				</div>
				<div class="card-body">
					<div class="row" id="list1">
						<div class="separator-full"></div> 
			    	</div> 
			    </div>
			    <!-- /card-body --> 	
			</div>
			<!-- /card --> 	
		</div>
		<!-- /col --> 	
	</div>
	<!-- /row --> 	
	<div class="row">
		<div id="chart" style="border:1px solid #aeaeae;"></div>
	</div>
	<!-- /row --> 	
	<div class="row">
	    <div id="list2"></div>
	</div>   
	<!-- /row --> 	 
</div>
<!-- /hk-pg-body --> 	
</div>
<!-- /container-xxl --> 	

<script>
/*-- SCRIPT autogen start ---------------------------------------------- */        
$(function() {
    var appid = "meis";
    var pgmid = "meisRetailSales"; 
    var page = $("*[pgmid='"+pgmid+"'].framepage").last();
    var pageid = page.attr("id"); 
    var me = {}
    var dataSet = {};
    var dataDef = {};
    var pageObj = {};
    var bEdit = false;
    me.fnInit = function() {
        gfn[pageid] = me; 
        me.appid    = appid;
        me.pgmid    = pgmid;
        me.pageid   = pageid;
        me.page     = page; 
        me.dataSet = dataSet;
        me.dataDef = dataDef;
        me.pageObj = pageObj;
        me.bEdit = bEdit;
me.dataDef["_pgm"]={"ver":2,"upd_dt":"2022-10-24 08:50:58","remark":"","pgmid":"meisRetailSales","proc_mst_id":"","pgm_stat":"Y","sort_seq":210,"app_pgmid":"meis","shortcut":"","reg_dt":"2022-10-21 15:33:32","reg_usid":"kihyunlee","pgm_nm":"유통 매출현황","upd_usid":"kihyunlee","pgm_tp":"UX","pgm_grp_nm":"스퀘어몰","proc_mst_nm":"","app_pgm_nm":"모바일EIS","":"트랜젝션(메뉴)","crud":""};
me.dataDef["_pgm_func"]=[{"func_icon":"fas fa-search","reg_dt":"2022-10-21 15:33:32","reg_usid":"","func_nm":"조회","upd_usid":"","upd_dt":"2022-10-21 15:33:32","func_tp":"DB_R","remark":null,"pgmid":"meisRetailSales","sort_seq":"1","funcid":"search","content":null,"crud":"R","id":"0"}];
me.dataDef["_pgm_data"] = {};
me.dataDef["_pgm_data"]["pageCond"]={"sort_seq":"1","data_id":"pageCond","data_nm":"조회조건","data_icon":null,"component_pgmid":"aweForm","component_option":null,"inout_tp":null,"content":[{"sort_seq":1,"section":null,"section_icon":null,"colgrp":"조회기간","colid":"from_dt","colnm":"시작일","dtype":"ymd","etype":"txt","attr":"ymd","defval":"date(\"1st\")","w":"10","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"0"},{"sort_seq":2,"section":null,"section_icon":null,"colgrp":"조회기간","colid":"to_dt","colnm":"종료일","dtype":"ymd","etype":"txt","attr":"ymd","defval":"date(\"today\")","w":"10","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"1"}]};
me.dataDef["_pgm_data"]["list2"]={"sort_seq":"3","data_id":"list2","data_nm":"월별 달성율, 신장율","data_icon":null,"component_pgmid":"agGrid","component_option":{"remark":"(거래액: 백만원, VAT제외)","func":[{"funcid":"goPrev","func_nm":"","func_icon":"fas fa-caret-square-left"},{"funcid":"goNext","func_nm":"","func_icon":"fas fa-caret-square-right"}]},"inout_tp":null,"content":[{"sort_seq":1,"section":null,"section_icon":null,"colgrp":null,"colid":"nm_stor","colnm":"점","dtype":"text","etype":"raw","attr":"keycol fixL","defval":null,"w":"4","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"0"},{"sort_seq":2,"section":null,"section_icon":null,"colgrp":"연간누적","colid":"am_sale","colnm":"거래액","dtype":"num","etype":"raw","attr":"keycol fixL","defval":null,"w":"6","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"1"},{"sort_seq":3,"section":null,"section_icon":null,"colgrp":"연간누적","colid":"rt_am_sale","colnm":"진척(%)","dtype":"num","etype":"raw","attr":"dec1 keycol fixL","defval":null,"w":"4","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":"100*sum(\"row.am_sale\")/sum(\"row.am_plan\")","remark":null,"crud":"C","id":"2"},{"sort_seq":4,"section":null,"section_icon":null,"colgrp":"연간누적","colid":"rt_expand","colnm":"신장(%)","dtype":"num","etype":"raw","attr":"dec1 keycol fixL","defval":null,"w":"4","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":"100*(sum(\"row.am_sale\")-sum(\"row.am_sale_by\"))/sum(\"row.am_sale_by\")","remark":null,"crud":"C","id":"3"},{"sort_seq":5,"section":null,"section_icon":null,"colgrp":null,"colid":"am_sale_by","colnm":"전년거래액","dtype":"num","etype":"raw","attr":"keycol","defval":null,"w":"6","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"4"},{"sort_seq":6,"section":null,"section_icon":null,"colgrp":null,"colid":"am_plan","colnm":"목표액","dtype":"num","etype":"raw","attr":"keycol","defval":null,"w":"6","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"5"},{"sort_seq":7,"section":null,"section_icon":null,"colgrp":"1월","colid":"am_sale_01","colnm":"거래액","dtype":"num","etype":"raw","attr":null,"defval":null,"w":"6","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"6"},{"sort_seq":8,"section":null,"section_icon":null,"colgrp":"1월","colid":"rt_am_sale_01","colnm":"달성(%)","dtype":"num","etype":"raw","attr":"dec1","defval":null,"w":"4","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":"100*sum(\"row.am_sale_01\")/sum(\"row.am_plan_01\")","remark":null,"crud":"C","id":"7"},{"sort_seq":9,"section":null,"section_icon":null,"colgrp":"1월","colid":"rt_expand_01","colnm":"신장(%)","dtype":"num","etype":"raw","attr":"dec1","defval":null,"w":"4","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":"100*(sum(\"row.am_sale_01\")-sum(\"row.am_sale_by_01\"))/sum(\"row.am_sale_by_01\")","remark":null,"crud":"C","id":"8"},{"sort_seq":10,"section":null,"section_icon":null,"colgrp":"2월","colid":"am_sale_02","colnm":"거래액","dtype":"num","etype":"raw","attr":"readonly","defval":null,"w":"6","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"9"},{"sort_seq":11,"section":null,"section_icon":null,"colgrp":"2월","colid":"rt_am_sale_02","colnm":"달성(%)","dtype":"num","etype":"raw","attr":"dec1 readonly","defval":null,"w":"4","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":"100*sum(\"row.am_sale_02\")/sum(\"row.am_plan_02\")","remark":null,"crud":"C","id":"10"},{"sort_seq":12,"section":null,"section_icon":null,"colgrp":"2월","colid":"rt_expand_02","colnm":"신장(%)","dtype":"num","etype":"raw","attr":"dec1 readonly","defval":null,"w":"4","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":"100*(sum(\"row.am_sale_02\")-sum(\"row.am_sale_by_02\"))/sum(\"row.am_sale_by_02\")","remark":null,"crud":"C","id":"11"},{"sort_seq":13,"section":null,"section_icon":null,"colgrp":"3월","colid":"am_sale_03","colnm":"거래액","dtype":"num","etype":"raw","attr":null,"defval":null,"w":"6","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"12"},{"sort_seq":14,"section":null,"section_icon":null,"colgrp":"3월","colid":"rt_am_sale_03","colnm":"달성(%)","dtype":"num","etype":"raw","attr":"dec1","defval":null,"w":"4","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":"100*sum(\"row.am_sale_03\")/sum(\"row.am_plan_03\")","remark":null,"crud":"C","id":"13"},{"sort_seq":15,"section":null,"section_icon":null,"colgrp":"3월","colid":"rt_expand_03","colnm":"신장(%)","dtype":"num","etype":"raw","attr":"dec1","defval":null,"w":"4","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":"100*(sum(\"row.am_sale_03\")-sum(\"row.am_sale_by_03\"))/sum(\"row.am_sale_by_03\")","remark":null,"crud":"C","id":"14"},{"sort_seq":16,"section":null,"section_icon":null,"colgrp":"4월","colid":"am_sale_04","colnm":"거래액","dtype":"num","etype":"raw","attr":"readonly","defval":null,"w":"6","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"15"},{"sort_seq":17,"section":null,"section_icon":null,"colgrp":"4월","colid":"rt_am_sale_04","colnm":"달성(%)","dtype":"num","etype":"raw","attr":"dec1 readonly","defval":null,"w":"4","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":"100*sum(\"row.am_sale_04\")/sum(\"row.am_plan_04\")","remark":null,"crud":"C","id":"16"},{"sort_seq":18,"section":null,"section_icon":null,"colgrp":"4월","colid":"rt_expand_04","colnm":"신장(%)","dtype":"num","etype":"raw","attr":"dec1 readonly","defval":null,"w":"4","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":"100*(sum(\"row.am_sale_04\")-sum(\"row.am_sale_by_04\"))/sum(\"row.am_sale_by_04\")","remark":null,"crud":"C","id":"17"},{"sort_seq":19,"section":null,"section_icon":null,"colgrp":"5월","colid":"am_sale_05","colnm":"거래액","dtype":"num","etype":"raw","attr":null,"defval":null,"w":"6","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"18"},{"sort_seq":20,"section":null,"section_icon":null,"colgrp":"5월","colid":"rt_am_sale_05","colnm":"달성(%)","dtype":"num","etype":"raw","attr":"dec1","defval":null,"w":"4","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":"100*sum(\"row.am_sale_05\")/sum(\"row.am_plan_05\")","remark":null,"crud":"C","id":"19"},{"sort_seq":21,"section":null,"section_icon":null,"colgrp":"5월","colid":"rt_expand_05","colnm":"신장(%)","dtype":"num","etype":"raw","attr":"dec1","defval":null,"w":"4","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":"100*(sum(\"row.am_sale_05\")-sum(\"row.am_sale_by_05\"))/sum(\"row.am_sale_by_05\")","remark":null,"crud":"C","id":"20"},{"sort_seq":22,"section":null,"section_icon":null,"colgrp":"6월","colid":"am_sale_06","colnm":"거래액","dtype":"num","etype":"raw","attr":"readonly","defval":null,"w":"6","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"21"},{"sort_seq":23,"section":null,"section_icon":null,"colgrp":"6월","colid":"rt_am_sale_06","colnm":"달성(%)","dtype":"num","etype":"raw","attr":"dec1 readonly","defval":null,"w":"4","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":"100*sum(\"row.am_sale_06\")/sum(\"row.am_plan_06\")","remark":null,"crud":"C","id":"22"},{"sort_seq":24,"section":null,"section_icon":null,"colgrp":"6월","colid":"rt_expand_06","colnm":"신장(%)","dtype":"num","etype":"raw","attr":"dec1 readonly","defval":null,"w":"4","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":"100*(sum(\"row.am_sale_06\")-sum(\"row.am_sale_by_06\"))/sum(\"row.am_sale_by_06\")","remark":null,"crud":"C","id":"23"},{"sort_seq":25,"section":null,"section_icon":null,"colgrp":"7월","colid":"am_sale_07","colnm":"거래액","dtype":"num","etype":"raw","attr":null,"defval":null,"w":"6","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"24"},{"sort_seq":26,"section":null,"section_icon":null,"colgrp":"7월","colid":"rt_am_sale_07","colnm":"달성(%)","dtype":"num","etype":"raw","attr":"dec1","defval":null,"w":"4","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":"100*sum(\"row.am_sale_07\")/sum(\"row.am_plan_07\")","remark":null,"crud":"C","id":"25"},{"sort_seq":27,"section":null,"section_icon":null,"colgrp":"7월","colid":"rt_expand_07","colnm":"신장(%)","dtype":"num","etype":"raw","attr":"dec1","defval":null,"w":"4","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":"100*(sum(\"row.am_sale_07\")-sum(\"row.am_sale_by_07\"))/sum(\"row.am_sale_by_07\")","remark":null,"crud":"C","id":"26"},{"sort_seq":28,"section":null,"section_icon":null,"colgrp":"8월","colid":"am_sale_08","colnm":"거래액","dtype":"num","etype":"raw","attr":"readonly","defval":null,"w":"6","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"27"},{"sort_seq":29,"section":null,"section_icon":null,"colgrp":"8월","colid":"rt_am_sale_08","colnm":"달성(%)","dtype":"num","etype":"raw","attr":"dec1 readonly","defval":null,"w":"4","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":"100*sum(\"row.am_sale_08\")/sum(\"row.am_plan_08\")","remark":null,"crud":"C","id":"28"},{"sort_seq":30,"section":null,"section_icon":null,"colgrp":"8월","colid":"rt_expand_08","colnm":"신장(%)","dtype":"num","etype":"raw","attr":"dec1 readonly","defval":null,"w":"4","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":"100*(sum(\"row.am_sale_08\")-sum(\"row.am_sale_by_08\"))/sum(\"row.am_sale_by_08\")","remark":null,"crud":"C","id":"29"},{"sort_seq":31,"section":null,"section_icon":null,"colgrp":"9월","colid":"am_sale_09","colnm":"거래액","dtype":"num","etype":"raw","attr":null,"defval":null,"w":"6","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"30"},{"sort_seq":32,"section":null,"section_icon":null,"colgrp":"9월","colid":"rt_am_sale_09","colnm":"달성(%)","dtype":"num","etype":"raw","attr":"dec1","defval":null,"w":"4","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":"100*sum(\"row.am_sale_09\")/sum(\"row.am_plan_09\")","remark":null,"crud":"C","id":"31"},{"sort_seq":33,"section":null,"section_icon":null,"colgrp":"9월","colid":"rt_expand_09","colnm":"신장(%)","dtype":"num","etype":"raw","attr":"dec1","defval":null,"w":"4","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":"100*(sum(\"row.am_sale_09\")-sum(\"row.am_sale_by_09\"))/sum(\"row.am_sale_by_09\")","remark":null,"crud":"C","id":"32"},{"sort_seq":34,"section":null,"section_icon":null,"colgrp":"10월","colid":"am_sale_10","colnm":"거래액","dtype":"num","etype":"raw","attr":"readonly","defval":null,"w":"6","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"33"},{"sort_seq":35,"section":null,"section_icon":null,"colgrp":"10월","colid":"rt_am_sale_10","colnm":"달성(%)","dtype":"num","etype":"raw","attr":"dec1 readonly","defval":null,"w":"4","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":"100*sum(\"row.am_sale_10\")/sum(\"row.am_plan_10\")","remark":null,"crud":"C","id":"34"},{"sort_seq":36,"section":null,"section_icon":null,"colgrp":"10월","colid":"rt_expand_10","colnm":"신장(%)","dtype":"num","etype":"raw","attr":"dec1 readonly","defval":null,"w":"4","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":"100*(sum(\"row.am_sale_10\")-sum(\"row.am_sale_by_10\"))/sum(\"row.am_sale_by_10\")","remark":null,"crud":"C","id":"35"},{"sort_seq":37,"section":null,"section_icon":null,"colgrp":"11월","colid":"am_sale_11","colnm":"거래액","dtype":"num","etype":"raw","attr":null,"defval":null,"w":"6","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"36"},{"sort_seq":38,"section":null,"section_icon":null,"colgrp":"11월","colid":"rt_am_sale_11","colnm":"달성(%)","dtype":"num","etype":"raw","attr":"dec1","defval":null,"w":"4","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":"100*sum(\"row.am_sale_11\")/sum(\"row.am_plan_11\")","remark":null,"crud":"C","id":"37"},{"sort_seq":39,"section":null,"section_icon":null,"colgrp":"11월","colid":"rt_expand_11","colnm":"신장(%)","dtype":"num","etype":"raw","attr":"dec1","defval":null,"w":"4","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":"100*(sum(\"row.am_sale_11\")-sum(\"row.am_sale_by_11\"))/sum(\"row.am_sale_by_11\")","remark":null,"crud":"C","id":"38"},{"sort_seq":40,"section":null,"section_icon":null,"colgrp":"12월","colid":"am_sale_12","colnm":"거래액","dtype":"num","etype":"raw","attr":"readonly","defval":null,"w":"6","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C","id":"39"},{"sort_seq":41,"section":null,"section_icon":null,"colgrp":"12월","colid":"rt_am_sale_12","colnm":"달성(%)","dtype":"num","etype":"raw","attr":"dec1 readonly","defval":null,"w":"4","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":"100*sum(\"row.am_sale_12\")/sum(\"row.am_plan_12\")","remark":null,"crud":"C","id":"40"},{"sort_seq":42,"section":null,"section_icon":null,"colgrp":"12월","colid":"rt_expand_12","colnm":"신장(%)","dtype":"num","etype":"raw","attr":"dec1 readonly","defval":null,"w":"4","h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":"100*(sum(\"row.am_sale_12\")-sum(\"row.am_sale_by_12\"))/sum(\"row.am_sale_by_12\")","remark":null,"crud":"C","id":"41"}]};
me.dataDef["_pgm_data"]["chart"]={"sort_seq":"4","data_id":"chart","data_nm":"월별 거래액 현황(그래프)","data_icon":null,"component_pgmid":"FreeForm","component_option":{"remark":"(거래액: 백만원, VAT제외)"},"inout_tp":null,"content":null};

        me.pageObj["_page"] = new gfnFramepage( me ); 
        for(var component_id in me.dataDef["_pgm_data"]) { 
            me.pageObj[component_id] = new gfnComponent( me.pageid, component_id, me.dataDef["_pgm_data"][component_id], me.fnEH, me); 
        }  
        setTimeout(function(){
            $("#frameset").scrollTo(0); //스크롤 
        },10);
        if(typeof(me.fnInitExtra)=='function') me.fnInitExtra(); 
    } 
/*-- SCRIPT autogen end ---------------------------------------------- */

    /* 사용자초기화 */
    me.fnInitExtra=function() {
        //탭 설정
        //gfnTab(pageid, "tabs", {"multi-active":"off","toggle-switch":"on"}); 
        //사용자 컴포넌트 
        //me.dataDef["_pgm_data"][myCompoId] = {...};
        //me.pageObj["myCompoId"] = new gfnComponent( me.pageid, myCompoId, me.dataDef["_pgm_data"][myCompoId], me.fnEH, me); 
        //me.pageObj["myCompoId"].userComponent = "myCompoId";
        //사용자 컨트롤
        //var myColinfo = {colid:...}
        //me.pageObj["myColId"] = new gfnControl(myColinfo, me.fnEH) 
        //me.page.find("#myCol").append(me.pageObj["myColId"].dispObj);
        //me.pageObj["myColId"].getVal(); / myCol.setVal(val);...   
        
        //화면호출시 조회
        me.pageObj.pageCond.setVal("from_dt",date("today").substr(0,4)+"0101");
        setTimeout(me.fnSearch, 10);        
        
    }
    /* 이벤트핸들러 */
    me.fnEH=function(component, evt, row, col, val) { 
        //console.log(evt+","+row+","+col+","+val);
        //화면기능버튼이 눌리면 
        if (component==me.pageObj["_pageFunc"]){ 
            if(typeof(me[col])=='function') me[col](); //col=기능명 me["fnSearch"]()=me.fnSearch(); 
        }
        //사용자 컴포넌트/컨트롤
        else if(component==me.pageObj["list2"]){ 
            if(evt=="componentFunc") {
                if(row=="goPrev") {
                    var st_from_dt = me.pageObj.pageCond.getVal("from_dt");
                    var st_to_dt   = me.pageObj.pageCond.getVal("to_dt"); 
                    var from_dt = (st_from_dt.substr(0,4)-1)+""+"0101";//st_from_dt.substr(4,4);
                    var to_dt   = (st_to_dt.substr(0,4)-1)+"1231"; //+st_to_dt.substr(4,4);
                    if(to_dt > date("today")) to_dt = date("today"); //to_dt는 오늘이전까지
                    me.pageObj.pageCond.setVal("from_dt",from_dt);
                    me.pageObj.pageCond.setVal("to_dt",to_dt); 
                    me.fnSearch();
                }
                if(row=="goNext") { 
                    var st_from_dt = me.pageObj.pageCond.getVal("from_dt");
                    var st_to_dt   = me.pageObj.pageCond.getVal("to_dt"); 
                    var from_dt = (st_from_dt.substr(0,4)+1)+""+"0101"; //st_from_dt.substr(4,4);
                    if(from_dt > date("today")) {
                        gfnAlert("익년 조회 확인","오늘 이후는 조회할 수 없습니다.");
                        return;
                    }
                    var to_dt   = (st_to_dt.substr(0,4)+1)+""+"1231"; //st_to_dt.substr(4,4);
                    if(to_dt > date("today")) to_dt = date("today"); //to_dt는 오늘이전까지
                    me.pageObj.pageCond.setVal("from_dt",from_dt);
                    me.pageObj.pageCond.setVal("to_dt",to_dt); 
                    me.fnSearch(); 
                }
            }
        }
    }
    /* 조회 */
    me.fnSearch=function() {
        if( !me.pageObj["pageCond"].chkValid() ) return;
        var args = me.pageObj["pageCond"].exportData()[0];
        var invar = JSON.stringify(args);        
        $(window).scrollTo(0);
        gfnTx(appid+"."+pgmid,"search",{INVAR:invar}, function(OUTVAR){ 
            //console.log(OUTVAR);
            if(OUTVAR.rtnCd=="OK") { 
                //조회조건 숨기기
                //if(!me.page.find(".btnCond").hasClass("closed")) {
                //    me.page.find(".btnCond").trigger("click");
                //}
                //컴포넌트 타이틀 
                me.page.find("#title1").text("누적 거래액 현황("+date(args.from_dt,"yyyymmdd")+"~"+date(args.to_dt,"yyyymmdd")+")");
                var list1 = me.page.find("#list1");
                list1.children("*").remove();
                
                //데이터 바인딩 me.pageObj.list1.importData(OUTVAR.list1); 
                var data = {am_sale:0,am_plan:0,am_sale_by:0,rt_achv:0,rt_expand:0};
                OUTVAR.list1.forEach(row=>{
                    data.am_sale += toNum(row.am_sale);
                    data.am_plan += toNum(row.am_plan);
                    data.am_sale_by += toNum(row.am_sale_by);
                });
                data.rt_achv   = toNum(100*data.am_sale/data.am_plan,1);
                data.rt_achv_sd = data.rt_achv>=100?"success":"danger";
                data.rt_achv_ud = data.rt_achv>=100?"up":"down";
                data.rt_expand = toNum(100*(data.am_sale-data.am_sale_by)/data.am_sale_by,1); 
                data.rt_expand_sd = data.rt_expand>=0?"success":"danger";
                data.rt_expand_ud = data.rt_expand>=0?"up":"down";

                var sum = $(`<div class="col-xxl-4 col-sm-6 mb-xxl-0 mb-3">
    <span class="d-block fw-medium fs-7" col-id="nm_stor">전체</span>
    <div class="d-flex align-items-center">
	    <span class="d-block fs-4 fw-medium text-dark mb-0">${gfnNumToStr(data.am_sale,-6)}</span>
        <span class="badge badge-sm badge-soft-${data.rt_achv_sd} ms-1">
            달성<i class="bi bi-arrow-${data.rt_achv_ud}"></i> ${data.rt_achv}%
        </span>
        <span class="badge badge-sm badge-soft-${data.rt_expand_sd} ms-1">
            신장 ${data.rt_expand}%<i class="bi bi-arrow-${data.rt_expand_ud}"></i><br>
            (${gfnNumToStr(data.am_sale-data.am_sale_by,-6)})
        </span>        
    </div>
</div>`);
                list1.prepend(sum); 
                list1.append(`<div class="separator-full"></div>`);  
                OUTVAR.list1.forEach(data=>{
                    data.rt_achv = toNum(data.rt_achv,1);
                    data.rt_achv_sd = data.rt_achv>=100?"success":"danger";
                    data.rt_achv_ud = data.rt_achv>=100?"up":"down";
                    data.rt_expand = toNum(data.rt_expand,1);
                    data.rt_expand_sd = data.rt_expand>=0?"success":"danger";
                    data.rt_expand_ud = data.rt_expand>=0?"up":"down";
                    
                    var row = $(`<div class="col-xxl-4 col-sm-6 mb-xxl-0 mb-3">
    <span class="d-block fw-medium fs-7" col-id="nm_stor">${data.nm_stor}</span>
    <div class="d-flex align-items-center">
	    <span class="d-block fs-4 fw-medium text-dark mb-0">${gfnNumToStr(data.am_sale,-6)}</span>
        <span class="badge badge-sm badge-soft-${data.rt_achv_sd} ms-1">
            달성<i class="bi bi-arrow-${data.rt_achv_ud}"></i> ${data.rt_achv}%
        </span>
        <span class="badge badge-sm badge-soft-${data.rt_expand_sd} ms-1">
            신장 ${data.rt_expand}%<i class="bi bi-arrow-${data.rt_expand_ud}"></i><br>
            (${gfnNumToStr(data.am_sale-data.am_sale_by,-6)})
        </span>        
    </div>
</div>`);    
                    list1.append(row);
                })   
                feather.replace();  //뱃지에 사용된 feather아이콘 적용
                
                //하단 조회
                setTimeout( me.fnSearch2, 10); 
                
            } else {
                gfnAlert("오류",OUTVAR.rtnMsg);
                console.log(OUTVAR);
            }
        });
    }
    
    /* 조회2 */
    me.bFirst = true;
    me.fnSearch2=function() {
        if( !me.pageObj["pageCond"].chkValid() ) return;
        var args = me.pageObj["pageCond"].exportData()[0];
        var invar = JSON.stringify(args);        
        gfnTx(appid+"."+pgmid,"search2",{INVAR:invar}, function(OUTVAR){ 
            console.log(OUTVAR);
            if(OUTVAR.rtnCd=="OK") { 

                /** 차트그리기 **/ 
                if(me.bFirst) {
                    me.bFirst = false;
                    gfnStatus("그래프를 다시 그리고 있습니다.", "잠시만 기다려주세요...");
                }
                var data_06 = [];
                var data_04 = [];
                var data_03 = [];
                var data_w = [];
                var cat = extract(OUTVAR.list2,"ymd","distinct");
                console.log(cat);
                OUTVAR.list2.forEach(el=>{
                    //if(!cat.some(ee=>ee==date(el.ymd,"yyyymmdd").toDate())) {
                    //    cat.push( date(el.ymd,"yyyymmdd").toDate() ); 
                    //    //cat.push(el.ymd);
                    //}
                    if(el.cd_stor=="06") data_06.push(toNum(el.am_sale/1000000,0));
                    if(el.cd_stor=="04") data_04.push(toNum(el.am_sale/1000000,0));
                    if(el.cd_stor=="03") data_03.push(toNum(el.am_sale/1000000,0));
                });
                
                if(!isNull(me.chart)) {
                    me.chartOptions.xaxis =  {
                            type: 'datetime', 
                            categories: cat 
                        }    
                    me.chartOptions.series =  [{
                            name: '광양',
                            data: data_06
                        }, {
                            name: '양주',
                            data: data_04
                        }, {
                            name: '인천',
                            data: data_03
                        }];
                    me.chart.updateOptions(me.chartOptions);  
                } else {
                    me.chartOptions = { 
                        chart: {
                            type: 'bar',
                            height: 350,
                            stacked: true,
                            toolbar: {
                                show: true
                            },
                            zoom: {
                                enabled: true
                            }
                        },
                        series: [{
                            name: '광양',
                            data: data_06
                        }, {
                            name: '양주',
                            data: data_04
                        }, {
                            name: '인천',
                            data: data_03
                        }],
                        xaxis: {
                            type: 'datetime',
                            categories: cat,
                            tickPlacement: 'on'
                        },
                        plotOptions: {
                            bar: {
                                horizontal: false,
                                dataLabels: {
                                    total: {enabled: true},
                                }
                            },
                        }, 
                        dataLabels: {
                            enabled: !$("body").hasClass("mobile"),  
                        },
                        colors:['#00357c', '#15715a', '#ff9100'],
                        toolbar: {
                            show: true,
                            tools: {
                                download: true,
                                selection: true,
                                zoom: true,
                                zoomin: true,
                                zoomout: true,
                                pan: true,
                                reset: true | '<img src="/static/icons/reset.png" width="20">',
                                customIcons: []
                            }
                        },
                        
                        /*
                        dropShadow: {
                          enabled: true,
                          top: 0,
                          left: 0,
                          blur: 3,
                          opacity: 0.5
                        },
                        dataLabels: {
                            enabled: true,
                            style:{colors:["#fff"]},
                            dropShadow:{
                                enabled:true,
                                left:1,
                                top:1,
                                opacity:0.25 
                            }
                        }, 
                        responsive: [{
                            breakpoint: 480,
                            options: {
                                legend: {
                                    position: 'bottom',
                                    offsetX: -10,
                                    offsetY: 0
                                }
                            }
                        }],
                        legend: {
                            position: 'right',
                            offsetY: 40
                        },
                        stroke: {
                            width: 1,
                            colors: ["#efefef"]
                        },
                        fill: {
                            opacity: 1
                        }
                        */
                    }
                    
                    me.chart = new ApexCharts(me.pageObj.chart.componentBody[0], me.chartOptions); 
                    me.chart.render(); 
                }

                var list2crosstab = []; 
                OUTVAR.list2.forEach(el=>{
                    var row; //점별로 있으면 찾고 없으면 만들어준다.
                    if(list2crosstab.some(e=>e.cd_stor==el.cd_stor)) row = list2crosstab.find(e=>e.cd_stor==el.cd_stor);
                    else {
                        row = {cd_stor:el.cd_stor,nm_stor:el.nm_stor}
                        list2crosstab.push(row);
                    }
                    
                    row["am_sale"]    = nvl(row["am_sale"],0) + toNum(el.am_sale);
                    row["am_plan"]    = nvl(row["am_plan"],0) + toNum(el.am_plan);
                    row["am_sale_by"] = nvl(row["am_sale_by"],0) + toNum(el.am_sale_by);

                    row["am_sale_"+el.mm]    = toNum(el.am_sale/1000000,0);
                    row["am_plan_"+el.mm]    = toNum(el.am_plan/1000000,0);
                    row["am_sale_by_"+el.mm] = toNum(el.am_sale_by/1000000,0);
                    row["rt_am_sale_"+el.mm] = toNum(el.rt_am_sale);
                    row["rt_expand_"+el.mm]  = toNum(el.rt_expand);
                    
                });
                list2crosstab.forEach(row=>{
                    row["am_sale"]    = toNum(row["am_sale"]/1000000,0);
                    row["am_plan"]    = toNum(row["am_plan"]/1000000,0);
                    row["am_sale_by"] = toNum(row["am_sale_by"]/1000000,0);
                    row["rt_am_sale"] = format(100*row["am_sale"]/row["am_plan"],1);
                    row["rt_expand"]  = format(100*(row["am_sale"]-row["am_sale_by"])/row["am_sale_by"],1);
                    
                })
                
                console.log(list2crosstab);
                me.pageObj.list2.importData(list2crosstab); 
                me.pageObj.list2.total("top");
                me.pageObj.list2.gridOptions.api.ensureColumnVisible("rt_expand_"+date("today","mm"));
            } else {
                gfnAlert("오류",OUTVAR.rtnMsg);
                console.log(OUTVAR);
            }
        });
    }    
    
    
    
    

/*-- SCRIPT autogen ---------------------------------------------------- */        
if(typeof(me.fnInit)=='function') me.fnInit();
});

</script>