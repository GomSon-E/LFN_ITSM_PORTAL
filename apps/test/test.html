<!-- css start -->
<style>
    [pgmid='test'].framepage { 
        width:100%;
    }
    </style>
    
    <!-- html start -->
    <div class="pageNav"></div>
    <div class="pageTop"></div>
    <div class="pageCond"></div>
    <div class="pageContent">
             <div id='list'></div>
    
    </div>
    <script>
    /*-- _script(자동생성1) start ---------------------------------------------- */        
    $(function() {
        var appid = "test";
        var pgmid = "test"; 
        var page = $("*[pgmid='"+pgmid+"'].framepage").last();
        var pageid = page.attr("id"); 
        var me = {}
        var dataSet = {};
        var dataDef = {};
        var pageObj = {};
        var bEdit = false;
        me.fnInit = function() {
            gfn[pageid] = me; 
            me.appid    = appid;
            me.pgmid    = pgmid;
            me.pageid   = pageid;
            me.page     = page; 
            me.dataSet = dataSet;
            me.dataDef = dataDef;
            me.pageObj = pageObj;
            me.bEdit = bEdit;
    me.dataDef["_pgm"]={"ver":0.1,"upd_dt":"2022-12-09 09:46:56","remark":"","pgmid":"test","proc_mst_id":"","pgm_stat":"Y","sort_seq":null,"app_pgmid":"test","shortcut":"","reg_dt":"2022-12-09 09:46:56","reg_usid":"hjkim","pgm_nm":"test","upd_usid":"hjkim","pgm_tp":"UX","pgm_grp_nm":"","proc_mst_nm":"","":"트랜젝션(메뉴)","app_pgm_nm":"테스트","crud":""};
    me.dataDef["_pgm_func"]=[{"sort_seq":null,"funcid":"save","func_nm":"save","func_icon":null,"content":null,"func_tp":null,"remark":null,"crud":"C","id":"0"}];
    me.dataDef["_pgm_data"] = {};
    me.dataDef["_pgm_data"]["list"]={"sort_seq":null,"data_id":"list","data_nm":"list","component_pgmid":"agGrid","content":[{"sort_seq":null,"section":null,"section_icon":null,"colgrp":null,"colid":"1","colnm":"1","dtype":"text","etype":"pwd","attr":null,"defval":null,"w":null,"h":null,"refcd":null,"option":null,"len":null,"valid":null,"colFormula":null,"grpFormula":null,"totFormula":null,"remark":null,"crud":"C"}],"data_icon":null,"component_option":null,"inout_tp":null};
    
        me.pageObj["_page"] = new gfnFramepage( me ); 
        for(var component_id in me.dataDef["_pgm_data"]) { 
            me.pageObj[component_id] = new gfnComponent( me.pageid, component_id, me.dataDef["_pgm_data"][component_id], me.fnEH, me); 
        }  
        setTimeout(function(){
            $("#frameset").scrollTo(0); //스크롤 
        },10);
        if(typeof(me.fnInitExtra)=='function') me.fnInitExtra(); 
    }
    /*-- script(개발자작성) start ---------------------------------------------------- */ 
        /* 사용자초기화 */
        me.fnInitExtra=function() {
            //사용자 컴포넌트 
            //me.dataDef["_pgm_data"][myCompoId] = {...};
            //me.pageObj["myCompoId"] = new gfnComponent( me.pageid, myCompoId, me.dataDef["_pgm_data"][myCompoId], me.fnEH, me); 
            //me.pageObj["myCompoId"].userComponent = "myCompoId";
            //사용자 컨트롤
            //var myColinfo = {colid:...}
            //me.pageObj["myColId"] = new gfnControl(myColinfo, me.fnEH) 
            //me.page.find("#myCol").append(me.pageObj["myColId"].dispObj);
            //me.pageObj["myColId"].getVal(); / myCol.setVal(val);...    
        }
        /* 이벤트핸들러 */
        me.fnEH=function(component, evt, row, col, val) { 
            //화면기능버튼이 눌리면 
            if (component==me.pageObj["_pageFunc"]){ 
                if(typeof(me[col])=='function') me[col](); //col=기능명 me["fnSearch"]()=me.fnSearch(); 
            }
            //list:list 이벤트처리   
            else if(component==me.pageObj["list"]) {
                if(evt=="componentFunc") {
                    if(row=="addRow") {
                        component.addRow();
                    } else if(row=="delRow") {
                        component.delRow();
                    }
                }
                //if(evt=="change" && col=="colid") {...}
            }
    
            //사용자 컴포넌트/컨트롤
            else if(component.userComponent=="myCompoId") {
                //if(evt=="dblclick" && col=="colid") {...}
            }
        }
        //save:save 
        me.fnSave=function() {
            if( !me.pageObj["pageCond"].chkValid() ) return;
            if( !me.pageObj["list"].chkValid() ) return;
            var args = me.pageObj["pageCond"].exportData()[0];
            args.list = me.pageObj["list"].exportData();
            //console.log(args);
            var invar = JSON.stringify(args);
            gfnTx(appid+"."+pgmid,"save",{INVAR:invar},function(OUTVAR){
                //console.log(OUTVAR);
                if(OUTVAR.rtnCd=="OK") {
                    gfnAlert("저장성공","입력한 정보가 저장되었습니다.");
                    me.fnSearch();
                } else {
                    gfnAlert("저장오류",OUTVAR.rtnMsg);
                }
            });
        }
    
    /*-- _script2(자동생성2) start ---------------------------------------------------- */        
    if(typeof(me.fnInit)=='function') me.fnInit();
    });
    
    </script>